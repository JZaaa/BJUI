!function(t){var e,i,a=!1;"function"==typeof define&&define.amd&&(define(t),a=!0),"object"==typeof exports&&(module.exports=t(),a=!0),a||(e=window.Cookies,(i=window.Cookies=t()).noConflict=function(){return window.Cookies=e,i})}(function(){function g(){for(var t=0,e={};t<arguments.length;t++){var i,a=arguments[t];for(i in a)e[i]=a[i]}return e}return function t(p){function f(t,e,i){var a,n;if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(i=g({path:"/"},f.defaults,i)).expires&&((n=new Date).setMilliseconds(n.getMilliseconds()+864e5*i.expires),i.expires=n),i.expires=i.expires?i.expires.toUTCString():"";try{a=JSON.stringify(e),/^[\{\[]/.test(a)&&(e=a)}catch(t){}e=p.write?p.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o,s="";for(o in i)i[o]&&(s+="; "+o,!0!==i[o]&&(s+="="+i[o]));return document.cookie=t+"="+e+s}t||(a={});for(var r=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<r.length;d++){var c=r[d].split("="),u=c.slice(1).join("=");this.json||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var h=c[0].replace(l,decodeURIComponent),u=p.read?p.read(u,h):p(u,h)||u.replace(l,decodeURIComponent);if(this.json)try{u=JSON.parse(u)}catch(t){}if(t===h){a=u;break}t||(a[h]=u)}catch(t){}}return a}}return(f.set=f).get=function(t){return f.call(f,t)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(t,e){f(t,"",g(e,{expires:-1}))},f.withConverter=t,f}(function(){})}),jQuery.cookie=function(t,e,i){return void 0!==e?(i=i||{},null===e?Cookies.remove(t,i):Cookies.set(t,e,i)):Cookies.get(t)},function(u){"use strict";var h={version:"1.7.4",JSPATH:"BJUI/",PLUGINPATH:"BJUI/plugins/",IS_DEBUG:!1,date:!0,KeyPressed:{ctrl:!1,shift:!1},theme:"blue",dialog:{mask:!1,width:500,height:300},pluginConfig:{checkbox:"icheck",vue:{autoUnmount:!0,unmountAttr:"[data-bj-vue-dom]"}},KindEditor:{uploadJson:void 0,fileManagerJson:void 0,formatUploadUrl:!0},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},iconPrefix:"fa fa-",eventType:{initUI:"bjui.initUI",beforeInitUI:"bjui.beforeInitUI",afterInitUI:"bjui.afterInitUI",ajaxStatus:"bjui.ajaxStatus",resizeGrid:"bjui.resizeGrid",beforeAjaxLoad:"bjui.beforeAjaxLoad",beforeLoadNavtab:"bjui.beforeLoadNavtab",beforeLoadDialog:"bjui.beforeLoadDialog",afterLoadNavtab:"bjui.afterLoadNavtab",afterLoadDialog:"bjui.afterLoadDialog",beforeCloseNavtab:"bjui.beforeCloseNavtab",beforeCloseDialog:"bjui.beforeCloseDialog",afterCloseNavtab:"bjui.afterCloseNavtab",afterCloseDialog:"bjui.afterCloseDialog",destroyModules:"bjui.destroyModules",destroyPanel:"bjui.destroyPanel"},pageInfo:{total:"total",pageCurrent:"pageCurrent",pageSize:"pageSize",orderField:"orderField",orderDirection:"orderDirection"},alertMsg:{displayPosition:"topcenter",displayMode:"slide",alertTimeout:3e3},ajaxTimeout:5e4,statusCode:{ok:200,error:300,timeout:301,unauthorized:401,forbidden:403},httpCode:{unauthorized:401,forbidden:403},keys:{statusCode:"statusCode",message:"message"},ui:{windowWidth:0,showSlidebar:!0,clientPaging:!0,overwriteHomeTab:!1},layout:{mode:"default",tags:!0,panel:!0},debug:function(t){this.IS_DEBUG&&("undefined"!=typeof console?console.log(t):alert(t))},loginInfo:{url:"login.html",title:"Login",width:420,height:260,mask:!0},loadLogin:function(){var t=this.loginInfo;u("body").dialog({id:"bjui-login",url:t.url,title:t.title,width:t.width,height:t.height,mask:t.mask})},init:function(t){t=u.extend({},t);u.extend(h.statusCode,t.statusCode),u.extend(h.pageInfo,t.pageInfo),u.extend(h.alertMsg,t.alertMsg),u.extend(h.loginInfo,t.loginInfo),u.extend(h.KindEditor,t.KindEditor),u.extend(h.ui,t.ui),u.extend(h.dialog,t.dialog),t.httpCode&&u.extend(h.httpCode,t.httpCode),t.iconPrefix&&(this.iconPrefix=t.iconPrefix),t.pluginConfig&&u.extend(!0,h.pluginConfig,t.pluginConfig),t.layout&&u.extend(h.layout,t.layout),t.JSPATH&&(this.JSPATH=t.JSPATH),t.PLUGINPATH&&(this.PLUGINPATH=t.PLUGINPATH),t.ajaxTimeout&&(this.ajaxTimeout=t.ajaxTimeout),this.date=(void 0===t.date?this:t).date,this.IS_DEBUG=t.debug||!1,this.theme=u.cookie("bjui_theme")||t.theme,this.initEnv(),this.date&&this.initDate(),u(this).theme("setTheme",this.theme)},initEnv:function(){u(window).resize(function(){var t=u(this).width();h.ui.windowWidth&&600<h.ui.windowWidth&&h.ui.windowWidth<t&&(t=h.ui.windowWidth),h.initLayout(t),setTimeout(function(){u(this).trigger(h.eventType.resizeGrid)},30)}),setTimeout(function(){var t=u(window).width();h.ui.windowWidth&&600<h.ui.windowWidth&&h.ui.windowWidth<t&&(t=h.ui.windowWidth),h.initLayout(t),u(document).initui()},10)},initLayout:function(t){var e=u("#bjui-header"),i=u("#bjui-navtab"),a=t-(h.ui.showSlidebar?u("#bjui-sidebar").width()+6:6);h.layout&&"default"!==h.layout.mode&&(a+=6);var n=u("#bjui-footer").outerHeight()||0,o=u(window).height()-e.height()-n,n=0;h.layout&&!h.layout.tags?(i.find(".tabsPageHeader").hide(),i.find(".tabsPageContent").css("margin-top",0)):n=i.find(".tabsPageHeader").height(),h.ui.windowWidth&&u("#bjui-window").width(t),h.windowWidth=t,u("#bjui-container").height(o),i.width(a),u("#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy").css({height:"100%"}),u("#bjui-navtab .tabsPageContent").height(o-n),setTimeout(function(){u("#bjui-navtab > .tabsPageContent > .navtabPage").resizePageH().find(".bjui-layout").resizePageH()},10);i=u("body").data("bjui.navbar.width"),a=e.find(".bjui-navbar-toggle"),o=e.find(".bjui-navbar-logo"),n=u("#bjui-navbar-collapse"),e=n.find(".bjui-navbar-right");i||(i={logoW:o.outerWidth(),navW:e.outerWidth()},u("body").data("bjui.navbar.width",i)),i&&(t-i.logoW<i.navW?(a.show(),n.addClass("collapse menu")):(a.hide(),n.removeClass("collapse menu in")));var s=u("#bjui-hnav-navbar-box"),n=s.find("> #bjui-hnav-navbar"),r=s.prev(),l=s.next(),d=s.width(),c=0;n.find("> li").each(function(t){var e=u(this);c+=e.outerWidth(),d<c?(l.show(),s.data("hnav.move",!0).data("hnav.liw",c)):(r.hide(),l.hide(),s.removeData("hnav.move"))})},regional:{},setRegional:function(t,e){h.regional[t]=e},getRegional:function(t){if(0<=String(t).indexOf(".")){for(var e,i=String(t).split("."),a=0;a<i.length;a++)e=(e||h.regional)[i[a]];return e}return h.regional[t]},doRegional:function(i,t){return u.each(t,function(t,e){i=i.replaceAll("#"+t+"#",e)}),i},initDate:function(){var t=new Date;u("#bjui-date").html(t.formatDate("yyyy/MM/dd"));var e=u("#bjui-clock"),i=null;function a(){i&&clearInterval(i),i=setInterval(function(){t=new Date(t.setSeconds(t.getSeconds()+1)),e.html(t.formatDate("HH:mm:ss"))},1e3)}a(),document.addEventListener("visibilitychange",function(){document.hidden||(t=new Date,a())})},removeProgress:function(){var t=u(document);t.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){t.find(".bjui-ajax-mask").fadeOut("normal",function(){u(this).remove()})})}};window.BJUI=h}(jQuery),function(t){"use strict";t(function(){BJUI.setRegional("alertmsg",{title:{error:"错误提示",info:"信息提示",warn:"警告信息",correct:"成功信息",confirm:"确认信息"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}}),BJUI.setRegional("dialog",{close:"关闭",maximize:"最大化",restore:"还原",minimize:"最小化",title:"弹出窗口"}),BJUI.setRegional("orderby",{asc:"升序",desc:"降序"}),BJUI.setRegional("pagination",{total:"总记录数/总页数",first:"首页",last:"末页",prev:"上一页",next:"下一页",jumpto:"输入跳转页码，回车确认",jump:"跳转",page:"页",refresh:"刷新"}),BJUI.setRegional("progressmsg","正在努力加载数据，请稍等..."),BJUI.setRegional("datepicker",{close:"关闭",prev:"上月",next:"下月",clear:"清空",ok:"确定",dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),BJUI.setRegional("navtabCM",{refresh:"刷新本标签",close:"关闭本标签",closeother:"关闭其他标签",closeall:"关闭所有标签"}),BJUI.setRegional("dialogCM",{refresh:"刷新本窗口",close:"关闭本窗口",closeother:"关闭其他窗口",closeall:"关闭所有窗口"}),BJUI.setRegional("upload",{upConfirm:"开始上传",upPause:"暂停上传",upCancel:"取消上传"}),BJUI.setRegional("statusCode_503","服务器当前负载过大或者正在维护！"),BJUI.setRegional("sessiontimeout","会话超时，请重新登陆！"),BJUI.setRegional("plhmsg","占位符对应的选择器无有效值！"),BJUI.setRegional("nocheckgroup",'未定义选中项的组名[复选框的"data-group"]！'),BJUI.setRegional("notchecked","未选中任何一项！"),BJUI.setRegional("selectmsg","请选择一个选项！"),BJUI.setRegional("validatemsg","提交的表单中 [{0}] 个字段有错误，请更正后再提交！"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","我的主页"),t.validator&&t.validator.config({defaultMsg:"{0}格式不正确",loadingMsg:"正在验证...",rules:{digits:[/^\d+$/,"请输入整数"],number:[/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"请输入有效的数字"],letters:[/^[a-z]+$/i,"{0}只能输入字母"],datetime:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的日期时间，例：yyyy-MM-dd HH:mm:ss"],pattern:function(t,e){return!e||(!!t.value.parseDate(e)||this.renderMsg("错误的日期时间格式！",e))},accept:function(t,e){if(!e)return!0;e=e[0];return"*"===e||new RegExp(".(?:"+(e||"png|jpg|jpeg|gif")+")$","i").test(t.value)||this.renderMsg("只接受{1}后缀",e.replace("|",","))}}})})}(jQuery),function(){"use strict";BJUI.setRegional("alertmsg",{title:{error:"Error",info:"Info",warn:"Warning",correct:"Correct",confirm:"Confirm"},btnMsg:{ok:"OK",yes:"YES",no:"NO",cancel:"Cancel"}}),BJUI.setRegional("dialog",{close:"Close",maximize:"Maximize",restore:"Restore",minimize:"Minimize",title:"Popup window"}),BJUI.setRegional("orderby",{asc:"Asc",desc:"Desc"}),BJUI.setRegional("pagination",{first:"First page",last:"Last page",prev:"Prev page",next:"Next page",jumpto:"Jump page number",jump:"Jump"}),BJUI.setRegional("progressmsg","Data loading, please waiting..."),BJUI.setRegional("datepicker",{close:"Close",prev:"Prev month",next:"Next month",clear:"Clear",ok:"OK",dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),BJUI.setRegional("navtabCM",{refresh:"Refresh navtab",close:"Close navtab",closeother:"Close other navtab",closeall:"Close all navtab"}),BJUI.setRegional("dialogCM",{refresh:"Refresh dialog",close:"Close dialog",closeother:"Close other dialog",closeall:"Close all dialog"}),BJUI.setRegional("upload",{upConfirm:"Start upload",upPause:"Pause upload",upCancel:"Cancel upload"}),BJUI.setRegional("statusCode_503","The current server load is too large or is down for maintenance!"),BJUI.setRegional("sessiontimeout","Session timeout, please login!"),BJUI.setRegional("plhmsg","Placeholder corresponding selector None Valid!"),BJUI.setRegional("nocheckgroup",'Undefined group name selected item [check box "data-group"]!'),BJUI.setRegional("notchecked","Unchecked any one!"),BJUI.setRegional("selectmsg","Please select one option!"),BJUI.setRegional("validatemsg","Submitted form data has [{0}] field an error, please after modified submitting!"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","My home"),window.FRAG={dialog:'<div class="bjui-dialog bjui-dialog-container" style="top:150px; left:300px;">    <div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;">        <a class="close" href="#close" title="#close#"><i class="bjicon-cancel-circled"></i></a>        <a class="maximize" href="#maximize" title="#maximize#"><i class="bjicon-plus-circled"></i></a>        <a class="restore" href="#restore" title="#restore#"><i class="bjicon-history"></i></a>        <a class="minimize" href="#minimize" title="#minimize#"><i class="bjicon-minus-circled"></i></a>        <h1><span><i class="bjicon-th-large"></i></span> <span class="title">#title#</span></h1>    </div>    <div class="dialogContent unitBox"></div>    <div class="resizable_h_l" tar="nw"></div>    <div class="resizable_h_r" tar="ne"></div>    <div class="resizable_h_c" tar="n"></div>    <div class="resizable_c_l" tar="w" style="height:100%;"></div>    <div class="resizable_c_r" tar="e" style="height:100%;"></div>    <div class="resizable_f_l" tar="sw"></div>    <div class="resizable_f_r" tar="se"></div>    <div class="resizable_f_c" tar="s"></div></div>',taskbar:'<div id="bjui-taskbar" style="left:0px; display:none;">    <div class="taskbarContent">        <ul></ul>    </div>    <div class="taskbarLeft taskbarLeftDisabled"><i class="bjicon-angle-double-left"></i></div>    <div class="taskbarRight"><i class="bjicon-angle-double-right"></i></div></div>',splitBar:'<div id="bjui-splitBar"></div>',splitBarProxy:'<div id="bjui-splitBarProxy"></div>',resizable:'<div id="bjui-resizable" class="bjui-resizable"></div>',alertBackground:'<div class="bjui-alertBackground"></div>',maskBackground:'<div class="bjui-maskBackground bjui-ajax-mask"></div>',maskProgress:'<div class="bjui-maskProgress bjui-ajax-mask"><i class="bjicon-cog bjicon-spin"></i>&nbsp;&nbsp;#msg#<div class="progressBg"><div class="progress"></div></div></div>',progressBar_custom:'<div id="bjui-progressBar-custom" class="progressBar"><i class="bjicon-cog bjicon-spin"></i> <span></span></div>',dialogMask:'<div class="bjui-dialogBackground"></div>',orderby:'<a href="javascript:;" class="order asc" data-order-direction="asc" title="#asc#"><i class="bjicon-angle-up"></i></a><a href="javascript:;" class="order desc" data-order-direction="desc" title="#desc#"><i class="bjicon-angle-down"></i></a>',slidePanel:'<div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#bjui-accordionmenu" href="##id#" class="#class#">#icon#&nbsp;#title#<b>#righticon#</b></a></h4>    </div>    <div id="#id#" class="panel-collapse collapse#bodyclass#">        <div class="panel-body">        </div>    </div></div>',pagination:'<ul class="pagination">    <li class="j-first">        <a class="first" href="javascript:;"><i class="bjicon-to-start"></i> #first#</a>        <span class="first"><i class="bjicon-to-start"></i> #first#</span>    </li>    <li class="j-prev">        <a class="previous" href="javascript:;"><i class="bjicon-fast-bw"></i> #prev#</a>        <span class="previous"><i class="bjicon-fast-bw"></i> #prev#</span>    </li>    #pageNumFrag#    <li class="j-next">        <a class="next" href="javascript:;">#next# <i class="bjicon-fast-fw"></i></a>        <span class="next">#next# <i class="bjicon-fast-fw"></i></span>    </li>    <li class="j-last">        <a class="last" href="javascript:;">#last# <i class="bjicon-to-end"></i></a>        <span class="last">#last# <i class="bjicon-to-end"></i></span>    </li>    <li class="jumpto"><span class="p-input"><input class="form-control input-sm-pages" type="text" size="2.6" value="#pageCurrent#" title="#jumpto#"></span><a class="goto" href="javascript:;" title="#jump#"><i class="bjicon-right-open"></i></a></li></ul>',alertBoxFrag:'<div id="bjui-alertMsgBox" class="bjui-alert"><div class="alertContent"><div class="#type#"><div class="alertInner"><h1><i class="fa #fa#"></i>#title#</h1><div class="msg">#message#</div></div><div class="toolBar"><ul>#btnFragment#</ul></div></div></div></div>',alertBtnFrag:'<li><button class="btn btn-#class#" rel="#callback#" type="button">#btnMsg#</button></li>',calendarFrag:'<div id="bjui-calendar">    <div class="main">        <a class="close" href="javascript:;" title="#close#"><i class="bjicon-cancel-circled2"></i></a>        <div class="head">            <table width="100%" border="0" cellpadding="0" cellspacing="2">                <tr>                    <td width="20"><a class="prev" href="javascript:;" title="#prev#"><i class="bjicon-left-big"></i></a></td>                    <td><select name="year"></select></td>                    <td><select name="month"></select></td>                    <td width="20"><a class="next" href="javascript:;" title="#next#"><i class="bjicon-right-big"></i></a></td>                </tr>            </table>        </div>        <div class="body">            <dl class="dayNames"><dt>7</dt><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>            <dl class="days">\x3c!-- date list --\x3e</dl>            <div style="clear:both;height:0;line-height:0"></div>        </div>        <div class="foot">            <table class="time">                <tr>                    <td>                        <input type="text" class="hh" maxlength="2" data-type="hh" data-start="0" data-end="23">:<input                         type="text" class="mm" maxlength="2" data-type="mm" data-start="0" data-end="59">:<input                         type="text" class="ss" maxlength="2" data-type="ss" data-start="0" data-end="59">                    </td>                    <td><ul><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul></td>                </tr>            </table>            <button type="button" class="clearBtn btn btn-orange">#clear#</button>            <button type="button" class="okBtn btn btn-default">#ok#</button>        </div>        <div class="tm">            <ul class="hh">                <li>0</li>                <li>1</li>                <li>2</li>                <li>3</li>                <li>4</li>                <li>5</li>                <li>6</li>                <li>7</li>                <li>8</li>                <li>9</li>                <li>10</li>                <li>11</li>                <li>12</li>                <li>13</li>                <li>14</li>                <li>15</li>                <li>16</li>                <li>17</li>                <li>18</li>                <li>19</li>                <li>20</li>                <li>21</li>                <li>22</li>                <li>23</li>            </ul>            <ul class="mm">                <li>0</li>                <li>5</li>                <li>10</li>                <li>15</li>                <li>20</li>                <li>25</li>                <li>30</li>                <li>35</li>                <li>40</li>                <li>45</li>                <li>50</li>                <li>55</li>            </ul>            <ul class="ss">                <li>0</li>                <li>10</li>                <li>20</li>                <li>30</li>                <li>40</li>                <li>50</li>            </ul>        </div>    </div></div>',spinnerBtn:'<ul class="bjui-spinner"><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul>',lookupBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="lookupbtn"><i class="bjicon-search"></i></a>',dateBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="datepickerbtn"><i class="bjicon-calendar"></i></a>',navtabCM:'<ul id="bjui-navtabCM">    <li rel="reload"><span class="icon"><i class="bjicon-arrows-cw"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="bjicon-cancel"></i></span><span class="title">#close#</li>    <li rel="closeOther"><span class="icon"><i class="bjicon-cancel"></i></span><span class="title">#closeother#</li>    <li rel="closeAll"><span class="icon"><i class="bjicon-cancel"></i></span><span class="title">#closeall#</li></ul>',dialogCM:'<ul id="bjui-dialogCM">    <li rel="reload"><span class="icon"><i class="bjicon-arrows-cw"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="bjicon-cancel"></i></span><span class="title">#close#</span></li>    <li rel="closeOther"><span class="icon"><i class="bjicon-cancel"></i></span><span class="title">#closeother#</span></li>    <li rel="closeAll"><span class="icon"><i class="bjicon-cancel"></i></span><span class="title">#closeall#</span></li></ul>',externalFrag:'<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',uploadTemp:'<div id="{fileId}" class="item">    <div class="info">        <span class="up_filename">{fileName}</span><span class="up_confirm" title="#upConfirm#"><i class="bjicon-play-circled2"></i></span><span class="up_pause" title="#upPause#"><span class="glyphicon glyphicon-pause"></span></span><span class="up_cancel" title="#upCancel#"><i class="bjicon-cancel-circled2-o"></i></span>    </div>    <div class="preview"><span class="img"></span></div>    <div class="progress"><div class="bar"></div></div>    <span class="percent">{percent}</span>    <span class="filesize"><span class="uploadedsize">{uploadedSize}</span>/<span class="totalsize">{fileSize}</span></span></div>',uploadFrag:'<input class="bjui-upload-select-file" style="display:none;" type="file" name="fileselect[]" #multi# accept="#accept#"><a href="javascript:void(0)" class="#btn-default# bjui-upload-select">#btnTxt#</a><div class="queue"></div>',statusCode_503:"HTTP status 503, #statusCode_503#",sessionTimout:"#sessiontimeout#",alertPlhMsg:"#plhmsg#",alertNoCheckGroup:"#nocheckgroup#",alertNotChecked:"#notchecked#",alertSelectMsg:"#selectmsg#",validateErrorMsg:"#validatemsg#",uiTitle:"#uititle#",mainTabTitle:"#mynavtab#"}}(jQuery),function(s){"use strict";s.fn.extend({ajaxUrl:function(a){var n=s(this);n.trigger(BJUI.eventType.beforeAjaxLoad),a.loadingmask&&n.trigger(BJUI.eventType.ajaxStatus),s.ajax({type:a.type||"GET",url:a.url,data:a.data||{},cache:!1,dataType:"html",timeout:BJUI.ajaxTimeout,success:function(t){var e=t.toJson(),i=n.find("> .bjui-ajax-mask");e[BJUI.keys.statusCode]?(e[BJUI.keys.statusCode]===BJUI.statusCode.error||e[BJUI.keys.statusCode]===BJUI.statusCode.forbidden?(e[BJUI.keys.message]&&n.alertmsg("error",e[BJUI.keys.message]),n.closest(".bjui-layout").length||(n.closest(".navtab-panel").length?n.navtab("closeCurrentTab"):n.dialog("closeCurrent"))):e[BJUI.keys.statusCode]!==BJUI.statusCode.timeout&&e[BJUI.keys.statusCode]!==BJUI.statusCode.unauthorized||(n.closest(".bjui-dialog").length&&n.dialog("closeCurrent"),n.closest(".navtab-panel").length&&n.navtab("closeCurrentTab"),s("body").alertmsg("info",e[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()),i.fadeOut("normal",function(){s(this).remove()})):(n.empty().html(t).append(i).initui(),s.isFunction(a.callback)&&a.callback(t))},error:function(t,e,i){n.bjuiajax("ajaxError",t,e,i),n.closest(".bjui-layout").length||(n.closest(".navtab-panel").length?n.navtab("closeCurrentTab"):n.dialog("closeCurrent")),n.trigger("bjui.ajaxError")},statusCode:{503:function(t,e,i){n.alertmsg("error",FRAG.statusCode_503.replace("#statusCode_503#",BJUI.regional.statusCode_503)||i)},[BJUI.httpCode.unauthorized]:function(t,e,i){n.alertmsg("error","登录超时"),BJUI.loadLogin()},[BJUI.httpCode.forbidden]:function(t,e,i){BJUI.IS_DEBUG||n.alertmsg("error","无权限访问")},404:function(t,e,i){BJUI.IS_DEBUG||n.alertmsg("error"," httpCode: 404 .请求未找到！")},500:function(t,e,i){BJUI.IS_DEBUG||n.alertmsg("error"," httpCode: 500 .请求失败！")}}})},loadUrl:function(t,e,i){s(this).ajaxUrl({url:t,data:e,callback:i})},doAjax:function(e){var a,n,o=s(this);e.url?e.callback?(e.callback=e.callback.toFunc(),e.loadingmask&&(a=o.getPageTarget())&&a.length&&(a.trigger(BJUI.eventType.ajaxStatus),n=a.find("> .bjui-ajax-mask")),e.type||(e.type="POST"),e.dataType||(e.dataType="json"),e.cache||(e.cache=!1),e.timeout=BJUI.ajaxTimeout,e.success=function(t){n?e.callback?s.when(e.callback(t)).done(function(){a.trigger("bjui.ajaxStop")}):a.trigger("bjui.ajaxStop"):e.callback(t)},e.error=e.error||function(t,e,i){o.bjuiajax("ajaxError",t,e,i),n&&a.trigger("bjui.ajaxError")},s.ajax(e)):BJUI.debug("The ajax callback is undefined!"):BJUI.debug("The ajax url is undefined!")},getPageTarget:function(){var t=this.closest(".bjui-layout").length?this.closest(".bjui-layout"):this.closest(".navtab-panel").length?s.CurrentNavtab:s.CurrentDialog;return t},getPageSearchData:function(t){var e=this.find('[data-toggle="pagination"]').data(),i=this.find('form[data-toggle="ajaxsearch"]').data("ajaxSearchData")||{};return e&&t&&0<+t&&((t=Math.ceil((e.total-+t)/+e.pageSize))<=0&&(t=1),t<+e.pageCurrent&&(e.pageCurrent=t)),{searchData:i,pageInfo:{pageSize:(e=e||{}).pageSize,pageCurrent:e.pageCurrent,total:+e.total}}},resizePageH:function(){return this.each(function(){var t,e,i,a,n,o;s(this).closest(".tab-content").length||((t=s(this)).is(":hidden")||(e=t.find("> .bjui-pageHeader"),i=t.find("> .bjui-pageContent"),a=t.find("> .bjui-pageFooter"),n=e.outerHeight()||0,o=a.outerHeight()||0,t.hasClass("navtabPage")&&t.is(":hidden")&&(t.show(),n=e.outerHeight()||0,o=a.outerHeight()||0,t.hide()),a.css("bottom")&&(o+=parseInt(a.css("bottom"))||0),0===o&&t.hasClass("dialogContent")&&(o=5),i.css({top:n,bottom:o})))})},getMaxIndexObj:function(t){var i=0,a=0;return t.each(function(t){var e=parseInt(s(this).css("zIndex"))||1;i<e&&(i=e,a=t)}),t.eq(a)},serializeJson:function(){var t={},e=this.serializeArray();return s.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},isTag:function(t){return!!t&&(!!s(this).prop("tagName")&&s(this)[0].tagName.toLowerCase()===t)},isBind:function(t){var e=s(this).data("events");return e&&t&&e[t]},log:function(t){return this.each(function(){console&&console.log("%s: %o",t,this)})}}),s.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/).test(this)},includeChinese:function(){return new RegExp(/[\u4E00-\u9FA5]/).test(this)},trim:function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},replaceSuffix2:function(t){return this.replace(/\-(i)([0-9]+)$/,"-i"+t).replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replacePlh:function(i){return i=i||s(document),this.replace(/{\/?[^}]*}/g,function(t){var e=i.find(t.replace(/[{}]+/g,""));return e&&e.val()?e.val():t})},replaceMsg:function(t){return this.replace(new RegExp("({.*})","g"),t)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},replaceTmById:function(t){var i=t||s(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){var e=i.find("#"+t.replace(/[{}]+/g,""));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp("{/?[^}]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!==e&&"\n"!==e&&"\t"!==e&&"\r"!==e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1===this.indexOf("://"+document.domain)},toBool:function(){return"true"===this.toLowerCase()},toJson:function(){var t=this;try{return"object"==typeof t&&(t=t.toString()),t.trim().match("^{(.+:.+,*){1,}}$")?JSON.parse(this):this}catch(t){return this}},toObj:function(){var e=null;try{e=new Function("return "+this)()}catch(t){e=this,BJUI.debug('String toObj：Parse "String" to "Object" error! Your str is: '+this)}return e},toFunc:function(){if(this&&0!==this.length){if(this.startsWith("function"))return new Function("return "+this)();for(var t=this.split("."),e=window,i=0;i<t.length;i++)e=e[t[i]];return"function"==typeof e?e:void 0}},setUrlParam:function(t,e){var i,a=this,n=a;return null!=n&&"undefined"!==n&&""!==n&&(e=encodeURIComponent(e),i=new RegExp("(^|)"+t+"=([^&]*)(|$)"),e=t+"="+e,n=null!=a.match(i)?a.replace(i,e):a.match("[?]")?a+"&"+e:a+"?"+e),n},getQuery:function(t,e){var i,a={};e?(i=document.createElement("a")).href=e:i=window.location;for(var n,o=i.search.replace(/^\?/,"").split("&"),s=o.length,r=0;r<s;r++)o[r]&&(a[(n=o[r].split("="))[0]]=decodeURIComponent(n[1]));return t?a[t]:a}}),s.extend(Function.prototype,{toFunc:function(){return this}}),s.extend(Array.prototype,{remove:function(t){return t<0?this:this.slice(0,t).concat(this.slice(t+1,this.length))},unique:function(){var t=[];this.sort();for(var e=0;e<this.length;e++)this[e]!==this[e+1]&&(t[t.length]=this[e]);return t},myIndexOf:function(t){return this.indexOf(t)},toJson:function(){var t={};return s.each(this,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}),s.isJson=function(t){var e=!0;try{e=s.parseJSON(t)}catch(t){return!1}return!!e},s.getGUID=function(t,e,i){t=t||32,e=e||!0,i=i||null;var a,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(i=i||n.length,t)for(var s=0;s<t;s++)o[s]=n[0|Math.random()*i];else{o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(s=0;s<36;s++)o[s]||(a=0|16*Math.random(),o[s]=n[19===s?3&a|8:a])}return e?(o.shift(),"u"+o.join("")):o.join("")}}(jQuery),function(i){"use strict";function t(){}t.prototype.destroyModules=function(t){if(!(!t instanceof jQuery)){i(document).trigger(BJUI.eventType.destroyModules,t),t.find("[data-bj-panel-dom]").trigger(BJUI.eventType.destroyPanel,t);try{"undefined"!=typeof Vue&&(Vue.version.startsWith("2.")?t.find(BJUI.pluginConfig.vue.unmountAttr).each(function(){this.__vue__&&this.__vue__.$destroy()}):Vue.version.startsWith("3.")&&(BJUI.pluginConfig.vue.autoUnmount?t.find("[data-v-app]"):t.find(BJUI.pluginConfig.vue.unmountAttr)).each(function(){this.__vue_app__&&this.__vue_app__.unmount()}));var e=t.find(".bjui-upload > .uploadify");e.length&&e.uploadify("destroy");e=t.find('[data-toggle="colorpicker"]');e.length&&e.colorpicker("destroy");e=t.find('[data-toggle="selectpicker"]');e.length&&e.selectpicker("destroy")}catch(t){BJUI.debug(t)}}},BJUI.ModuleFixed=new t}(jQuery),function(s){"use strict";function r(t,e){this.$element=s(t),this.options=e}r.prototype.init=function(){var e=this;this.options.$obj=this.$element,this.options.obj&&(this.options.$obj=this.options.obj),this.options.event?this.start(this.options.event):this.$element.find(this.options.selector).bind("mousedown",function(t){e.start.apply(e,[t])})},r.prototype.start=function(t){document.onselectstart=function(t){return!1};var e=this;this.options.oleft=parseInt(this.$element.css("left"))||0,this.options.otop=parseInt(this.$element.css("top"))||0,s(document).bind("mouseup.bjui.basedrag",function(t){e.stop.apply(e,[t])}).bind("mousemove.bjui.basedrag",function(t){e.drag.apply(e,[t])})},r.prototype.drag=function(t){t=t||window.event;var e,i=this.options,a=i.oleft+(t.pageX||t.clientX)-i.event.pageX,n=i.otop+(t.pageY||t.clientY)-i.event.pageY;return n<1&&(n=0),"horizontal"===i.move?i.minW&&a>=parseInt(this.options.$obj.css("left"))+i.minW&&i.maxW&&a<=parseInt(this.options.$obj.css("left"))+i.maxW?this.$element.css("left",a):i.scop&&i.relObj&&(parseInt(i.relObj.css("left")),i.cellMinW,this.$element.css("left",a)):"vertical"===i.move?this.$element.css("top",n):a>=2*-(e=i.selector?this.options.$obj.find(i.selector):this.options.$obj).outerWidth()/3&&0<=n&&a+e.outerWidth()/3<s(window).width()&&n+e.outerHeight()<s(window).height()&&this.$element.css({left:a,top:n}),i.drag&&i.drag.apply(this.$element,[this.$element,t]),this.preventEvent(t)},r.prototype.stop=function(t){return s(document).unbind("mousemove.bjui.basedrag").unbind("mouseup.bjui.basedrag"),this.options.stop&&this.options.stop.apply(this.$element,[this.$element,t]),this.options.event&&this.destroy(),document.onselectstart=function(t){return!0},this.preventEvent(t)},r.prototype.preventEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},r.prototype.destroy=function(){this.$element.removeData("bjui.basedrag"),this.options.nounbind||this.$element.unbind("mousedown")};var t=s.fn.basedrag;s.fn.basedrag=function(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},t.data(),"object"==typeof a&&a),i=t.data("bjui.basedrag");i||t.data("bjui.basedrag",i=new r(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})},s.fn.basedrag.Constructor=r,s.fn.basedrag.noConflict=function(){return s.fn.basedrag=t,this}}(jQuery),function(l){"use strict";function s(t,e){this.$element=l(t),this.$bar=this.$element.find("#bjui-sidebar"),this.$sbar=this.$element.find("#bjui-sidebar-s"),this.$accordionmenu=this.$bar.find("#bjui-accordionmenu"),this.$lock=this.$bar.find("> .toggleCollapse > .lock"),this.$navtab=l("#bjui-navtab"),this.$collapse=this.$sbar.find(".collapse"),this.$split=l("#bjui-splitBar"),this.$split2=l("#bjui-splitBarProxy"),this.isfloat=!1,this.options=e}function n(a){var n=arguments,o=a;return this.each(function(){var t=l(this),e=l.extend({},t.data(),"object"==typeof a&&a),i=t.data("bjui.slidebar");i||t.data("bjui.slidebar",i=new s(this,e)),"string"==typeof o&&l.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}l(function(){l("#bjui-leftside").after("\x3c!-- Adjust the width of Left slide --\x3e").after(FRAG.splitBar).after(FRAG.splitBarProxy)}),s.prototype.lock=function(){var t=this,e=t.$bar.outerWidth()+4,i=BJUI.windowWidth-l("#bjui-sidebar").width()-6;t.faLock(),t.hoverLock(),t.$sbar.animate({left:-10},20),t.$bar.removeClass("shadown"),t.isfloat=!1,t.$navtab.animate({left:e,width:i},500,function(){l(window).trigger(BJUI.eventType.resizeGrid)}),t.$split.show()},s.prototype.unlock=function(){var t=this,e=0-t.$bar.outerWidth(),i=BJUI.windowWidth-6;t.faUnLock(),t.hoverUnLock(),t.$navtab.animate({left:6,width:i},400),t.$bar.animate({left:e},500,function(){t.$sbar.animate({left:0},200),t.$split.hide(),l(window).trigger(BJUI.eventType.resizeGrid)}),t.isfloat=!1},s.prototype.float=function(){this.$sbar.animate({left:-10},200),this.$bar.addClass("shadown").animate({left:0},500),this.isfloat=!0},s.prototype.hideFloat=function(){var t=this,e=0-t.$bar.outerWidth();t.$bar.animate({left:e-10},500,function(){t.$sbar.animate({left:0},100)}),t.isfloat=!1},s.prototype.hoverLock=function(){var t=this;t.$lock.hover(function(){t.tipUnLock(),t.faUnLock()},function(){t.tipLock(),t.faLock()})},s.prototype.hoverUnLock=function(){var t=this;t.$lock.hover(function(){t.tipLock(),t.faLock()},function(){t.tipUnLock(),t.faUnLock()})},s.prototype.tipLock=function(){this.$lock.data("bs.tooltip")&&this.$lock.tooltip("destroy").tooltip({title:"保持锁定，始终显示导航栏",container:"body"})},s.prototype.tipUnLock=function(){this.$lock.data("bs.tooltip")&&this.$lock.tooltip("destroy").tooltip({title:"解除锁定，自动隐藏导航栏",container:"body"})},s.prototype.faLock=function(){this.$lock.find("> i").attr("class","bjicon-lock")},s.prototype.faUnLock=function(){this.$lock.find("> i").attr("class","bjicon-lock-open-alt")},s.prototype.init=function(){var a=this;BJUI.ui.showSlidebar?a.hoverLock():a.unlock(),this.$lock.off("click.bjui.slidebar").on("click.bjui.slidebar",function(){a.isfloat?a.lock():a.unlock(),BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar}),this.$collapse.hover(function(){a.float(),a.$navtab.click(function(){a.isfloat&&a.hideFloat()})}),this.$split.mousedown(function(e){a.$split2.each(function(){var t=l(this);return setTimeout(function(){t.show()},100),t.css({visibility:"visible",left:a.$split.css("left")}).basedrag(l.extend(a.options,{obj:a.$bar,move:"horizontal",event:e,stop:function(){l(this).css("visibility","hidden");var t=parseInt(l(this).css("left"))-parseInt(a.$split.css("left")),e=a.$bar.outerWidth()+t,i=parseInt(a.$navtab.css("left"))+t,t=a.$navtab.outerWidth()-t;a.$bar.css("width",e),a.$split.css("left",l(this).css("left")),a.$navtab.css({left:i,width:t})}})),!1})}),l("#bjui-hnav-navbar-box").length&&a.moveHnav(),a.$accordionmenu.collapse().on("hidden.bs.collapse",function(t){l(this).find("> .panel > .panel-heading").each(function(){var t=l(this);t.find("> h4 > a").hasClass("collapsed")&&(t.removeClass("active"),(t=t.parent()).is(":last-child")&&t.removeClass("last-child"))})}).on("shown.bs.collapse",function(t){l(this).find("> .panel > .panel-heading").each(function(){var t=l(this);t.find("> h4 > a").hasClass("collapsed")||(t.addClass("active"),(t=t.parent()).is(":last-child")&&t.addClass("last-child"))})}),a.clickMenu()},s.prototype.clickMenu=function(){var n=this;n.$bar.on("click","ul.menu-items li > a",function(t){t.preventDefault();var e=l(this),i=e.parent(),a=e.data("options").toObj(),t=i.find("> .menu-items-children");i.addClass("active"),a&&(a.url=e.attr("href"),a.url&&"javascript:;"!==a.url&&(a.onClose=function(){i.removeClass("active")},a.onSwitch=function(){n.$accordionmenu.find("ul.menu-items li").removeClass("switch"),i.addClass("switch")},a.title||(a.title=e.text()),a.target?e.dialog(a):e.navtab(a))),t.length&&i.toggleClass("open")})},s.prototype.moveHnav=function(){var t=l("#bjui-hnav-navbar-box"),e=t.find("> #bjui-hnav-navbar"),i=t.prev(),a=t.next();i.hover(function(){e.stop().animate({left:0},2e3,function(){i.hide()})},function(){e.stop(),t.data("hnav.move")&&a.show()}).on("click",function(){return e.stop().animate({left:0},"fast",function(){i.hide()}),!1}),a.hover(function(){e.stop().animate({left:t.width()-t.data("hnav.liw")-10},2e3,function(){a.hide()})},function(){e.stop(),"0px"!==e.css("left")&&i.show()}).on("click",function(){return e.stop().animate({left:t.width()-t.data("hnav.liw")-10},"fast",function(){a.hide()}),!1})},s.prototype.initHnav=function(){var o,t,s=this.$element.text().trim(),e=this.$element.parent(),r=l("#bjui-accordionmenu"),i=e.find("> .items > ul.ztree"),a=e.find("> .items > ul.menu-items");(i.length||a.length)&&(i.length&&(t=i),a.length&&(t=t?t.add(a):a,a.find("a").each(function(){var t=l(this),e=t.data("options");!t.data("icon.init")&&e&&"string"==typeof e&&(e=e.toObj())&&e.faicon&&(e.faicon=e.faicon.trim(),t.prepend('<i class="'+BJUI.iconPrefix+e.faicon+'"></i>'),t.data("icon.init",!0).attr("title",t.text()))})),r.empty(),t.each(function(t){var e,i,a=l(this),n=a.data("faicon")||"dot-circle-o";a.data("tit")&&(s=a.data("tit")),e=t?"collapsed":"",i=t?"":" in",i=FRAG.slidePanel.replaceAll("#id#","bjui-collapse"+t).replaceAll("#title#",s).replaceAll("#righticon#",'<i class="bjicon-angle-down"></i>').replaceAll("#class#",e).replaceAll("#bodyclass#",i),i=n?i.replaceAll("#icon#",'<i class="'+BJUI.iconPrefix+n+'"></i>'):i.replaceAll("#icon#",""),(o=l(i)).find("> .panel-collapse > .panel-body").append(a.removeAttr("data-noinit")),r.append(o),t||o.collapse("show")}),l("#bjui-sidebar").initui(),e.addClass("active").data("bjui.slidebar.hnav.panels",r.find("> .panel")).siblings().removeClass("active"))};var t=l.fn.slidebar;l.fn.slidebar=n,l.fn.slidebar.Constructor=s,l.fn.basedrag.noConflict=function(){return l.fn.slidebar=t,this},l(document).one(BJUI.eventType.afterInitUI,function(t){l("#bjui-leftside").slidebar({minW:150,maxW:700})}),l(document).on("click.bjui.slidebar.data-api",'[data-toggle="slidebar"]',function(t){var e=l(this).parent(),i=l("#bjui-accordionmenu"),a=e.data("bjui.slidebar.hnav.panels");i.find("> .panel").detach(),a&&a.length?(i.append(a),e.addClass("active").siblings().removeClass("active")):n.call(l(this),"initHnav"),t.preventDefault()})}(jQuery),function(c){"use strict";function e(){this._$ul=c("#bjui-hnav-navbar"),this._$sidebar=c("#bjui-sidebar"),this._menus=[],this._initUi(),this._getMenusData(this._$ul,[],1),c("#bjui-hnav").remove(),c("#bjui-splitBar").remove(),this._bindEvent();var t,e,i,a=this._createMenuHtml(this._menus,"#bjui-sidebar__menu");this._$sidebar.html('<ul class="bjui-sidebar" id="bjui-sidebar__menu">'+a+"<ul>"),t=this._$sidebar,e=c("#bjui-navtab"),(i=e.find(".navtab-tab").find("li:first")).length&&(!(a=i.data("url"))||(a=t.find('a[data-url="'+a+'"]:first')).length&&(a.parents(".sidebar-item").addClass("active"),a=a.text(),e.find(".tabsMoreList").find("li:first a").text(a),i.find("span").text(a)))}e.prototype._initUi=function(){var t,e=BJUI.layout.style;e&&(t="",e.headerBg&&(t+="#bjui-header{background: "+e.headerBg+"!important}"),e.sidebarBg&&(t+="#bjui-sidebar{background: "+e.sidebarBg+"}"),e.sidebarLightBg&&(t+=".bjui-sidebar .sidebar-dropdown .sidebar-link{background: "+e.sidebarLightBg+"}"),e.activeLinkBg&&(t+=".bjui-sidebar .sidebar-item.active>.sidebar-link:not([data-toggle=collapse]){background: "+e.activeLinkBg+"}"),e.activeLinkBorderLeftColor&&(t+=".bjui-sidebar .sidebar-item.active>.sidebar-link:not([data-toggle=collapse]){border-left-color: "+e.activeLinkBorderLeftColor+"}"),c("head").append("<style>"+t+"</style>"))},e.prototype._bindEvent=function(){var e=this;this._$sidebar.on("click",'[data-toggle="navtab"]',function(){var t=c(this);e._$sidebar.find("li").removeClass("active"),t.parentsUntil(e._$sidebar,"li").addClass("active")})},e.prototype._getMenusData=function(t,n,o){var s=this;t.children("li").each(function(){var a=c(this);return a.children("a").each(function(){var t=c(this),e=a.children("ul"),i={name:t.text(),path:"javascript:",icon:void 0,target:t.attr("target"),data:{},children:[]};e.length?s._getMenusData(e,i.children,o+1):(i.data=t.data()||{},i.path=t.attr("href")),1===o?((t=t.children("i")).length&&(i.icon=t.first().attr("class")),s._menus.push(i)):n.push(i)})})},e.prototype._createMenuHtml=function(t,s){var r="",l=this,d=BJUI.layout.panel?"panel":"";return t.forEach(function(t){r+='<li class="sidebar-item '+d+'">';var e="";if(t.icon&&t.icon.length&&(e='<div class="sidebar-item__icon"><i class="align-middle '+t.icon+'"></i></div>'),t.children&&t.children.length){var i=c.getGUID();r+='<a data-target="#'+i+'" data-toggle="collapse" class="sidebar-link collapsed">'+e+'<span class="align-middle">'+t.name+"</span></a>",r+='<ul id="'+i+'" class="sidebar-dropdown list-unstyled collapse" data-parent="'+s+'">',r+=l._createMenuHtml(t.children,"#"+i),r+="</ul>"}else{var a="",n=t.data;if(t.path&&t.path.length&&(a=' data-url="'+t.path+'" data-load-page-data="false"',n&&n.link?(a=' href="'+t.path+'"',t.target&&(a+=' target="'+t.target+'"')):a+=' data-toggle="navtab"'),n)for(var o in delete n.url,delete n.path,n)n.hasOwnProperty(o)&&"string"==typeof n[o]&&(a+=" data-"+o+'="'+n[o]+'"');r+='<a class="sidebar-link" '+a+">"+e+'<span class="align-middle">'+t.name+"</span></a>"}r+="</li>"}),r},c(document).one(BJUI.eventType.afterInitUI,function(t){BJUI.layout&&"default"!==BJUI.layout.mode&&new e})}(jQuery),function(l){"use strict";var d,c,u;function s(t,e){this.$element=l(t),this.options=e}l(function(){d=l('<div id="bjui-contextmenu"></div>').hide(),c=l('<div id="bjui-contextmenuShadow"></div>').hide(),u=[],l("body").append("\x3c!-- contextmenu --\x3e").append(d).append(c)}),s.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null},s.prototype.init=function(){var e,i=this,a=this.options;a.id&&(u.push({id:a.id,shadow:a.shadow,bindings:a.bindings||{},ctrSub:a.ctrSub}),e=u.length-1,this.$element.on("contextmenu",function(t){return i.display(e,this,t,a),!1}))},s.prototype.display=function(t,i,e,a){var n=this,o=u[t],s=BJUI.regional[o.id],r=FRAG[o.id];l.each(s,function(t,e){r=r.replace("#"+t+"#",s[t])}),d.html(r),l.each(o.bindings,function(t,e){l('[rel="'+t+'"]',d).on("click",function(t){n.hide(),e(l(i),l("#bjui-"+o.id))})});t=e.pageX,e=e.pageY;l(window).width()<t+d.width()&&(t-=d.width()),l(window).height()<e+d.height()&&(e-=d.height()),d.css({left:t,top:e}).show(),o.shadow&&c.css({width:d.width(),height:d.height(),left:t+3,top:e+3}).show(),l(document).one("click",n.hide),l.isFunction(o.ctrSub)&&o.ctrSub(l(i),l("#bjui-"+o.id))},s.prototype.hide=function(){d.hide(),c.hide()},s.prototype.show=function(i){var a=this;i.items&&i.items.length&&a.$element.on("contextmenu",function(t){var e=!0;return i.exclude&&a.$element.find(i.exclude).each(function(){if(this===t.target||l(this).find(t.target).length)return e=!1,null}),e?(a.custom(i.items,t),!1):(t.stopPropagation(),!e)})},s.prototype.custom=function(t,e){d.empty().html("<ul></ul>");var a,n=this,i=n.options,o=d.find("> ul");l.each(t,function(t,e){var i="";e.icon&&(i='<i class="'+BJUI.iconPrefix+e.icon+'"></i>'),"diver"===e.title?a=l('<li class="diver"></li>'):(a=l('<li><span class="icon">'+i+'</span><span class="title">'+e.title+"</span></li>"),e.func&&"string"==typeof e.func&&(e.func=e.func.toFunc()),e.func&&a.on("click",function(t){n.hide(),e.func(n.$element,a)})),a.appendTo(o)});t=e.pageX,e=e.pageY;l(window).width()<t+d.width()&&(t-=d.width()),l(window).height()<e+d.height()&&(e-=d.height()),d.css({left:t,top:e}).show(),i.shadow&&c.css({width:d.width(),height:d.height(),left:t+3,top:e+3}).show(),l(document).one("click",n.hide)};var t=l.fn.contextmenu;l.fn.contextmenu=function(a){var n=arguments,o=a;return this.each(function(){var t=l(this),e=l.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.contextmenu");i||t.data("bjui.contextmenu",i=new s(this,e)),"string"==typeof o&&l.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})},l.fn.contextmenu.Constructor=s,l.fn.contextmenu.noConflict=function(){return l.fn.contextmenu=t,this}}(jQuery),function(d){"use strict";var c,o,s,t,r,u,a,n,l,h,p,f,g;d(function(){var i,e;c=0,t=d("#bjui-navtab"),r=t.find(".navtab-tab"),u=t.find(".navtab-panel"),a=t.find(".tabsLeft"),n=t.find(".tabsRight"),l=t.find(".tabsMore"),h=t.find(".tabsMoreList"),p=r.find("li:first"),f=h.find("li:first"),a.click(function(){d(this).navtab("scrollPrev")}),n.click(function(){d(this).navtab("scrollNext")}),l.click(function(){h.show()}),d(document).on("click.bjui.navtab.switchtab",function(t){t="I"===t.target.tagName?d(t.target).parent():d(t.target);l[0]!==t[0]&&h.hide()}),p.navtab("contextmenu",p).click(function(){d(this).navtab("switchTab","main")}).find("> a > span").html(function(t,e){return i=e.replace("#maintab#",BJUI.regional.maintab)}),e=d.extend({},m.DEFAULTS,p.data(),{id:"main",title:i}),p.data("initOptions",e).data("options",e),p.attr("data-url")&&d(document).one(BJUI.eventType.initUI,function(t){p.removeAttr("data-url").navtab("reload",e)}),setTimeout(function(){p.navtab("switchTab","main")},50),f.click(function(){d(this).hasClass("active")?h.hide():d(this).navtab("switchTab","main")}).find("> a").html(function(t,e){return e.replace("#maintab#",BJUI.regional.maintab)})});var m=function(t,e){this.$element=d(t),this.options=e,BJUI.layout&&!BJUI.layout.tags&&(this.options.layer?(this.options.id||(this.options.id="_layer_page"),this.options.fresh=!0):this.options.id="main",this.options.loadPageData=!1),this.tools=this.TOOLS()};function b(a){var n=arguments,o=a;return this.each(function(){var t=d(this),e=d.extend({},m.DEFAULTS,"object"==typeof a&&a),i=t.data("bjui.navtab");i||t.data("bjui.navtab",i=new m(this,e)),"string"==typeof o&&d.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):(i=new m(this,e)).openTab()})}m.DEFAULTS={id:void 0,title:"New tab",layer:!1,url:void 0,type:"GET",data:{},loadingmask:!0,fresh:!1,loadPageData:!0,autorefresh:!1,onLoad:null,beforeClose:null,onClose:null},m.prototype.TOOLS=function(){var l=this;return{getDefaults:function(){return m.DEFAULTS},getTabs:function(){return r.find("> li")},getPanels:function(){return u.find("> div")},getMoreLi:function(){return h.find("> li")},getTab:function(t){t=this.indexTabId(t);if(0<=t)return this.getTabs().eq(t)},getPanel:function(t){t=this.indexTabId(t);if(0<=t)return this.getPanels().eq(t)},getTabsW:function(t,e){return this.tabsW(this.getTabs().slice(t,e))},tabsW:function(t){var e=0;return t.each(function(){e+=d(this).outerWidth(!0)}),e},indexTabId:function(e){if(!e)return-1;var i=-1;return this.getTabs().each(function(t){d(this).data("initOptions").id===e&&(i=t)}),i},getLeft:function(){return r.position().left},getScrollBarW:function(){return t.width()-55},visibleStart:function(){for(var t=this.getLeft(),e=0,i=this.getTabs(),a=0;a<i.length;a++){if(0<=e+t)return a;e+=i.eq(a).outerWidth(!0)}return 0},visibleEnd:function(){for(var t=this.getLeft(),e=0,i=this.getTabs(),a=0;a<i.length;a++)if((e+=i.eq(a).outerWidth(!0))+t>this.getScrollBarW())return a;return i.length},scrollPrev:function(){var t=this.visibleStart();0<t&&this.scrollTab(-this.getTabsW(0,t-1))},scrollNext:function(){var t=this.visibleEnd();t<this.getTabs().length&&this.scrollTab(-this.getTabsW(0,t+1)+this.getScrollBarW())},scrollTab:function(t,e){r.animate({left:t},200,function(){l.tools.ctrlScrollBtn()})},scrollCurrent:function(){var t=this.tabsW(this.getTabs()),e=this.getScrollBarW();t<=e?this.scrollTab(0):this.getLeft()<e-t?this.scrollTab(e-t):c<this.visibleStart()?this.scrollTab(-this.getTabsW(0,c)):c>=this.visibleEnd()&&this.scrollTab(e-this.getTabs().eq(c).outerWidth(!0)-this.getTabsW(0,c))},ctrlScrollBtn:function(){var t=this.tabsW(this.getTabs());this.getScrollBarW()>t?(a.hide(),n.hide(),r.parent().removeClass("tabsPageHeaderMargin")):(a.show().removeClass("tabsLeftDisabled"),n.show().removeClass("tabsRightDisabled"),r.parent().addClass("tabsPageHeaderMargin"),0<=this.getLeft()?a.addClass("tabsLeftDisabled"):this.getLeft()<=this.getScrollBarW()-t&&n.addClass("tabsRightDisabled"))},switchTab:function(t){var e=this.getTabs().removeClass("active").eq(t).addClass("active"),i=this.getPanels(),a=i.eq(t),n=l.options.onSwitch?l.options.onSwitch.toFunc():null;e.data("reloadFlag")?(i.hide(),a.show(),l.refresh(e.data("initOptions").id)):(i.hide(),a.find(".bjui-ajax-mask").length?a.show():(a.addClass("fade").removeClass("in").show(),d.support.transition?a.one("bsTransitionEnd",function(){a.addClass("in")}).emulateTransitionEnd(10):a.removeClass("fade"))),this.getMoreLi().removeClass("active").eq(t).addClass("active"),c=t,this.scrollCurrent(),o=e,d.CurrentNavtab=s=a,n&&n.apply(l),a.trigger("bjui.navtab.switch")},closeTab:function(t,e){var i=this.getTabs().eq(t),a=this.getMoreLi().eq(t),n=this.getPanels().eq(t),o=i.data("options"),s=o.beforeClose?o.beforeClose.toFunc():null,r=o.onClose?o.onClose.toFunc():null,o=!0;s&&(o=s.apply(l,[n])),o?(BJUI.ModuleFixed.destroyModules(n),i.remove(),a.remove(),n.trigger(BJUI.eventType.beforeCloseNavtab).remove(),g&&clearInterval(g),r&&r.apply(l),t<=c&&c--,!e||0<(e=this.indexTabId(e))&&(c=e),this.scrollCurrent(),this.switchTab(c)):l.tools.switchTab(t)},closeOtherTab:function(e){e=e||c,this.getTabs().each(function(t){0<t&&e!==t&&d(this).find("> .close").trigger("click")})},loadUrlCallback:function(t){t.find(":button.btn-close").click(function(){l.closeCurrentTab()})},reload:function(t,e){e=e||t.data("reloadFlag");var i=t.data("options");e&&(t.data("reloadFlag",!1),e=l.tools.getPanel(i.id),t.hasClass("external")?l.openExternal(i.url,e):l.tools.reloadTab(e,i))},reloadTab:function(i,a){var n=a.onLoad?a.onLoad.toFunc():null,o=a.autorefresh&&(isNaN(String(a.autorefresh))?15:a.autorefresh);BJUI.ModuleFixed.destroyModules(i),a.data&&(a.data="object"==typeof a.data?a.data:a.data.toObj());var s=a.data||{};i.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:a.type||"GET",url:a.url,data:s,loadingmask:a.loadingmask,callback:function(t){var e;l.tools.loadUrlCallback(i),n&&n.apply(l,[i]),g&&clearInterval(g),o&&(g=setInterval(function(){i.navtab("refresh")},1e3*o)),a.loadPageData&&BJUI.ui.clientPaging&&i.data("bjui.clientPaging")&&((e=i.data("bjui.clientPaging"))&&(s.pageSize&&(e.pageSize=s.pageSize),s.pageCurrent&&(e.pageCurrent=s.pageCurrent)),i.data("bjui.clientPaging",e),i.pagination("setPagingAndOrderby",i))}})}}},m.prototype.contextmenu=function(t){var i=this;t.contextmenu({id:"navtabCM",bindings:{reload:function(t,e){i.refresh(t.data("initOptions").id)},closeCurrent:function(t,e){t=t.data("initOptions").id;t?i.closeTab(t):i.closeCurrentTab()},closeOther:function(t,e){0===t.index()?i.closeAllTab():(t=i.tools.indexTabId(t.data("initOptions").id),i.tools.closeOtherTab(0<t?t:c))},closeAll:function(t,e){i.closeAllTab()}},ctrSub:function(t,e){var i=e.find('[rel="reload"]'),e=e.find('[rel="closeCurrent"]');0===t.index()&&(e.addClass("disabled"),t.data("url")||i.addClass("disabled"))}})},m.prototype.openTab=function(){var e=this,t=this.$element,i=this.options,a=this.tools;if(!i.url&&i.href&&(i.url=i.href),i.url){if(i.url=decodeURI(i.url).replacePlh(t.closest(".unitBox")),!i.url.isFinishedTm())return t.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Navtab Plugin: The new navtab's url is incorrect, url: "+i.url);i.url=encodeURI(i.url);var n,o,s=i.id?a.indexTabId(i.id):c;i.id||BJUI.ui.overwriteHomeTab||0!==s||(i.id="navtab",s=-1),0<=s?(i.id||delete i.id,t=(n=a.getTabs().eq(s)).data("initOptions"),o=d.extend({},i),(t.fresh||i.fresh||t.url!==i.url)&&e.reload(o),c=s):(n=d('<li><a href="javascript:" title="#title#"><span>#title#</span></a><span class="close">&times;</span></li>'.replaceAll("#title#",i.title)),o=d('<div class="navtabPage unitBox"></div>'),s=d('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",i.title)),n.appendTo(r),o.appendTo(u),s.appendTo(h),n.data("options",i).data("initOptions",i),i.external||i.url&&i.url.isExternalUrl()?(n.addClass("external"),this.openExternal(i.url,o)):(n.removeClass("external"),a.reloadTab(o,i)),c=a.getTabs().length-1,this.contextmenu(n),n.on("click",function(t){t=d(t.target);if(t.hasClass("close"))e.closeTab(i.id);else{if(t.closest("li").hasClass("active"))return!1;e.switchTab(i.id)}}),s.on("click",function(){e.switchTab(i.id)})),a.switchTab(c),a.scrollCurrent()}else BJUI.debug("Navtab Plugin: Error trying to open a navtab, url is undefined!")},m.prototype.closeTab=function(t){t=this.tools.indexTabId(t);0<t&&this.tools.closeTab(t)},m.prototype.closeCurrentTab=function(t){0<c&&this.tools.closeTab(c,t)},m.prototype.closeAllTab=function(){this.tools.getTabs().find("> .close").each(function(){d(this).trigger("click")})},m.prototype.reloadFlag=function(t){for(var e=t.split(","),i=0;i<e.length;i++){var a=this.tools.getTab(e[i].trim());a&&(this.tools.indexTabId(e[i])===c?this.tools.reload(a,!0):a.data("reloadFlag",!0))}},m.prototype.switchTab=function(t){t=this.tools.indexTabId(t);this.tools.switchTab(t)},m.prototype.scrollPrev=function(){this.tools.scrollPrev()},m.prototype.scrollNext=function(){this.tools.scrollNext()},m.prototype.refresh=function(t){t=t?"string"==typeof t?this.tools.getTab(t):t:o;t&&t.length&&(this.tools.getPanel(t.data("initOptions").id).removeData("bjui.clientPaging"),this.reload(t.data("initOptions")))},m.prototype.reload=function(t,e){var i,a,n,o=this,t=d.extend({},"object"==typeof t&&t),s=t.id?this.tools.getTab(t.id):this.tools.getTabs().eq(c);s&&(i=s.data("initOptions")||{},a=d.extend({},{title:i.title,id:i.id},t),n=function(){i.title!==a.title&&s.find("> a").attr("title",a.title).find("> span").html(a.title),e||s.data("initOptions",a),s.data("options",a),o.tools.reload(s,!0)},t.reloadWarn?this.$element.alertmsg("confirm",t.reloadWarn,{okCall:function(){n()}}):n())},m.prototype.reloadForm=function(t,e){e=e||{};var i=d.extend({},"object"==typeof e&&e),a="string"==typeof e?(n=this.tools.getTab(e),this.tools.getPanel(e)):(n=i.id?this.tools.getTab(i.id):this.tools.getTabs().eq(c),i.id?this.tools.getPanel(i.id):this.tools.getPanels().eq(c));if(n&&a){if(!n.hasClass("external")){var n=a.find("#pagerForm"),o={},s={};if(n.attr("action")&&(i.url=n.attr("action")),n&&n.length){if(s=n.serializeJson(),e&&e.type||(i.type=n.attr("method")||"POST"),t){var r,l=BJUI.pageInfo;for(r in s[l.orderDirection]=s[l.orderField]="",a.data("bjui.clientPaging")&&(a.data("bjui.clientPaging").orderDirection=a.data("bjui.clientPaging").orderField=""),l)l.hasOwnProperty(r)&&(o[l[r]]=s[l[r]])}else o=s;i.data=d.extend({},i.data||{},o)}}this.reload(i,!0)}},m.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(c)},m.prototype.closeOtherTab=function(){return this.tools.closeOtherTab()},m.prototype.checkTimeout=function(){var t=JSON.parse(s.html());t&&t[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&this.closeCurrentTab()},m.prototype.openExternal=function(t,e){var i=e.closest(".navtab-panel").height();e.html(FRAG.externalFrag.replaceAll("{url}",t).replaceAll("{height}",i+"px"))},m.prototype.reloadWithSearch=function(t,e){var i;if("object"!=typeof e&&(e={}),i=t?"string"==typeof t?this.tools.getTab(t):t:o){var a=i.data("initOptions"),n=this.tools.getPanel(a.id);if(n){e=n.getPageSearchData(e.delCount);return void(i.hasClass("external")?this.openExternal(a.url,n):this.tools.reloadTab(n,d.extend({},a,{type:"post",data:d.extend({},e.searchData,e.pageInfo)})))}}this.reload({id:t},!1)};var e=d.fn.navtab;d.fn.navtab=b,d.fn.navtab.Constructor=m,d.fn.navtab.noConflict=function(){return d.fn.navtab=e,this},d(document).on("click.bjui.navtab.data-api",'[data-toggle="navtab"]',function(t){var e=d(this),i=e.attr("href"),a=e.data(),n=a.options;n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&d.extend(a,n)),a.title||(a.title=e.text()),i&&!a.url&&(a.url=i),b.call(e,a),t.preventDefault()})}(jQuery),function(l){"use strict";var o,r,d;l(function(){r="dialogShadow",d=c.ZINDEX,l("body").append("\x3c!-- dialog resizable --\x3e").append(FRAG.resizable)});var c=function(t,e){this.$element=l(t),this.options=e,this.tools=this.TOOLS()};function s(a){var n=arguments,o=a;return this.each(function(){var t=l(this),e=l.extend({},c.DEFAULTS,BJUI.dialog,"object"==typeof a&&a),i=t.data("bjui.dialog");i||t.data("bjui.dialog",i=new c(this,e)),"string"==typeof o&&l.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):(i=new c(this,e)).open()})}c.DEFAULTS={id:"dialog",title:"New Dialog",url:void 0,type:"GET",data:{},loadingmask:!0,width:500,height:300,minW:65,minH:40,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!1,onLoad:null,beforeClose:null,onClose:null,ajaxFormCallback:null},c.ZINDEX=30,c.prototype.TOOLS=function(){var s=this;return{getDefaults:function(){return l.extend(c.DEFAULTS,BJUI.dialog)},init:function(t){var e=s.options.width>s.options.minW?s.options.width:s.options.minW,i=s.options.height>s.options.minH?s.options.height:s.options.minH,a=l(window).width(),n=l(window).height(),o=s.options.max?0:(n-i)/2;a<e&&(e=a),n<i&&(i=n),t.height(i).width(e).show().css({left:(a-e)/2,top:0,opacity:.1}).animate({top:0<o?o:0,opacity:1}).addClass(r).find("> .dialogContent").height(i-l("> .dialogHeader",t).outerHeight()-6),l("body").find("> .bjui-dialog-container").not(t).removeClass(r)},reload:function(e,t){var i,a,n=e.find("> .dialogContent");t=t||e.data("initOptions"),i=t.onLoad?t.onLoad.toFunc():null,e.trigger(BJUI.eventType.beforeLoadDialog),BJUI.ModuleFixed.destroyModules(e),t.data&&(t.data="object"==typeof t.data?t.data:t.data.toObj()),t.url?n.ajaxUrl({type:t.type||"GET",url:t.url,data:t.data||{},loadingmask:t.loadingmask,callback:function(t){i&&i.apply(s,[e]),BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e)}}):t.target&&(a=l(t.target).html()||e.data("bjui.dialog.target"),l(t.target).empty(),e.data("bjui.dialog.target",a),n.trigger(BJUI.eventType.beforeAjaxLoad).html(a).initui(),i&&i.apply(s,[e]))},resizeContent:function(t,e,i){t.find("> .dialogContent").css({width:e-12,height:i-t.find("> .dialogHeader").outerHeight()-6}).resizePageH(),l(window).trigger(BJUI.eventType.resizeGrid)}}},c.prototype.open=function(){var t,i=this,a=i.options,e=l("body"),n=e.data(a.id);if(a.target&&l(a.target).length)a.url=void 0;else{if(!a.url&&a.href&&(a.url=a.href),!a.url)return void BJUI.debug("Dialog Plugin: Error trying to open a dialog, url is undefined!");if(a.url=decodeURI(a.url).replacePlh(i.$element.closest(".unitBox")),!a.url.isFinishedTm())return i.$element.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Dialog Plugin: The new dialog's url is incorrect, url: "+a.url);a.url=encodeURI(a.url)}n?(t=n.data("initOptions")||a,this.switchDialog(n),n.is(":hidden")&&n.show(),!t.fresh&&!a.fresh&&t.url&&t.url===a.url||(i.reload(a),n.data("initOptions",a))):(t=BJUI.regional.dialog,t=FRAG.dialog.replace("#close#",t.close).replace("#maximize#",t.maximize).replace("#restore#",t.restore).replace("#minimize#",t.minimize).replace("#title#",t.title),(n=l(t).data("options",a).data("initOptions",a).css("zIndex",d+=1).hide().appendTo(e)).find("> .dialogHeader > h1 > span.title").html(a.title),this.tools.init(n),a.maxable?n.find("a.maximize").show():n.find("a.maximize").hide(),a.minable?n.find("a.minimize").show():n.find("a.minimize").hide(),a.max&&i.maxsize(n),a.mask?this.addMask(n):a.minable&&l.fn.taskbar&&this.$element.taskbar({id:a.id,title:a.title}),n.on("click",function(t){l(t.target).data("bjui.dialog")||o&&o[0]!==n[0]&&i.switchDialog(n)}).on("click",".btn-close",function(t){i.close(n),t.preventDefault()}).on("click",".dialogHeader > a",function(t){var e=l(this);e.hasClass("close")&&i.close(n),e.hasClass("minimize")&&i.minimize(n),e.hasClass("maximize")&&(i.switchDialog(n),i.maxsize(n)),e.hasClass("restore")&&i.restore(n),t.preventDefault(),t.stopPropagation()}).on("dblclick",".dialogHeader > h1",function(t){a.maxable&&(n.find("> .dialogHeader > a.restore").is(":hidden")?n.find("a.maximize"):n.find("> .dialogHeader > a.restore")).trigger("click")}).on("mousedown.bjui.dialog.drag",".dialogHeader > h1",function(t){i.switchDialog(n),a.drawable&&!n.data("max")&&(n.data("bjui.dialog.task",!0),setTimeout(l.proxy(function(){n.data("bjui.dialog.task")&&i.drag(t,n)},i),150),t.preventDefault())}).on("mouseup.bjui.dialog.drag",".dialogHeader > h1",function(t){n.data("bjui.dialog.task",!1)}).on("mousedown.bjui.dialog.resize",'div[class^="resizable"]',function(t){var e;a.drawable&&!n.data("max")&&(e=l(this),i.switchDialog(n),i.resizeInit(t,l("#bjui-resizable"),n,e),e.show(),t.preventDefault())}).on("mouseup.bjui.dialog.resize",'div[class^="resizable"]',function(t){t.preventDefault()}),e.data(a.id,n),this.tools.reload(n,a)),l.CurrentDialog=o=n},c.prototype.addMask=function(t){var e=t.data("bjui.dialog.mask");t.wrap('<div style="z-index:'+d+'" class="bjui-dialog-wrap"></div>'),t.find("> .dialogHeader > a.minimize").hide(),e&&e.length||((e=l(FRAG.dialogMask)).css({zIndex:1,display:"block"}).insertBefore(t),t.data("bjui.dialog.mask",e))},c.prototype.refresh=function(t){if(t&&"string"==typeof t)for(var e=t.split(","),i=0;i<e.length;i++){var a=l("body").data(e[i].trim());a&&(a.removeData("bjui.clientPaging"),this.tools.reload(a))}else o.removeData("bjui.clientPaging"),this.tools.reload(o)},c.prototype.reload=function(t,e){var i,a,n,o=this,t=l.extend({},"object"==typeof t&&t),s=t.id&&l("body").data(t.id)||o.getCurrent();s&&s.length&&(i=s.data("initOptions"),a=l.extend({},i,t),n=function(){var t=s.find("> .dialogContent");i.width!==a.width&&(a.max?(s.width(a.width),t.width(a.width)):s.animate({width:a.width},"normal",function(){t.width(a.width)})),i.height!==a.height&&(a.max?(s.height(a.height),t.height(a.height-s.find("> .dialogHeader").outerHeight()-6)):s.animate({height:a.height},"normal",function(){t.height(a.height-s.find("> .dialogHeader").outerHeight()-6).resizePageH()})),i.maxable!==a.maxable&&(a.maxable?s.find("a.maximize").show():s.find("a.maximize").hide()),i.minable!==a.minable&&(a.minable?s.find("a.minimize").show():s.find("a.minimize").hide()),i.max!==a.max&&a.max&&setTimeout(o.maxsize(s),10),i.mask!==a.mask&&(a.mask?(o.addMask(s),l.fn.taskbar&&o.$element.taskbar("closeDialog",a.id)):a.minable&&l.fn.taskbar&&o.$element.taskbar({id:a.id,title:a.title})),i.title!==a.title&&(s.find("> .dialogHeader > h1 > span.title").html(a.title),s.taskbar("changeTitle",a.id,a.title)),s.data("options",a),e||s.data("initOptions",a),o.tools.reload(s,a)},a.reloadWarn?s.alertmsg("confirm",a.reloadWarn,{okCall:function(){n()}}):n())},c.prototype.reloadForm=function(t,e){var i;if("string"==typeof e?i=(n=l("body").data(e)).data("options"):"object"==typeof e&&(n=e.id&&l("body").data(e.id)||this.getCurrent()),n){"object"==typeof e&&(e.title&&n.find("> .dialogHeader > h1 > span.title").html(e.title),i=l.extend({},e,n.data("options")));var a,n=n.find("#pagerForm"),o={};if(n.attr("action")&&(i.url=n.attr("action")),n&&n.length)if(a=n.serializeJson(),e&&e.type||(i.type=n.attr("method")||"POST"),t){var s,r=BJUI.pageInfo;for(s in r)r.hasOwnProperty(s)&&(o[r[s]]=a[r[s]]);i.data=o}else o=a,i.data=l.extend({},i.data||{},o);this.reload(i,!0)}},c.prototype.getCurrent=function(){return o},c.prototype.switchDialog=function(t){var e,i;(t="string"==typeof t?l("body").data(t):t)&&(e=t.css("zIndex"),o&&o!==t&&(i=o.css("zIndex"),o.css("zIndex",e),t.css("zIndex",i),l.CurrentDialog=o=t,l.fn.taskbar&&this.$element.taskbar("switchTask",t.data("options").id)),t.addClass(r),l("body").find("> .bjui-dialog-container").not(t).removeClass(r))},c.prototype.close=function(t){var e,i,a,n,o,s=this,r="string"==typeof t?l("body").data(t):t;r&&(e=r.data("bjui.dialog.mask"),(i=r.data("options"))&&(a=r.data("bjui.dialog.target"),n=i.beforeClose?i.beforeClose.toFunc():null,o=i.onClose?i.onClose.toFunc():null,t=!0,n&&(t=n.apply(s,[r])),t?(BJUI.ModuleFixed.destroyModules(r),i.target&&a&&l(i.target).html(a),e&&e.length?(e.remove(),r.unwrap()):l.fn.taskbar&&this.$element.taskbar("closeDialog",i.id),r.animate({top:-r.outerHeight(),opacity:.1},"normal",function(){var t=l("body");t.removeData(i.id),r.trigger(BJUI.eventType.beforeCloseDialog).remove(),o&&o.apply(s);var e=t.find(".bjui-dialog-container"),t=null;e.length?t=s.$element.getMaxIndexObj(e):d=c.ZINDEX,t&&t.is(":visible")&&s.switchDialog(t)})):s.switchDialog(r)))},c.prototype.closeCurrent=function(){this.close(o)},c.prototype.checkTimeout=function(){var t=o.find("> .dialogContent"),t=JSON.parse(t.html());t&&t[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&this.closeCurrent()},c.prototype.maxsize=function(t){t.data("original",{top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height")}).data("max",!0),t.find("> .dialogHeader > a.maximize").hide(),t.find("> .dialogHeader > a.restore").show();var e=l(window).width(),i=l(window).height()-l("#bjui-taskbar").height()-1;t.css({top:0,left:0,width:e,height:i}),this.tools.resizeContent(t,e,i)},c.prototype.restore=function(t){var e=t.data("original"),i=parseInt(e.width),a=parseInt(e.height);t.css({top:e.top,left:e.left,width:i,height:a}),this.tools.resizeContent(t,i,a),t.find("> .dialogHeader > a.maximize").show(),t.find("> .dialogHeader > a.restore").hide(),t.data("max",!1)},c.prototype.minimize=function(t){t.hide(),l.fn.taskbar&&this.$element.taskbar("minimize",t)},c.prototype.drag=function(t,e){e.find("> .dialogContent").css("opacity",".3"),e.basedrag({selector:"> .dialogHeader",stop:function(){e.css({left:e.css("left"),top:e.css("top")}).find("> .dialogContent").css("opacity",1)},event:t,nounbind:!0})},c.prototype.resizeDialog=function(t,e,i){var a=parseInt(t.css("left")),n=parseInt(t.css("top")),o=parseInt(t.css("height")),t=parseInt(t.css("width"));n<0&&(n=0),e.css({top:n,left:a,width:t+2,height:o+1}).find("> .dialogContent").css("width",t-10),"w"!==i&&"e"!==i&&e.find("> .dialogContent").css({height:o-e.find("> .dialogHeader").outerHeight()-6}).resizePageH(),l(window).trigger(BJUI.eventType.resizeGrid)},c.prototype.resizeInit=function(t,e,i,a){a=a.attr("tar");l("body").css("cursor",a+"-resize"),e.css({top:i.css("top"),left:i.css("left"),height:i.outerHeight(),width:i.css("width")}).show(),this.options.dragCurrent||(this.options.dragCurrent={$resizable:e,$dialog:i,target:a,oleft:parseInt(e.css("left"))||0,owidth:parseInt(e.css("width"))||0,otop:parseInt(e.css("top"))||0,oheight:parseInt(e.css("height"))||0,ox:t.pageX||t.screenX,oy:t.pageY||t.clientY},l(document).on("mouseup.bjui.dialog.resize",l.proxy(this.resizeStop,this)),l(document).on("mousemove.bjui.dialog.resize",l.proxy(this.resizeStart,this)))},c.prototype.resizeStart=function(t){var e,i,a,n,o=this.options.dragCurrent;o&&(e=((t=t||window.event).pageX||t.screenX)-o.ox,i=(t.pageY||t.clientY)-o.oy,((n=o.$dialog.data("bjui.dialog.mask"))&&n.length||!((t.pageY||t.clientY)<=0||(t.pageY||t.clientY)>=l(window).height()-o.$dialog.find("> .dialogHeader").outerHeight()))&&(a=o.target,n=o.owidth,t=o.oheight,"n"!==a&&"s"!==a&&(n+=0<=a.indexOf("w")?-e:e),n>=this.options.minW&&(0<=a.indexOf("w")&&o.$resizable.css("left",o.oleft+e),"n"!==a&&"s"!==a&&o.$resizable.css("width",n)),"w"!==a&&"e"!==a&&(t+=0<=a.indexOf("n")?-i:i),t>=this.options.minH&&(0<=a.indexOf("n")&&o.$resizable.css("top",o.otop+i),"w"!==a&&"e"!==a&&o.$resizable.css("height",t))))},c.prototype.resizeStop=function(t){var e=this.options.dragCurrent;if(!e)return!1;l(document).off("mouseup.bjui.dialog.resize"),l(document).off("mousemove.bjui.dialog.resize"),this.options.dragCurrent=null,this.resizeDialog(e.$resizable,e.$dialog,e.target),l("body").css("cursor",""),e.$resizable.hide()};var t=l.fn.dialog;l.fn.dialog=s,l.fn.dialog.Constructor=c,l.fn.dialog.noConflict=function(){return l.fn.dialog=t,this},l(document).on("click.bjui.dialog.data-api",'[data-toggle="dialog"]',function(t){var e=l(this),i=e.attr("href"),a=e.data(),n=a.options;n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&l.extend(a,n)),a.title||(a.title=e.text()),i&&!a.url&&(a.url=i),s.call(e,a),t.preventDefault()})}(jQuery),function(s){"use strict";var a,t,e,n,i,o,r,l,d;function c(t,e){this.$element=s(t),this.$task=null,this.options=e,this.tools=this.TOOLS()}s(function(){a=s("#bjui-resizable"),t=s(FRAG.taskbar),e=t.find(".taskbarContent"),n=e.find("> ul"),i=t.find(".taskbarLeft"),o=t.find(".taskbarRight"),r="disabled",l="selected",d="taskbarMargin",s("body").append("\x3c!-- dialog task bar --\x3e").append(t),i.click(function(t){s(this).taskbar("scrollLeft")}),o.click(function(t){s(this).taskbar("scrollRight")})}),c.DEFAULTS={id:void 0,title:void 0},c.prototype.init=function(){var e=this,i=n.find("#"+this.options.id);this.show(),i.length?i.find("> div > span.title").html(this.options.title):(i=s('<li id="#taskid#"><div class="taskbutton"><span><i class="bjicon-th-large"></i></span> <span class="title">#title#</span></div><div class="close"><i class="bjicon-cancel-circled2"></i></div></li>'.replace("#taskid#",this.options.id).replace("#title#",this.options.title))).appendTo(n),this.contextmenu(i),this.switchTask(i),this.tools.scrollTask(i),i.click(function(t){return s(t.target).closest("div").hasClass("close")||s(t.target).hasClass("close")?i.dialog("close",e.options.id):(t=s("body").data(e.options.id),i.hasClass("selected")?t.find(".dialogHeader a.minimize").trigger("click"):t.is(":hidden")?e.restoreDialog(t):(t.trigger("click"),i.addClass(l)),e.scrollCurrent(i)),!1})},c.prototype.TOOLS=function(){return{scrollCurrent:function(){var t,e;this.tasksW(this.getTasks())>this.getTaskBarW()?(t=this,e=n.find("> li:last-child"),e=this.getTaskBarW()-e.position().left-e.outerWidth(!0),n.animate({left:e},200,function(){t.ctrlScrollBtn()})):this.ctrlScrollBtn()},getTaskBarW:function(){return e.width()-(i.is(":hidden")?i.width()+2:0)-(o.is(":hidden")?o.width()+2:0)},scrollTask:function(t){var e,i=this;t.position().left+this.getLeft()+t.outerWidth()>this.getBarWidth()?(e=this.getTaskBarW()-t.position().left-t.outerWidth(!0)-2,n.animate({left:e},200,function(){i.ctrlScrollBtn()})):t.position().left+this.getLeft()<0&&(e=this.getLeft()-(t.position().left+this.getLeft()),n.animate({left:e},200,function(){i.ctrlScrollBtn()}))},ctrlScrollBtn:function(){var t=this.tasksW(this.getTasks());this.getTaskBarW()>t?(e.removeClass(d),o.hide(),i.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(e.addClass(d),o.show().removeClass(r),i.show().removeClass(r),0<=this.getLeft()&&i.addClass(r),this.getLeft()<=this.getTaskBarW()-t&&o.addClass(r))},getLeft:function(){return n.position().left},visibleStart:function(){for(var t=this.getLeft(),e=this.getTasks(),i=0;i<e.length;i++)if(0<=e.eq(i).position().left+e.eq(i).outerWidth(!0)+t)return e.eq(i);return e.eq(0)},visibleEnd:function(){for(var t=this.getLeft(),e=this.getTasks(),i=0;i<e.length;i++)if(e.eq(i).position().left+e.eq(i).outerWidth(!0)+t>this.getBarWidth())return e.eq(i);return e.eq(e.length-1)},getTasks:function(){return n.find("> li")},tasksW:function(t){var e=0;return t.each(function(){e+=s(this).outerWidth(!0)}),e},getBarWidth:function(){return t.innerWidth()},getCurrent:function(){return n.find("li."+l)}}},c.prototype.contextmenu=function(t){var a=this;t.contextmenu({id:"dialogCM",bindings:{reload:function(t){t.dialog("refresh",a.options.id)},closeCurrent:function(t,e){(t.isTag("li")?t:a.tools.getCurrent()).find(".close").trigger("click")},closeOther:function(t,e){n.find("> li").not(t).each(function(t){s(this).find(".close").trigger("click")})},closeAll:function(t,e){a.tools.getTasks().each(function(t){s(this).find(".close").trigger("click")})}},ctrSub:function(t,e){var i=e.find('[rel="closeCurrent"]'),e=e.find('[rel="closeOther"]');a.tools.getCurrent().length?1===a.tools.getTasks().length&&e.addClass(r):(i.addClass(r),e.addClass(r))}})},c.prototype.closeDialog=function(t){t="string"==typeof t?this.getTask(t):t;t&&t.length&&(t.remove(),0===this.tools.getTasks().length&&this.hide(),this.tools.scrollCurrent(),this.$element.removeData("bjui.taskbar"))},c.prototype.minimize=function(t){var e=this,t="string"==typeof t?s("body").data("dialog"):t,i=this.getTask(t.data("options").id);a.css({top:t.css("top"),left:t.css("left"),height:t.css("height"),width:t.css("width")}).show().animate({top:s(window).height()-60,left:i.position().left,width:i.outerWidth(),height:i.outerHeight()},250,function(){s(this).hide(),e.inactive(i)})},c.prototype.restoreDialog=function(t){var e=this.getTask(t.data("options").id);a.css({top:s(window).height()-60,left:e.position().left,height:e.outerHeight(),width:e.outerWidth()}).show().animate({top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height")},250,function(){s(this).hide(),t.show()}),this.switchTask(e)},c.prototype.inactive=function(t){("string"==typeof t?this.getTask(t):t).removeClass(l)},c.prototype.scrollLeft=function(){var t=this.tools.visibleStart();this.tools.scrollTask(t)},c.prototype.scrollRight=function(){var t=this.tools.visibleEnd();this.tools.scrollTask(t)},c.prototype.scrollCurrent=function(t){this.tools.scrollTask(t)},c.prototype.switchTask=function(t){this.tools.getCurrent().removeClass(l),("string"==typeof t?this.getTask(t):t).addClass(l)},c.prototype.getTask=function(t){return n.find("#"+t)},c.prototype.changeTitle=function(t,e){t=this.getTask(t);t&&e&&t.find(".title").html(e)},c.prototype.show=function(){t.is(":hidden")&&t.show().animate({bottom:0},500)},c.prototype.hide=function(){t.is(":visible")&&t.animate({bottom:-50},500,function(){t.hide()})};var u=s.fn.taskbar;s.fn.taskbar=function(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},c.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.taskbar");i&&i.options.id===e.id||t.data("bjui.taskbar",i=new c(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})},s.fn.taskbar.Constructor=c,s.fn.taskbar.noConflict=function(){return s.fn.taskbar=u,this}}(jQuery),function(d){"use strict";function c(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()}var s;function n(a){var n=arguments,o=a;return this.each(function(){var t=d(this),e=d.extend({},c.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.bjuiajax");i||t.data("bjui.bjuiajax",i=new c(this,e)),"string"==typeof o&&d.isFunction(i[o])&&([].shift.apply(n),n?i[o].apply(i,n):i[o]())})}c.DEFAULTS={reload:!0,loadingmask:!0},c.CALLBACK_DEFAULTS={reloadWithSearch:!1,delCount:0},c.NAVTAB="navtab",c.prototype.TOOLS=function(){var t=this;return{getPagerForm:function(t,e){var i,a=(t.isTag("form")?t:t.find("#pagerForm:first"))[0],n=d.extend({},BJUI.pageInfo);if(t.data("bjui.clientPaging")&&(e=d.extend({},t.data("bjui.clientPaging"),e),t.data("bjui.clientPaging",e)),a)for(var o in n)n.hasOwnProperty(o)&&(i="",e&&e[o]&&(i=e[o]),a[n[o]]?i&&(a[n[o]].value=i):d('<input type="hidden" name="'+n[o]+'" value="'+i+'">').appendTo(d(a)));return a},getTarget:function(){return t.$element.closest(".navtab-panel").length?c.NAVTAB:"dialog"}}},c.prototype.ajaxForm=function(a){var n=this,o=this.$element,s=a&&a.callback,r=o.attr("enctype");a=d.extend({},n.options,"object"==typeof a&&a),s?s=s.toFunc():"dialog"!==this.tools.getTarget()||(t=d.CurrentDialog.data("initOptions")||d.CurrentDialog.data("options")||{}).ajaxFormCallback&&(s=t.ajaxFormCallback.toFunc());function l(t,e,i){s?s.apply(n,[t,o]):d.proxy(n.ajaxCallback(t),n)}var t=function(){var t,e,i={loadingmask:a.loadingmask,type:a.method||o.attr("method")||"POST",url:a.url||o.attr("action"),callback:l,error:d.proxy(n.ajaxError,n)};r&&"multipart/form-data"===r?window.FormData?d.extend(i,{data:new FormData(o[0]),contentType:!1,processData:!1}):d.extend(i,{data:o.serializeArray(),files:o.find(":file"),iframe:!0,processData:!1}):(t=a.extra||o.data("extra"),console.log(a),console.log(t),e=void 0,t&&("string"==typeof t&&(t=t.toObj()),"object"==typeof t&&(i.contentType="application/json",e=JSON.stringify(d.extend(t,o.serializeJson())))),d.extend(i,{data:e||o.serializeArray()})),o.doAjax(i)};a.confirmMsg?o.alertmsg("confirm",a.confirmMsg,{okCall:t}):t()},c.prototype.ajaxDone=function(t){var e=this.$element;t[BJUI.keys.statusCode]===BJUI.statusCode.error?t[BJUI.keys.message]&&e.alertmsg("error",t[BJUI.keys.message]):t[BJUI.keys.statusCode]===BJUI.statusCode.timeout?(e.alertmsg("info",t[BJUI.keys.message]||FRAG.sessionTimout),BJUI.loadLogin()):t[BJUI.keys.message]&&e.alertmsg("correct",t[BJUI.keys.message])},c.prototype.ajaxError=function(t,e,i){BJUI.removeProgress();var a=t.responseText.trim();a.startsWith("{")?this.ajaxDone(a.toObj()):this.$element.alertmsg("error","<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+" </div><div>thrownError: "+i+" </div><div>"+a+"</div>")},c.prototype.ajaxCallback=function(t){var e=this,i=e.$element.closest(".bjui-layout");e.ajaxDone(t),(t=d.extend({},c.CALLBACK_DEFAULTS,t))[BJUI.keys.statusCode]===BJUI.statusCode.ok&&(i&&i.length?e.divCallback(t,i):e.tools.getTarget()===c.NAVTAB?e.navtabCallback(t):e.dialogCallback(t))},c.prototype.divCallback=function(t,e){var i,a,n,o,s=this;t.tabid&&setTimeout(function(){s.$element.navtab("reloadFlag",t.tabid)},100),t.dialogid&&setTimeout(function(){s.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){s.$element.bjuiajax("refreshDiv",t.divid,{reloadWithSearch:t.reloadWithSearch,delCount:t.delCount})},100),s.options.reload&&(n=a=null,n=(i=s.tools.getPagerForm(e))?(i instanceof d||(i=d(i)),a=i.attr("action"),i.attr("method")||"GET"):(a=e.data("url"),e.data("type")||"GET"),a&&e.ajaxUrl({url:a,type:n})),s.options.reloadNavtab&&setTimeout(function(){s.$element.navtab("refresh")},100),t.forward&&(o=function(){e.ajaxUrl({url:t.forward})},t.forwardConfirm?s.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){o()}}):o())},c.prototype.navtabCallback=function(t){var e,i=this;t.closeCurrent&&!t.forward&&i.$element.navtab("closeCurrentTab"),!1!==t.tabid&&(""===d.trim(t.tabid)&&t.statusCode===BJUI.statusCode.ok?setTimeout(function(){t.reloadWithSearch?i.$element.navtab("reloadWithSearch",null,t):i.$element.navtab("refresh")},100):t.tabid?setTimeout(function(){i.$element.navtab("reloadFlag",t.tabid)},100):i.options.reload&&setTimeout(function(){i.$element.navtab("refresh")},100)),t.dialogid&&setTimeout(function(){i.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){i.$element.bjuiajax("refreshDiv",t.divid,{reloadWithSearch:t.reloadWithSearch,delCount:t.delCount})},100),t.forward&&(e=function(){i.$element.navtab("reload",{url:t.forward})},t.forwardConfirm?i.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){e()},cancelCall:function(){t.closeCurrent&&i.$element.navtab("closeCurrentTab")}}):e())},c.prototype.dialogCallback=function(t){var e,i=this;!1!==t.tabid&&(""===d.trim(t.tabid)&&t.statusCode===BJUI.statusCode.ok?setTimeout(function(){t.reloadWithSearch?i.$element.navtab("reloadWithSearch",null,t):i.$element.navtab("refresh")},100):t.tabid&&setTimeout(function(){i.$element.navtab("reloadFlag",t.tabid)},100)),t.dialogid&&setTimeout(function(){i.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){i.$element.bjuiajax("refreshDiv",t.divid,{reloadWithSearch:t.reloadWithSearch,delCount:t.delCount})},100),t.closeCurrent&&!t.forward?i.$element.dialog("closeCurrent"):i.options.reload&&setTimeout(function(){i.$element.dialog("refresh")},100),i.options.reloadNavtab&&setTimeout(function(){i.$element.navtab("refresh")},100),t.forward&&(e=function(){i.$element.dialog("reload",{url:t.forward})},t.forwardConfirm?i.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){e()}}):e())},c.prototype.pageCallback=function(t,e){var i=this,a=d.extend({},c.DEFAULTS,t),t=e||null,e=null;t&&t.length?(e=i.tools.getPagerForm(t,a))&&(d.extend(a,d(e).data()),i.reloadDiv(t,{type:d(e).attr("method")||"POST",url:d(e).attr("action"),data:d(e).serializeArray(),loadingmask:a.loadingmask})):i.tools.getTarget()===c.NAVTAB?(t=d.CurrentNavtab,(e=i.tools.getPagerForm(t,a))&&d.extend(a,d(e).data()),i.$element.navtab("reloadForm",!1,a)):(t=d.CurrentDialog,(e=i.tools.getPagerForm(t,a))&&d.extend(a,d(e).data()),i.$element.dialog("reloadForm",!1,a))},c.prototype.doSearch=function(n){var o=this,s=o.$element,r={};n.loadPage||(r.pageCurrent=1);var l=s.closest(".bjui-layout"),t=n.isValid;if((n=d.extend({},c.DEFAULTS,"object"==typeof n&&n)).url||(n.url=s.attr("action")),n.url){if(n.url=decodeURI(n.url).replacePlh(s.closest(".unitBox")),!n.url.isFinishedTm())return s.alertmsg("error",n.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The submit form action is incorrect: "+n.url);n.url=encodeURI(n.url);var e=function(){if(l&&l.length){o.tools.getPagerForm(l,r);var t=s.serializeJson(),e={};if(n.clearQuery){var i,a=BJUI.pageInfo;for(i in a)a.hasOwnProperty(i)&&(e[a[i]]=t[a[i]]);t=e}o.reloadDiv(l,{type:s.attr("method")||"POST",url:n.url,data:t,loadingmask:n.loadingmask})}else o.tools.getTarget()===c.NAVTAB?(l=d.CurrentNavtab,o.tools.getPagerForm(l,r),s.navtab("reloadForm",n.clearQuery,n)):(l=d.CurrentDialog,o.tools.getPagerForm(l,r),s.dialog("reloadForm",n.clearQuery,n))};!t&&d.validator?s.isValid(function(t){t&&e()}):e()}else BJUI.debug("Error trying to submit form action: action url is undefined!")},c.prototype.doLoad=function(t){var e=this.$element,i=t.target?d(t.target):null;if((t=d.extend({},c.DEFAULTS,"object"==typeof t&&t)).url){if(t.url=decodeURI(t.url).replacePlh(e.closest(".unitBox")),!t.url.isFinishedTm())return e.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax link incorrect: "+t.url);t.url=encodeURI(t.url),i&&i.length?i&&i.length&&(i.removeData("bjui.clientPaging"),this.reloadDiv(i,t)):BJUI.debug("Not set loaded 'ajax' content container, like [data-target].")}else BJUI.debug("Error trying to open a ajax link: The url is undefined!")},c.prototype.refreshLayout=function(t){var e=t.target?d(t.target):null;if(t=d.extend({},c.DEFAULTS,c.CALLBACK_DEFAULTS,"object"==typeof t&&t),!e||!e.length)return s&&clearInterval(s),void BJUI.debug("Not set loaded 'ajax' content container, like [data-target].");e&&e.length&&(e.removeData("bjui.clientPaging"),this.reloadDiv(e,d.extend({},e.data("options")||{},t)))},c.prototype.reloadDiv=function(e,i){var a=i.autorefresh&&(isNaN(String(i.autorefresh))?15:i.autorefresh);if(i.reload)if(i.reloadWithSearch){i.data||(i.data=[]);var t=e.getPageSearchData(0).pageInfo.total;if(t&&i.delCount&&0<+i.delCount){var n={};if(Array.isArray(i.data))for(var o=0;o<i.data.length;o++)i.data[o].name&&(n[i.data[o].name]=i.data[o].value);else n=i.data;n.pageSize&&n.pageCurrent&&((t=Math.ceil((t-+i.delCount)/+n.pageSize))<=0&&(t=1),t<+n.pageCurrent&&(n.pageCurrent=t)),i.data=n}}else i.data=void 0;BJUI.ModuleFixed.destroyModules(e),e.addClass("bjui-layout").data("options",i).ajaxUrl({type:i.type,url:i.url,data:i.data,loadingmask:i.loadingmask,callback:function(t){BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e),i.callback&&i.callback.apply(this,[e]),s&&clearInterval(s),a&&(s=setInterval(function(){e.bjuiajax("refreshLayout",i)},1e3*a))}})},c.prototype.refreshDiv=function(t,e){if(t&&"string"==typeof t)for(var i=t.split(","),a=0;a<i.length;a++)this.refreshLayout(d.extend({target:"#"+i[a]},e||{}))},c.prototype.doAjax=function(t){var e=this,i=e.$element;if((t=d.extend({},c.DEFAULTS,"object"==typeof t&&t)).url){if(t.url=decodeURI(t.url).replacePlh(i.closest(".unitBox")),!t.url.isFinishedTm())return i.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+t.url);t.url=encodeURI(t.url),t.data&&(t.data="object"==typeof t.data?t.data:t.data.toObj());var a=t.callback&&t.callback.toFunc(),n=function(){i.doAjax({type:t.type,url:t.url,data:t.data,loadingmask:t.loadingmask,callback:a||d.proxy(function(t){e.ajaxCallback(t)},e)})};t.confirmMsg?i.alertmsg("confirm",t.confirmMsg,{okCall:function(){n()}}):n()}else BJUI.debug("Error trying to open a ajax link: url is undefined!")},c.prototype.doExport=function(t){var e,i=this,a=i.$element,n=t.target?d(t.target):null;if(t.url){if(t.url=decodeURI(t.url).replacePlh(a.closest(".unitBox")),!t.url.isFinishedTm())return a.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+t.url);var o=function(){n&&n.length||(n=i.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog),t.data?t.data="object"==typeof t.data?t.data:t.data.toObj():t.data={},(e=i.tools.getPagerForm(n))&&(t.data=d.extend(t.data,d(e).serializeJson())),d.fileDownload(t.url,{httpMethod:t.type,data:t.data,cookiePath:"/",failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),i.ajaxDone(t)}})};t.confirmMsg?a.alertmsg("confirm",t.confirmMsg,{okCall:function(){o()}}):o()}else BJUI.debug("Error trying to open a ajax link: url is undefined!")},c.prototype.doExportChecked=function(i){var a=this,t=a.$element,n=i.target?d(i.target):null;if(i.url){if(i.url=decodeURI(i.url).replacePlh(t.closest(".unitBox")),!i.url.isFinishedTm())return t.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+i.url);var e=function(){var t,e;i.group?(n&&n.length||(n=a.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog),t=[],0!==(e=n.find(":checkbox[name="+i.group+"]:checked")).length?(e.each(function(){t.push(d(this).val())}),i.data?i.data="object"==typeof i.data?i.data:i.data.toObj():i.data={},i.data[i.idname||"ids"]=t.join(","),d.fileDownload(i.url,{httpMethod:i.type,data:i.data,cookiePath:"/",failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),a.ajaxDone(t)}})):a.$element.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked))):a.$element.alertmsg("error",i.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))};i.confirmMsg?t.alertmsg("confirm",i.confirmMsg,{okCall:function(){e()}}):e()}else BJUI.debug("Error trying to open a export link: url is undefined!")},c.prototype.doAjaxChecked=function(a){var n=this,o=n.$element,s=a.target?d(a.target):null;if((a=d.extend({},c.DEFAULTS,"object"==typeof a&&a)).url){if(a.url=decodeURI(a.url).replacePlh(o.closest(".unitBox")),!a.url.isFinishedTm())return o.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+a.url);var t=function(){var t,e,i;a.group?(s&&s.length||(s=n.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog),t=[],e=s.find(":checkbox[name="+a.group+"]:checked"),i=a.callback&&a.callback.toFunc(),0!==e.length?(e.each(function(){t.push(d(this).val())}),a.data?a.data="object"==typeof a.data?a.data:a.data.toObj():a.data={},a.data[a.idname||"ids"]=t.join(","),o.doAjax({type:a.type,url:a.url,data:a.data,callback:i||d.proxy(function(t){n.ajaxCallback(t)},n)})):o.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked))):o.alertmsg("error",a.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))};a.confirmMsg?o.alertmsg("confirm",a.confirmMsg,{okCall:function(){t()}}):t()}else BJUI.debug("Error trying to open a del link: url is undefined!")};var t=d.fn.bjuiajax;d.fn.bjuiajax=n,d.fn.bjuiajax.Constructor=c,d.fn.bjuiajax.noConflict=function(){return d.fn.bjuiajax=t,this},d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxform"]',function(t){var e=d(this),i=e.data();n.call(e,"ajaxForm",i),t.preventDefault()}),d(function(){d.validator?d(document).on(BJUI.eventType.initUI,function(t){d(t.target).find('form[data-toggle="ajaxsearch"]').each(function(){var e=d(this),i=e.data()||{};e.data("ajaxSearchData",e.serializeJson()),i.isValid=!0,e.validator({theme:i.theme||"red_right_effect",valid:function(t){n.call(e,"doSearch",i)}})})}):d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxsearch"]',function(t){var e=d(this),i=e.data();n.call(e,"doSearch",i),t.preventDefault()})}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="reloadsearch"]',function(t){var e,i=d(this),a=i.closest("form");a&&a.length&&(e=a.data(),i=i.data("clearQuery"),e.clearQuery=void 0===i||!!i,n.call(a,"doSearch",e),t.preventDefault())}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="navtabrefresh"]',function(t){var e=d(this),i=e.closest(".bjui-layout");i.length||(i=d.CurrentNavtab);var a=i.find("#pagerForm");if(!a.length)return d.CurrentNavtab.navtab("refresh");i=a.data();i.clearQuery=e.data("clearQuery")||!1,i.loadPage=e.data("loadPage")||!0,n.call(a,"doSearch",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="ajaxload"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),n.call(e,"doLoad",i),t.preventDefault()}),d(document).on(BJUI.eventType.initUI,function(t){d(t.target).find('[data-toggle="autoajaxload"]').each(function(){var t=d(this),e=t.data();e.target=this,n.call(t,"doLoad",e)})}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="refreshlayout"]',function(t){var e=d(this),i=e.data();n.call(e,"refreshLayout",i)}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajax"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),n.call(e,"doAjax",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexport"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),n.call(e,"doExport",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexportchecked"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),n.call(e,"doExportChecked",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajaxchecked"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),n.call(e,"doAjaxChecked",i),t.preventDefault()})}(jQuery),function(p){"use strict";var f,g,m;function n(t,e){this.$element=p(t),this.options=e,this.tools=this.TOOLS(),this.clearTime=null}function o(e){var i=arguments,a=e;return this.each(function(){var t=p(this),t=p.extend({},n.DEFAULTS,t.data(),"object"==typeof e&&e),t=new n(this,t);"string"==typeof a&&p.isFunction(t[a])&&([].shift.apply(i),i?t[a].apply(t,i):t[a]())})}p(function(){f=p(FRAG.alertBoxFrag).hide().html(""),g=p(FRAG.alertBackground).hide().html(""),p("body").append("\x3c!-- alert msg box --\x3e").append(f).append("\x3c!-- alert msg box mask bg --\x3e").append(g)}),n.DEFAULTS={displayPosition:"topcenter",displayMode:"slide",autoClose:null,alertTimeout:3e3,mask:null,types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},fas:{error:"bjicon-cancel-circled",info:"bjicon-info-circled",warn:"bjicon-attention-circled",correct:"bjicon-ok-circled",confirm:"bjicon-help-circled"}},n.prototype.TOOLS=function(){var u=this,h=u.options;return{getTitle:function(t){return h.title||BJUI.regional.alertmsg.title[t]},keydownOk:function(t){return t.which!==BJUI.keyCode.ENTER||(t.data.target.trigger("click"),!1)},keydownEsc:function(t){t.which===BJUI.keyCode.ESC&&t.data.target.trigger("click")},openPosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,i=f.outerHeight(),a={},n={};switch((!t||h.displayPosition&&"topcenter"!==h.displayPosition)&&(t=h.displayPosition),(!e||h.displayMode&&"silde"!==h.displayMode)&&(e=h.displayMode),t){case"topleft":a={top:0-i,left:0,"margin-left":0},n={top:0};break;case"topcenter":a={top:0-i},n={top:0};break;case"topright":a={top:0-i,left:"auto",right:0,"margin-left":0},n={top:0};break;case"middleleft":a={top:"50%",left:-460,"margin-left":0,"margin-top":0-i/2},n={left:0};break;case"middlecenter":a={top:"0","margin-top":0-i/2},n={top:"50%"};break;case"middleright":a={top:"50%",left:"auto",right:-460,"margin-top":0-i/2},n={right:0};break;case"bottomleft":a={top:"auto",left:0,bottom:0-i,"margin-left":0},n={bottom:0};break;case"bottomcenter":a={top:"auto",bottom:0-i},n={bottom:0};break;case"bottomright":a={top:"auto",left:"auto",right:0,bottom:0-i,"margin-left":0},n={bottom:0}}"slide"===e?f.css(a).show().animate(n,500):"fade"===e?(a.opacity=.1,f.css(a).css(n).show().animate({opacity:1},500)):f.css(a).css(n).show()},closePosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,i=f.outerHeight(),a={};switch((!t||h.displayPosition&&"topcenter"!==h.displayPosition)&&(t=h.displayPosition),(!e||h.displayMode&&"silde"!==h.displayMode)&&(e=h.displayMode),t){case"topleft":case"topcenter":case"topright":a={top:0-i};break;case"middleleft":a={left:-460};break;case"middlecenter":a={top:0-i};break;case"middleright":a={right:-460};break;case"bottomleft":case"bottomcenter":case"bottomright":a={bottom:0-i}}"slide"===e?f.animate(a,500,function(){g.hide(),p(this).hide().empty()}):"fade"===e?f.animate({opacity:0},500,function(){g.hide(),p(this).hide().empty()}):(f.hide().remove(),g.hide())},open:function(t,e,i){var a,n=this,o="",s=BJUI.alertMsg.alertTimeout;if(i)for(var r=0;r<i.length;r++){var l=i[r].call?"callback":"",d=i[r].cls||"default",c=i[r].cls&&"green"===i[r].cls?"bjicon-ok":"bjicon-cancel";o+=FRAG.alertBtnFrag.replace("#btnMsg#",'<i class="'+c+'"></i> '+i[r].name).replace("#callback#",l).replace("#class#",d)}e=p(FRAG.alertBoxFrag.replace("#type#",t).replace("#fa#",h.fas[t]).replace("#title#",this.getTitle(t)).replace("#message#",e).replace("#btnFragment#",o)).hide().appendTo("body"),f&&f.length&&f.remove(),f=e,n.openPosition(),m&&(clearTimeout(m),m=null),null==h.mask&&h.types.info!==t&&h.types.correct!==t&&g.show(),null==h.autoClose&&(h.types.info!==t&&h.types.correct!==t||((!s||h.alertTimeout&&3e3!==h.alertTimeout)&&(s=h.alertTimeout),m=setTimeout(function(){n.close()},s))),(a=f.find(".btn")).each(function(e){p(this).on("click",p.proxy(function(){u.tools.close();var t=i[e].call;"string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call()},u)),i[e].keyCode===BJUI.keyCode.ENTER&&p(document).on("keydown.bjui.alertmsg.ok",{target:a.eq(e)},n.keydownOk),i[e].keyCode===BJUI.keyCode.ESC&&p(document).on("keydown.bjui.alertmsg.esc",{target:a.eq(e)},n.keydownEsc)})},alert:function(t,e,i){p.extend(h,"object"==typeof i&&i);i=p.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},h),i=[{name:i.okName,call:i.okCall,cls:"default",keyCode:BJUI.keyCode.ENTER}];this.open(t,e,i)},close:function(){p(document).off("keydown.bjui.alertmsg.ok").off("keydown.bjui.alertmsg.esc"),this.closePosition()}}},n.prototype.error=function(t,e){this.tools.alert(this.options.types.error,t,e)},n.prototype.info=function(t,e){this.tools.alert(this.options.types.info,t,e)},n.prototype.warn=function(t,e){this.tools.alert(this.options.types.warn,t,e)},n.prototype.ok=function(t,e){this.tools.alert(this.options.types.correct,t,e)},n.prototype.correct=function(t,e){this.tools.alert(this.options.types.correct,t,e)},n.prototype.confirm=function(t,e){p.extend(this.options,"object"==typeof e&&e);e=p.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options),e=[{name:e.okName,call:e.okCall,cls:"green",keyCode:BJUI.keyCode.ENTER},{name:e.cancelName,call:e.cancelCall,cls:"red",keyCode:BJUI.keyCode.ESC}];this.tools.open(this.options.types.confirm,t,e)};var t=p.fn.alertmsg;p.fn.alertmsg=o,p.fn.alertmsg.Constructor=n,p.fn.alertmsg.noConflict=function(){return p.fn.alertmsg=t,this},p(document).on("click.bjui.alertmsg.data-api",'[data-toggle="alertmsg"]',function(t){var e=p(this),i=e.data(),a=i.options;if(a&&("string"==typeof a&&(a=a.toObj()),"object"==typeof a&&p.extend(i,a)),!(a=i.type))return!1;o.call(e,a,i.msg||a,i),t.preventDefault()})}(jQuery),function(u){"use strict";function s(t,e){this.$element=u(t),this.options=e,this.tools=this.TOOLS()}function i(a){var n=arguments,o=a;return this.each(function(){var t=u(this),e=u.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.pagination");i||t.data("bjui.pagination",i=new s(this,e)),"string"==typeof o&&u.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.DEFAULTS={first:"li.j-first",prev:"li.j-prev",next:"li.j-next",last:"li.j-last",nums:"li.j-num > a",jump:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}},s.prototype.TOOLS=function(){var a=this.options;return{pageNums:function(){return Math.ceil(a.total/a.pageSize)},getInterval:function(){var t=Math.ceil(a.pageNum/2),e=this.pageNums(),i=e-a.pageNum;return{start:(this.getCurrentPage()>t?Math.max(Math.min(this.getCurrentPage()-t,i),0):0)+1,end:(this.getCurrentPage()>t?Math.min(this.getCurrentPage()+t,e):Math.min(a.pageNum,e))+1}},getCurrentPage:function(){var t=parseInt(a.pageCurrent);return isNaN(t)?1:t},hasPrev:function(){return 1<this.getCurrentPage()},hasNext:function(){return this.getCurrentPage()<this.pageNums()}}},s.prototype.init=function(){BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize});for(var a=this,n=this.options,t=this.tools,e=t.getInterval(),i="",o=FRAG.pagination,s=BJUI.regional.pagination,r=e.start;r<e.end;r++)i+=n.pageNumFrag.replaceAll("#pageNum#",r).replaceAll("#liClass#",r===t.getCurrentPage()?"selected j-num":"j-num");o=o.replaceAll("#pageNumFrag#",i).replaceAll("#pageCurrent#",t.getCurrentPage()).replaceAll("#first#",s.first).replaceAll("#last#",s.last).replaceAll("#prev#",s.prev).replaceAll("#next#",s.next).replaceAll("#jumpto#",s.jumpto).replaceAll("#jump#",s.jump),this.$element.html(o);var l=this.$element.find(n.first),d=this.$element.find(n.prev),s=this.$element.find(n.next),o=this.$element.find(n.last);function c(t,i){t.on("click",function(t){var e={pageCurrent:i,pageSize:a.options.pageSize,loadPageData:!0};a.setClientPaging(e),u(this).bjuiajax("pageCallback",e,a.$element.closest(".bjui-layout")),t.preventDefault()})}t.hasPrev()?(l.add(d).find("> span").hide(),c(d,t.getCurrentPage()-1),c(l,1)):l.add(d).addClass("disabled").find("> a").hide(),t.hasNext()?(s.add(o).find("> span").hide(),c(s,t.getCurrentPage()+1),c(o,t.pageNums())):s.add(o).addClass("disabled").find("> a").hide(),this.$element.find(n.nums).each(function(t){c(u(this),t+e.start)}),this.$element.find(n.jump).each(function(){var i=u(this).find(":text"),e=u(this).find(".goto");e.on("click",function(){var t=i.val(),e={pageCurrent:t,pageSize:n.pageSize,loadPageData:!0};t&&t.isPositiveInteger()&&(a.setClientPaging(e),u(this).bjuiajax("pageCallback",e,a.$element.closest(".bjui-layout")))}),i.keyup(function(t){t.keyCode===BJUI.keyCode.ENTER&&e.trigger("click")})})},s.prototype.changePagesize=function(){var t=this.$element.val(),e={pageSize:t,loadPageData:!0};isNaN(t)||(this.setClientPaging(e),this.$element.bjuiajax("pageCallback",e,this.$element.closest(".bjui-layout")))},s.prototype.orderBy=function(t){var e=this;e.$element.css({cursor:"pointer"}).click(function(){var t={orderField:u(this).data("orderField"),orderDirection:u(this).data("orderDirection"),loadPageData:!0};e.setClientPaging(t),u(this).bjuiajax("pageCallback",t,e.$element.closest(".bjui-layout"))})},s.prototype.destroy=function(){this.$element.removeData("bjui.pagination").empty()},s.prototype.getTarget=function(){var t=this.$element.closest(".bjui-layout").length?this.$element.closest(".bjui-layout"):this.$element.closest(".navtab-panel").length?u.CurrentNavtab:u.CurrentDialog;return t},s.prototype.getClientPaging=function(){return this.getTarget().data("bjui.clientPaging")},s.prototype.setClientPaging=function(t){var e;BJUI.ui.clientPaging&&(e=this.getTarget()).data("bjui.clientPaging",u.extend({},e.data("bjui.clientPaging")||{},t))},s.prototype.setClientOrder=function(t){var e;BJUI.ui.clientPaging&&((e=this.getClientPaging())&&e.orderField||this.setClientPaging(t))},s.prototype.setPagingAndOrderby=function(t){var e=t.data("bjui.clientPaging");t.find('[data-toggle="pagination"]').pagination("destroy").pagination(e),e.pageSize&&t.find('select[data-toggle-change="changepagesize"]').selectpicker("val",e.pageSize),e.orderField&&t.find('th[data-order-field="'+e.orderField+'"]').addClass(e.orderDirection).siblings().removeClass("asc desc")};var t=u.fn.pagination;u.fn.pagination=i,u.fn.pagination.Constructor=s,u.fn.pagination.noConflict=function(){return u.fn.pagination=t,this},u(document).on(BJUI.eventType.initUI,function(t){t=u(t.target).find('[data-toggle="pagination"]');t.length&&i.call(t)}),u(document).on("change.bjui.pagination.data-api",'select[data-toggle-change="changepagesize"]',function(t){var e=u(this);i.call(e,"changePagesize"),t.preventDefault()})}(jQuery),function($){"use strict";var MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){e+="";var i,a="",n=0,o="",s=t.getYear()+"",r=t.getMonth()+1,l=t.getDate(),d=t.getDay(),c=t.getHours(),u=t.getMinutes(),t=t.getSeconds(),h={};for(s.length<4&&(s=""+(+s+1900)),h.y=""+s,h.yyyy=s,h.yy=s.substring(2,4),h.M=r,h.MM=LZ(r),h.MMM=MONTH_NAMES[r-1],h.NNN=MONTH_NAMES[r+11],h.d=l,h.dd=LZ(l),h.E=DAY_NAMES[d+7],h.EE=DAY_NAMES[d],h.H=c,h.HH=LZ(c),h.h=0===c?12:12<c?c-12:c,h.hh=LZ(h.h),h.K=11<c?c-12:c,h.k=c+1,h.KK=LZ(h.K),h.kk=LZ(h.k),h.a=11<c?"PM":"AM",h.m=u,h.mm=LZ(u),h.s=t,h.ss=LZ(t);n<e.length;){for(i=e.charAt(n),o="";e.charAt(n)===i&&n<e.length;)o+=e.charAt(n++);null!=h[o]?a+=h[o]:a+=o}return a}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,i,a){for(var n=a;i<=n;n--){var o=t.substring(e,e+n);if(o.length<i)return null;if(_isInteger(o))return o}return null}function parseDate(t,e){var i;t+="",e+="";for(var a,n,o,s=0,r=0,l="",d=new Date(1900,0,1),c=d.getYear(),u=d.getMonth()+1,h=1,p=d.getHours(),f=d.getMinutes(),g=d.getSeconds(),m="";r<e.length;){for(a=e.charAt(r),l="";e.charAt(r)===a&&r<e.length;)l+=e.charAt(r++);if("yyyy"===l||"yy"===l||"y"===l){if("yyyy"===l&&(o=n=4),"yy"===l&&(o=n=2),"y"===l&&(n=2,o=4),null===(c=_getInt(t,s,n,o)))return 0;s+=c.length,2===c.length&&(c=70<c?+c+1900:+c+2e3)}else if("MMM"===l||"NNN"===l){for(i=u=0;i<MONTH_NAMES.length;i++){var b=MONTH_NAMES[i];if(t.substring(s,s+b.length).toLowerCase()===b.toLowerCase()&&("MMM"===l||"NNN"===l&&11<i)){12<(u=i+1)&&(u-=12),s+=b.length;break}}if(u<1||12<u)return 0}else if("EE"===l||"E"===l)for(i=0;i<DAY_NAMES.length;i++){var v=DAY_NAMES[i];if(t.substring(s,s+v.length).toLowerCase()===v.toLowerCase()){s+=v.length;break}}else if("MM"===l||"M"===l){if(null===(u=_getInt(t,s,l.length,2))||u<1||12<u)return 0;s+=u.length}else if("dd"===l||"d"===l){if(null===(h=_getInt(t,s,l.length,2))||h<1||31<h)return 0;s+=h.length}else if("hh"===l||"h"===l){if(null===(p=_getInt(t,s,l.length,2))||p<1||12<p)return 0;s+=p.length}else if("HH"===l||"H"===l){if(null===(p=_getInt(t,s,l.length,2))||p<0||23<p)return 0;s+=p.length}else if("KK"===l||"K"===l){if(null===(p=_getInt(t,s,l.length,2))||p<0||11<p)return 0;s+=p.length}else if("kk"===l||"k"===l){if(null===(p=_getInt(t,s,l.length,2))||p<1||24<p)return 0;s+=p.length,p--}else if("mm"===l||"m"===l){if(null===(f=_getInt(t,s,l.length,2))||f<0||59<f)return 0;s+=f.length}else if("ss"===l||"s"===l){if(null===(g=_getInt(t,s,l.length,2))||g<0||59<g)return 0;s+=g.length}else if("a"===l){if("am"===t.substring(s,s+2).toLowerCase())m="AM";else{if("pm"!==t.substring(s,s+2).toLowerCase())return 0;m="PM"}s+=2}else{if(t.substring(s,s+l.length)!==l)return 0;s+=l.length}}if(s!==t.length)return 0;if(2===u)if(c%4==0&&c%100!=0||c%400==0){if(29<h)return 0}else if(28<h)return 0;return(4===u||6===u||9===u||11===u)&&30<h?0:(p<12&&"PM"===m?p+=12:11<p&&"AM"===m&&(p-=12),new Date(c,u-1,h,p,f,g))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),i=this.getMonth()+1,a=this.getDate(),n=1900,o=0,s=1,a=replaceTmEval(t.replaceAll("%y",e).replaceAll("%M",i).replaceAll("%d",a)).split("-");return 0<a.length&&(n=a[0]),1<a.length&&(o=a[1]-1),2<a.length&&(s=a[2]),new Date(n,o,s).formatDate("yyyy-MM-dd")},Date.parseTime=function(t,e){e=e||"{y}-{m}-{d} {h}:{i}:{s}";var i={y:(t="object"==typeof(t=t||new Date)?t:(10===(""+t).length&&(t=1e3*parseInt(t)),new Date(t))).getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds(),a:t.getDay()};return e.replace(/{([ymdhis])+}/g,function(t,e){e=i[e];return 0<t.length&&e<10&&(e="0"+e),e||0})},Date.prototype.startTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.endTime=function(){return this.setHours(23),this.setMinutes(59),this.setSeconds(59),this.setMilliseconds(999),this},Date.today=function(t){return"start"===(t=t||"start")?(new Date).startTime():(new Date).endTime()}}(jQuery),function(g){"use strict";var m,b,l,d,c,u,v,y,x,k,j,C,w,h,T,e,p,f;function r(t,e){this.$element=g(t),this.options=e,this.tools=this.TOOLS(),this.$dateBtn=null,e=new Date,this.options.minDate=e.formatDateTm(this.options.minDate),this.options.maxDate=e.formatDateTm(this.options.maxDate),this.events={focus_time:"focus.bjui.datepicker.time",click_prev:"click.bjui.datepicker.prev",click_next:"click.bjui.datepicker.next",click_ok:"click.bjui.datepicker.ok",click_days:"click.bjui.datepicker.days",click_clear:"click.bjui.datepicker.clear",click_close:"click.bjui.datepicker.close",click_tm:"click.bjui.datepicker.tm",click_spinner:"click.bjui.datepicker.spinner",mousedown_sp:"mousedown.bjui.datepicker.spinner",mouseup_sp:"mouseup.bjui.datepicker.spinner",change_ym:"change.bjui.datepicker.ym",click_time:"click.bjui.datepicker.time",keydown_time:"keydown.bjui.datepicker.time",keyup_time:"keyup.bjui.datepicker.time"}}function i(a){var n=arguments,o=a;return this.each(function(){var t=g(this),e=g.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.datepicker");i||t.data("bjui.datepicker",i=new r(this,e)),"string"==typeof o&&g.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}g(function(){!function(){var t=BJUI.regional.datepicker,t=FRAG.calendarFrag.replace("#close#",t.close).replace("#prev#",t.prev).replace("#next#",t.next).replace("#clear#",t.clear).replace("#ok#",t.ok);m=g(t).hide(),g("body").append("\x3c!-- datepicker --\x3e").append(m),b=m.find("> .main"),l=m.find("a.prev"),d=m.find("a.next"),c=m.find("select[name=year]"),u=m.find("select[name=month]"),v=m.find(".time"),y=v.find(":text"),x=v.find("ul > li"),k=v.find(".hh"),j=v.find(".mm"),C=v.find(".ss"),w=b.find("> .tm"),h=m.find(".close"),T=b.find("> .body > .days"),e=b.find("> .body > .dayNames"),p=m.find(".clearBtn"),f=m.find(".okBtn");var i="",t=BJUI.regional.datepicker;g.each(t.dayNames,function(t,e){i+="<dt>"+e+"</dt>"}),e.html(i),g.each(t.monthNames,function(t,e){t+=1;u.append('<option value="'+t+'">'+e+"</option>")}),m.on("selectstart",function(){return!1})}()}),r.DEFAULTS={pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1,block:!1},r.EVENTS={afterChange:"afterchange.bjui.datepicker"},r.prototype.TOOLS=function(){var s=this,e={changeTmMenu:function(t){w.removeClass("hh").removeClass("mm").removeClass("ss"),t&&(w.addClass(t),y.removeClass("slt").filter("."+t).addClass("slt"))},clickTmMenu:function(e,t){w.find("> ul").hide().filter("."+t).show().find("> li").off(s.events.click_tm).on(s.events.click_tm,function(){var t=g(this),t=parseInt(t.text())<10?"0"+t.text():t.text();e.val(t)})},keydownInt:function(t){if(!(48<=t.keyCode&&t.keyCode<=57||t.keyCode===BJUI.keyCode.DELETE||t.keyCode===BJUI.keyCode.BACKSPACE))return!1},changeTm:function(t,e){var i=parseInt(t.val()),a=parseInt(t.data("start"))||0,n=parseInt(t.data("end")),o=parseInt(t.data("step")||1),s=e?e.data("add")?e.data("add"):-1:0,e=i;1===s?i<=n-o&&(e=i+o):-1===s?a+o<=i&&(e=i-o):n<i?e=n:i<a&&(e=a),e<10&&(e="0"+e),t.val(e)},closeCalendar:function(t){e.changeTmMenu(),t&&(g(document).off(s.events.click_close),m.hide())},get:function(t){return s.options[t]},getDays:function(t,e){return 2===e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},minMaxDate:function(t){var e=t.split("-").length-1,i="y-M-d";return 1==e?i="y-M":0==e&&(i="y"),t.parseDate(i)},getMinDate:function(){return this.minMaxDate(s.options.minDate)},getMaxDate:function(){var t=s.options.maxDate,e=t.split("-").length-1,i=this.minMaxDate(t);return e<2&&(t=this.getDays(i.getFullYear(),i.getMonth()+1),i.setDate(t),0==e&&i.setMonth(11)),i},getDateWrap:function(t){var e=(t=t||(this.parseDate(s.sDate)||new Date)).getFullYear(),i=t.getMonth()+1,a=this.getDays(e,i);return{year:e,month:i,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:a,date:t}},changeDate:function(t,e,i){i=new Date(t,e-1,i||1);return s.sDate=this.formatDate(i),i},changeDateTime:function(t,e,i,a,n,o){o=new Date(t,e-1,i,a,n,o);return s.sDate=this.formatDate(o),o},changeDay:function(t,e){e=e||0;var i=this.getDateWrap();return this.changeDate(i.year,i.month+parseInt(e),t)},changeMonth:function(t){var e=c.get(0).selectedIndex,i=c.find("option").length,t=+u.val()+t;0===t?0===e?t=1:(t=12,e--,c.get(0).selectedIndex=e):13===t&&(e===i-1?t=12:(t=1,e++,c.get(0).selectedIndex=e)),u.val(t).change()},parseDate:function(t){return t?t.parseDate(s.options.pattern):null},formatDate:function(t){return t.formatDate(s.options.pattern)},hasHour:function(){return-1!==s.options.pattern.indexOf("H")},hasMinute:function(){return-1!==s.options.pattern.indexOf("m")},hasSecond:function(){return-1!==s.options.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!==s.options.pattern.indexOf(t[e]))return!0;return!1},afterChange:function(t){s.$element.trigger(r.EVENTS.afterChange,{value:t,valueString:t instanceof Date?t.formatDate(s.options.pattern):""})}};return e},r.prototype.addBtn=function(){var t,e=this.$element;this.$dateBtn||this.options.addbtn||e.parent().hasClass("wrap_bjui_btn_box")||(this.$dateBtn=g(FRAG.dateBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),t=this.$element.parent(),e=this.$element.addClass("form-control").innerHeight(),t.css({position:"relative",display:this.options.block?"block":"inline-block"}),this.$dateBtn.css({height:e,lineHeight:e+"px"}).appendTo(t),this.$dateBtn.on("selectstart",function(){return!1}))},r.prototype.init=function(){this.$element.val()&&(this.sDate=this.$element.val().trim());var i=this,a=this.tools,e=a.getDateWrap(),n=a.getMinDate(),o=a.getMaxDate(),t=n.getFullYear(),s=o.getFullYear();c.empty();for(var r=t;r<=s;r++)c.append('<option value="'+r+'"'+(e.year===r?" selected":"")+">"+r+"</option>");u.val(e.month),c.add(u).off(this.events.change_ym).on(this.events.change_ym,function(){var t=a.hasTime()?(t=T.find(".slt"),a.changeDateTime(c.val(),u.val(),t.data("day"),e.hour,e.minute,e.second)):(t=T.find(".slt"),a.changeDate(c.val(),u.val(),t.data("day")));i.create(a.getDateWrap(t),n,o)}),l.off(this.events.click_prev).on(this.events.click_prev,function(){i.tools.changeMonth(-1)}),d.off(this.events.click_prev).on(this.events.click_prev,function(){i.tools.changeMonth(1)}),p.off(this.events.click_clear).on(this.events.click_clear,function(){i.$element.val(""),a.closeCalendar(!0)}),f.off(this.events.click_ok).on(this.events.click_ok,function(){var t=T.find("dd.slt");if(t.hasClass("disabled"))return!1;t=a.changeDay(t.data("day"),t.data("month"));a.hasTime()&&(t.setHours(parseInt(k.val())),t.setMinutes(parseInt(j.val())),t.setSeconds(parseInt(C.val()))),a.closeCalendar(!0),i.$element.val(a.formatDate(t)).focus(),a.afterChange(t)}),h.off(this.events.click_close).on(this.events.click_close,function(){a.closeCalendar(!0)}),g(document).on(this.events.click_close,function(t){var e=g(t.target);t.target!==i.$element.get(0)&&(e.closest("#calendar").length||("datepicker"===e.data("toggle")||"datepickerbtn"===e.parent().data("toggle")||"datepickerbtn"===e.data("toggle")?a.closeCalendar(!1):a.closeCalendar(!0)))}),this.create(e,n,o)},r.prototype.create=function(t,e,i){var a,n,o=this,s=this.options,r=this.tools,l=new Date(t.year,t.month-1,1),d=l.getDay(),c="";if(0<d){l.setMonth(l.getMonth()-1);for(var u=r.getDateWrap(l),h=u.days-d+1;h<=u.days;h++)c+='<dd class="other'+(n=e<=(a=new Date(t.year,t.month-2,h))&&a<=i?"":" disabled")+'" data-month="-1" data-day="'+h+'">'+h+"</dd>"}for(h=1;h<=t.days;h++)n=e<=(a=new Date(t.year,t.month-1,h))&&a<=i?"":"disabled",h===t.day&&(n+=" slt"),c+='<dd class="'+n+'" data-day="'+h+'">'+h+"</dd>";for(h=1;h<=42-d-t.days;h++)c+='<dd class="other'+(n=e<=(a=new Date(t.year,t.month,h))&&a<=i?"":" disabled")+'" data-month="1" data-day="'+h+'">'+h+"</dd>";var p,f=T.html(c).find("dd");f.not(".disabled").off(this.events.click_days).on(this.events.click_days,function(){var t=g(this);r.hasTime()?(f.removeClass("slt"),t.addClass("slt")):(t=r.changeDay(t.data("day"),t.data("month")),r.closeCalendar(!0),o.$element.val(r.formatDate(t)).focus(),r.afterChange(t))}),r.hasDate()?b.removeClass("nodate"):b.addClass("nodate"),r.hasTime()?(v.show(),k.val(t.hour<10?"0"+t.hour:t.hour).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("hh")}),l=parseInt(t.minute/s.mmStep)*s.mmStep,j.val(l<10?"0"+l:l).data("step",s.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("mm")}),C.val(r.hasSecond()?t.second<10?"0"+t.second:t.second:"00").data("step",s.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("ss")}),m.off("click").on("click",function(t){g(t.target).closest(".time").length||(w.find("> ul").hide(),r.changeTmMenu())}),y.off(this.events.keydown_time).on(this.events.keydown_time,r.keydownInt).each(function(){var t=g(this);t.off(o.events.keyup_time).on(o.events.keyup_time,function(){r.changeTm(t)})}).off(this.events.click_time).on(this.events.click_time,function(){r.clickTmMenu(g(this),g(this).data("type"))}),p=null,x.off(this.events.click_spinner).on(this.events.click_spinner,function(t){var e=g(this);y.filter(".slt").each(function(){r.changeTm(g(this),e)}),t.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(t){var e=g(this);p=setInterval(function(){y.filter(".slt").each(function(){r.changeTm(g(this),e)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(t){clearTimeout(p)}),r.hasHour()||k.attr("disabled",!0),r.hasMinute()||j.attr("disabled",!0),r.hasSecond()||C.attr("disabled",!0)):v.hide(),this.show()},r.prototype.show=function(){var t=this.$element.offset(),e=t.top+this.$element.get(0).offsetHeight,i=m.outerHeight(!0);i<e&&e>g(window).height()-i&&(e=t.top-i),m.css({left:t.left,top:e}).show().click(function(t){t.stopPropagation()})};var t=g.fn.datepicker;g.fn.datepicker=i,g.fn.datepicker.Constructor=r,g.fn.datepicker.noConflict=function(){return g.fn.datepicker=t,this},g(document).on(BJUI.eventType.initUI,function(t){t=g(t.target).find('[data-toggle="datepicker"]');t.length&&(t.data("nobtn")||i.call(t,"addBtn"))}),g(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepickerbtn"]',function(t){var e=g(this).prevAll('[data-toggle="datepicker"]');e&&e.is(":text")&&(i.call(e,e.data()),t.preventDefault())}),g(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepicker"]',function(t){var e=g(this);e.data("onlybtn")||e.is(":text")&&(i.call(e,e.data()),t.preventDefault())})}(jQuery),function(s){"use strict";function r(t,e){this.$element=s(t),this.options=e}function a(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.ajaxtab");i||t.data("bjui.ajaxtab",i=new r(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}r.DEFAULTS={url:void 0,target:void 0,reload:!1},r.prototype.init=function(){var t=this.options;if(t.url){if(t.url=decodeURI(t.url).replacePlh(this.$element.closest(".unitBox")),!t.url.isFinishedTm())return this.$element.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: "+t.url);t.url=encodeURI(t.url),t.target?!t.reload&&this.$element.data("bjui.ajaxtab.reload")?this.$element.tab("show"):this.load():BJUI.debug("Ajaxtab Plugin: Attribute 'target' is not defined!")}else BJUI.debug("Ajaxtab Plugin: Error trying to open a tab, url is undefined!")},r.prototype.load=function(){var t=this.$element,e=this.options;s(t).bjuiajax("doLoad",{target:s(e.target),url:e.url,data:{},callback:function(){t.data("bjui.ajaxtab.reload",!0).tab("show")}})};var t=s.fn.ajaxtab;s.fn.ajaxtab=a,s.fn.ajaxtab.Constructor=r,s.fn.ajaxtab.noConflict=function(){return s.fn.ajaxtab=t,this},s(document).on("click.bjui.ajaxtab.data-api",'[data-toggle="ajaxtab"]',function(t){var e=s(this),i=e.data();i.url||(i.url=e.attr("href")),a.call(e,i),t.preventDefault()})}(jQuery),function(p){"use strict";function f(t,e){this.$element=p(t),this.options=e,this.tools=this.TOOLS()}function e(a){var n=arguments,o=a;return this.each(function(){var t=p(this),e=p.extend({},f.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.tablefixed");i||t.data("bjui.tablefixed",i=new f(this,e)),"string"==typeof o&&p.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}f.SCROLLW=18,f.DEFAULTS={width:"100%"},f.prototype.TOOLS=function(){return{getLeft:function(t){var e=0;return t.prevAll().each(function(){e+=p(this).outerWidth()}),e},getRight:function(t){var e=0;return t.prevAll().addBack().each(function(){e+=p(this).outerWidth()}),e-1},getCellNum:function(t){return t.prevAll().addBack().length},getColspan:function(t){return t.attr("colspan")||1},getStart:function(t){var e=1;return t.prevAll().each(function(){e+=parseInt(p(this).attr("colspan")||1)}),e},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(t,e){if(!p.support.leadingWhitespace){var i=t.offset(),t=e.pageX||e.screenX,a=e.pageY||e.screenY;return{offsetX:t-i.left,offsetY:a-i.top}}a=e.target;void 0===a.offsetLeft&&(a=a.parentNode);i=this.getPageCoord(a),a=window.pageXOffset+e.clientX,e=window.pageYOffset+e.clientY;return{offsetX:a-i.x,offsetY:e-i.y}}}},f.prototype.resetWidth=function(){var i,t=this.$element,e=t.width(),a=t.find("table"),n=a&&a.width(),t=a.eq(0)&&a.eq(0).find("tr:first-child > th"),o=a.eq(1)&&a.eq(1).find("tr:first-child > td");a&&e-n<f.SCROLLW&&(i=parseInt((e-n)/t.length),a.width(e-f.SCROLLW),t.each(function(t){var e=parseInt(p(this).css("width"));p(this).width(e+i),o.eq(t)&&o.eq(t).width(e+i)}))},f.prototype.init=function(){var t,e;this.$element.isTag("table")&&(this.$container=this.$element.parent().addClass("bjui-resizeGrid"),this.$fixed=void 0,t=this.$container.width(),e=this.options.height,this.$container.hasClass("tab-pane")&&(t=this.$container.parent().width()-20),"string"==typeof this.options.width&&this.options.width.indexOf("%")?this.options.newWidth=t*(this.options.width.replace("%","")/100):this.options.newWidth=parseInt(this.options.width),this.options.tableClass=this.$element.attr("class")||"table table-bordered",this.options.styles=[],this.$element.wrap('<div class="bjui-tablefixed clearfix"></div>'),this.$fixed=this.$element.parent(),this.initHead(),this.initBody(),this.resizeCol(),this.resizeGrid(),e&&!this.$fixed.closest(".tab-content").length&&this.$fixed.height(e).addClass("fixedH"))},f.prototype.initHead=function(){var a=this.options.styles=[],t=this.$element.find("thead > tr"),d=t.eq(0).find("> th"),n=0,r=[],l=[],c=-1;d.each(function(t){for(var e=p(this),i=parseInt(e.attr("colspan")||1),a=e.attr("width"),n=e.attr("align"),o="",s=0;s<i;s++)1===i&&a&&(o=' width="'+a+'"'),n&&e.removeAttr("align").addClass(n),r.push("<th"+o+"></th>");e.attr("colsNum",c+=i),l[t]=i});var u,e=r.length,h=p('<tr class="resize-head">'+r.join("")+"</tr>");1<t.length&&(c=0,u=t.eq(1).find("> th"),p.each(l,function(t,e){if(1<(e=parseInt(e)))for(var i=parseInt(d.eq(t).attr("colsnum")),a=e-1;0<=a;a--){var n=u.eq(c++),o=i-a,s=n.attr("width"),r=n.attr("align"),l=h.find("> th").eq(o);n&&n.length&&n.attr("colsnum",o),s&&l.attr("width",s),r&&n.addClass(r).removeAttr("align")}})),this.$fixed.html(this.$element.html());t=this.$fixed.find("thead");t.prepend(h),h.find("> th").each(function(t){var e=[],i=p(this).innerWidth();e[0]=parseInt(i),n+=e[0],a[a.length]=e}),n=parseInt((this.options.newWidth-f.SCROLLW-n)/e);e=t.find("> tr:eq(0) > th");(this.options.$ths=e).each(function(t){var e=p(this),i=a[t],t=e.attr("width");e.removeAttr("align").width(i[0]+n),i[0]=i[0]+n,t&&(i[0]=parseInt(t),e.width(t).removeAttr("width"))}),t.find("> tr:gt(0) > th").each(function(){var t=p(this);t.html('<div class="fixedtableCol">'+t.html()+"</div>")}),t.wrap('<div class="fixedtableHeader" style="width:'+(this.options.newWidth-f.SCROLLW)+'px;overflow:hidden;"><div class="fixedtableThead"><table class="'+this.options.tableClass+'" style="width:'+(this.options.newWidth-f.SCROLLW)+"px; max-width:"+(this.options.newWidth-f.SCROLLW)+'px;"></table></div></div>'),this.$fixed.append('<div class="resizeMarker" style="display:none; height:300px; left:57px;"></div><div class="resizeProxy" style="left:377px; display:none; height:300px;"></div>')},f.prototype.initBody=function(){var t,i=this,e=this.$fixed.find("> tbody");this.options.height?t=this.options.height-this.$fixed.find(".fixedtableHeader").height()+"px":(t="100%",p(document).one(BJUI.eventType.afterInitUI,function(t){var e;e=i.$fixed.parent().height(),i.$fixed.parent().css("overflow","hidden"),i.$fixed.height(e).find(".fixedtableScroller").height(e-i.$fixed.find(".fixedtableHeader").height())})),t='style="height:'+t+'; overflow-y:auto;"',e.wrap('<div class="fixedtableScroller"'+t+' style="width:'+this.options.newWidth+'px;"><div class="fixedtableTbody"><table style="width:'+(this.options.newWidth-f.SCROLLW)+"px; max-width:"+(this.options.newWidth-f.SCROLLW)+'px;"></table></div></div>'),this.$element.attr("class")?e.parent().addClass(this.$element.attr("class")):e.parent().addClass("table table-striped table-bordered table-hover"),void 0!==this.$element.attr("data-selected-multi")&&e.parent().attr("data-selected-multi",this.$element.attr("data-selected-multi")),e.before('<thead><tr class="resize-head">'+this.$fixed.find("thead > tr").html()+"</tr></thead>"),this.options.$tds=e.prev().find("> tr:first-child > th"),this.options.nowrap&&e.parent().addClass("nowrap"),e.closest(".fixedtableScroller").scroll(function(t){var e=p(this),i=e.scrollLeft();return e.prev().find("> .fixedtableThead").css({position:"relative",left:-i}),!1})},f.prototype.resizeCol=function(){var o=this,s=this.$fixed,a=this.options.$ths,r=this.options.$tds,l=this.tools;s.find("thead > tr:gt(0) > th").each(function(t){var i=p(this);i.mouseover(function(t){var e=parseInt(s.find(".fixedtableThead").css("left"))||0,t=l.getOffset(i,t).offsetX,n=a.eq(i.attr("colsnum"));return i.outerWidth()-t<5?i.css("cursor","col-resize").off("mousedown.bjui.tablefixed.resize").on("mousedown.bjui.tablefixed.resize",function(t){s.find("> .resizeProxy").show().css({left:l.getRight(n)+e+s.position().left,top:s.position().top,height:s.height(),cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:s.find(".resizeMarker"),move:"horizontal",event:t,stop:function(){var t=s.find(".resizeProxy").position().left-s.find(".resizeMarker").position().left-n.outerWidth()-9,e=l.getCellNum(n),i=n.width()+t,a=r.eq(e-1),e=s.find("> .fixedtableHeader .table").width();n.width(i),a.width(i),s.find(".table").width(e+t),s.find(".resizeMarker, .resizeProxy").hide(),e+t+f.SCROLLW<o.options.newWidth?s.find(".fixedtableScroller").width(e+t+f.SCROLLW):(i=s.closest(".bjui-resizeGrid").innerWidth(),e+t+f.SCROLLW<i&&(i=e+t+f.SCROLLW),s.find(".fixedtableHeader").width(i-f.SCROLLW),s.find(".fixedtableScroller").width(i),s.width(i)),s.data("resizeGrid",!0)}}),s.find("> .resizeMarker").show().css({left:l.getLeft(n)+e+s.position().left,top:s.position().top,height:s.height()})}):i.css("cursor","default").off("mousedown.bjui.tablefixed.resize"),!1})})},f.prototype.setOrderBy=function(t){var e=this.$element,i=e.find(".fixedtableCol"),a=p(FRAG.orderby.replace("#asc#",BJUI.regional.orderby.asc).replace("#desc#",BJUI.regional.orderby.desc));t=t||this.options,e.addClass("orderby"),t.orderDirection&&(BJUI.ui.clientPaging||e.addClass(t.orderDirection),e.pagination("setClientOrder",{orderField:t.orderField,orderDirection:t.orderDirection})),i.length||(i=p('<div class="fixedtableCol">'+e.html()+"</div>").appendTo(e.empty())),a.data("orderField",t.orderField).appendTo(i).pagination("orderBy")},f.prototype.resizeGrid=function(){p(window).on(BJUI.eventType.resizeGrid,function(){p("div.bjui-resizeGrid").each(function(){var i,t=p(this),e=t.closest(".navtabPage"),a=t.width(),n=t.height(),o=t.find(".bjui-tablefixed"),s=o.find(".fixedtableThead").height();t.length&&t.is(":hidden")&&(t.hasClass("tab-pane")||(e.show(),a=t.innerWidth(),n=t.height(),s=o.find(".fixedtableHeader").height(),e.hide())),a&&t.find(".bjui-tablefixed").each(function(){var t=p(this);i=a,t.width(i);var e=i-f.SCROLLW;t.find(".table").css({width:e,maxWidth:e}),t.find(".fixedtableHeader").width(e),t.find(".fixedtableScroller").width(i)}),t.css("overflow","hidden"),o.height(n).find(".fixedtableScroller").height(n-s)})})};var t=p.fn.tablefixed;p.fn.tablefixed=e,p.fn.tablefixed.Constructor=f,p.fn.tablefixed.noConflict=function(){return p.fn.tablefixed=t,this},p(document).on(BJUI.eventType.initUI,function(t){t=p(t.target).find('table[data-toggle="tablefixed"]');t.length&&e.call(t)}),p(document).on(BJUI.eventType.afterInitUI,function(t){t=p(t.target).find("th[data-order-field]");t.length&&e.call(t,"setOrderBy")}),p(document).on("click.bjui.tr.data-api","tr[data-id]",function(t){var e=p(this),i=e.closest("table"),a=i.data("selectedMulti"),n=e.attr("data-id"),o="selected",s=i.closest(".unitBox").find("#bjui-selected");e.toggleClass(o),a?(n=[],e.siblings("."+o).add(e.hasClass(o)?e:"").each(function(){n.push(p(this).attr("data-id"))}),n=n.join(",")):(e.siblings().removeClass(o),e.hasClass(o)||(n="")),s&&s.length?s.val(n):(s=p('<input type="hidden" id="bjui-selected" value="'+n+'">')).appendTo(i.closest(".unitBox"))})}(jQuery),function(c){"use strict";function s(t,e){this.$element=c(t),this.options=e,this.tools=this.TOOLS(),this.$tbody=this.$element.find("> tbody"),this.$tbody.length||(this.$tbody=c("<tbody></tbody>"),this.$element.append(this.$tbody)),this.$numAdd=this.$btnAdd=null}function n(a){var n=arguments,o=a;return this.each(function(){var t=c(this),e=c.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.tabledit");i||t.data("bjui.tabledit",i=new s(this,e)),"string"==typeof o&&c.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.DEFAULTS={singleNoindex:!0},s.EVENTS={afterDelete:"afterdelete.bjui.tabledit"},s.prototype.TOOLS=function(){var l=this;return{initSuffix:function(t){t.find("> tr").each(function(d){c(this).find(":input, :file, a, label, div").each(function(){var t=c(this),e=t.attr("name"),i=t.val(),a=t.attr("for"),n=t.attr("id"),o=t.attr("href"),s=t.attr("data-group"),r=t.attr("data-suffix"),l=t.attr("data-arrayfix");e&&t.attr("name",e.replaceSuffix(d)),a&&t.attr("for",a.replaceSuffix(d)),n&&t.attr("id",n.replaceSuffix(d).replaceSuffix2(d)),o&&t.attr("href",o.replaceSuffix(d)),s&&t.attr("data-group",s.replaceSuffix(d)),r&&t.attr("data-suffix",r.replaceSuffix(d)),l&&t.attr("data-arrayfix",l.replaceSuffix(d)),i&&0<=i.indexOf("#index#")&&t.val(i.replace("#index#",d+1)),t.hasClass("no")&&(i=t.data("prefix")?t.data("prefix"):"",t.val(i+(d+1)))})})},initEnter:function(t){var a=t.find(":text");a.each(function(i){c(this).bind("keydown",function(t){var e;t.which===BJUI.keyCode.ENTER&&(e=i+1,a.eq(e)&&a.eq(e).focus(),t.preventDefault())})}),this.initInput(t)},initInput:function(t){t.find("> tr > td").each(function(){var e=c(this).find(".input-hold");e.length||(e=c('<span class="input-hold" style="display:block; padding:0 4px; height:0; font-size:12px; visibility: hidden;"></span>'),c(this).append(e)),c.support.leadingWhitespace?c(this).on("input",":text",function(t){e.text(c(this).val())}):c(this).on("propertychange",":text",function(t){e.text(c(this).val())})})},initTbody:function(){var s=l.$element,i=l.$tbody;function a(t){t.removeClass("readonly").find("> td *").each(function(){var t=c(this),e=t.closest("td"),i=e.data("val"),a=t.attr("data-toggle-old"),n=e.data("readonly");if(void 0===i&&e.html(),e.data("notread"))return!0;if(t.isTag("select")&&(e.find(".tabledit-select-text").first().hide(),t.val(e.attr("data-val")),t.removeClass("readonly disabled").selectpicker("show")),t.is(":checkbox")&&(t.closest(".icheckbox_minimal-purple").removeClass("disabled"),t.closest(".icheckbox_minimal-purple").find("ins").removeClass("readonly")),t.is(":radio")&&(t.closest(".iradio_minimal-purple").removeClass("disabled"),t.closest(".iradio_minimal-purple").find("ins").removeClass("readonly")),a){if("dosave"===a)return!0;t.removeAttr("data-toggle-old").attr("data-toggle",a),"spinner"===a&&t.spinner("destroy").spinner(),"kindeditor"===a&&e.initui()}(t.is(":text")||t.is("textarea"))&&(t.off("keydown.readonly"),n&&t.prop("readonly",!0))}),t.find(".bjui-lookup, .bjui-spinner, .bjui-upload").show(),t.find('[data-toggle="doedit"]').attr("data-toggle","dosave").text("完成")}function r(t){t.addClass("readonly").find("> td *").each(function(){var t,e,i=c(this),a=i.closest("td"),n=i.attr("data-toggle");if(a.data("notread"))return!0;if(i.isTag("select")&&(i.addClass("readonly disabled").selectpicker("hide"),t=i.children("option").filter(":selected").text(),(e=a.find(".tabledit-select-text").first()).length?e.text(t).show():a.append('<span style="padding: 0 2px" class="tabledit-select-text">'+t+"</span>")),i.is(":checkbox")&&(i.closest(".icheckbox_minimal-purple").addClass("disabled"),i.closest(".icheckbox_minimal-purple").find("ins").addClass("readonly")),i.is(":radio")&&(i.closest(".iradio_minimal-purple").addClass("disabled"),i.closest(".iradio_minimal-purple").find("ins").addClass("readonly")),n){if("doedit"===n||"dosave"===n)return!0;i.removeAttr("data-toggle").attr("data-toggle-old",n),"kindeditor"===n&&KindEditor.remove(i)}(i.is(":text")||i.is("textarea"))&&i.on("keydown.readonly",function(t){t.preventDefault()})}),t.find(".bjui-lookup, .bjui-spinner, .bjui-upload").hide(),t.find('[data-toggle="dosave"]').attr("data-toggle","doedit").text("编辑")}i.find("> tr").each(function(){var e=c(this),o=e.find("> td"),t=s.data("bjui.tabledit.tr").clone().find("> th");e.data("bjui.tabledit.oldTds",e.html()),t.each(function(t){var e=o.eq(t),i=e.data("val"),a=c(this),n=a.children(),t=a.find(".pic-box");void 0===i&&(i=e.html()),e.data("noedit")||n.length&&(n.is("input:checkbox")||n.is("input:radio")?n.filter('[value="'+i+'"]').attr("checked","checked"):n.isTag("select")?n.find('option[value="'+e.data("val")+'"]').attr("selected","selected"):t.length?(e.data("val")&&a.find(".pic-name").val(e.data("val")),t.html(e.html())):n.hasClass("wrap_bjui_btn_box")?n.find("input[data-toggle]").attr("value",i+""):n.is("textarea")?(n.html(i),"kindeditor"===n.attr("data-toggle")&&n.attr("data-toggle-old","kindeditor").removeAttr("data-toggle")):n.attr("value",i+""),e.html(a.html()))}),e.on("dblclick",c.proxy(function(t){a(e)},l)).initui(),l.tools.initSuffix(i),r(e)}),i.on("click.bjui.tabledit.readonly",'[data-toggle="doedit"]',function(t){a(c(this).closest("tr"))}).on("click.bjui.tabledit.readonly",'[data-toggle="dosave"]',function(t){var e,i,a=c(this).closest("tr"),n=a.index(),o=l.options.callback;l.options.action?(a.wrap('<form action="" method="POST"></form>'),a.attr("data-id")&&(e=s.find("> thead > tr:eq(0)").data("idname")||"id",a.before('<input type="hidden" name="'+e.replaceSuffix(n)+'" value="'+a.attr("data-id")+'">')),i=a.parent().serializeArray(),l.options.singleNoindex&&c.each(i,function(t,e){c.extend(e,{name:e.name.replaceSuffix(0)})}),a.prev("input").remove(),a.unwrap().isValid(function(t){t&&(o=o?o.toFunc():function(t){t[BJUI.keys.statusCode]===BJUI.statusCode.ok?r(a):a.bjuiajax("ajaxDone",t)},a.bjuiajax("doAjax",{url:l.options.action,data:i,type:l.options.type||"POST",callback:o}))})):r(a)}),l.tools.initEnter(i)},doAdd:function(){var i=l.$element;l.$numAdd&&l.$btnAdd&&i.on("keydown.bjui.tabledit.add","thead .num-add",function(t){t.which===BJUI.keyCode.ENTER&&(l.$btnAdd.trigger("click.bjui.tabledit.add"),t.preventDefault())}).on("click.bjui.tabledit.add","thead .row-add",function(t){var e=1;isNaN(l.$numAdd.val())||(e=parseInt(l.$numAdd.val())),l.add(i,e),t.preventDefault()})},doDel:function(t){var i=this,e="click.bjui.tabledit.del";t.off(e).on(e,".row-del",function(t){var e=c(this);e.data("confirmMsg")?e.alertmsg("confirm",e.data("confirmMsg"),{okCall:function(){i.delData(e)}}):i.delData(e),t.preventDefault()})},delData:function(e){function t(t){e.closest("tr").remove(),i.initSuffix(a),i.afterDelete(a),n.callback&&n.callback.toFunc().apply(l,[t])}var i=this,a=e.closest("tbody"),n=e.data();e.is("[href^=javascript:]")||e.is('[href^="#"]')?t():e.bjuiajax("doAjax",{url:e.attr("href"),data:n.data,callback:t})},afterDelete:function(t){t=c.Event(s.EVENTS.afterDelete,{relatedTarget:t[0]});l.$element.trigger(t)}}},s.prototype.init=function(){var a=this,t=this.tools,e=this.$element.addClass("bjui-tabledit"),i=e.find("> thead > tr:first"),n=this.$tbody,o=e.find("> thead > tr:first").html();i.find("> th").each(function(){var t=c(this),e=t.attr("title"),i=t.data("addtool");e&&t.html(e),i&&(i=c('<span style="position:relative;"></span>'),t.empty(),a.$numAdd=c('<input type="text" value="1" class="form-control num-add" size="2" title="待添加的行数">'),a.$btnAdd=c('<a href="javascript:;" class="row-add" title="添加行"><i class="bjicon-plus-squared"></i></a>'),i.append(a.$numAdd).append(a.$btnAdd).appendTo(t))}),e.data("bjui.tabledit.tr",c("<tr>"+o+"</tr>")),t.initTbody(),t.doAdd(),t.doDel(n)},s.prototype.add=function(t,e){for(var i,a=this.tools,n=t.find("> tbody"),o=t.data("bjui.tabledit.tr"),s=0;s<e;s++){o.find("> th").each(function(){c(this).replaceWith("<td>"+c(this).html()+"</td>")});var r=o.clone();0===s&&(i=r),r.hide().appendTo(n),a.initSuffix(n),a.initEnter(n),r.show().css("display","").initui()}i&&i.length&&i.find(":text").each(function(){var t=c(this);if(!t.prop("readonly"))return t.focus(),!1})};var t=c.fn.tabledit;c.fn.tabledit=n,c.fn.tabledit.Constructor=s,c.fn.tabledit.noConflict=function(){return c.fn.tabledit=t,this},c(document).on(BJUI.eventType.initUI,function(t){t=c(t.target).find('table[data-toggle="tabledit"]');t.length&&n.call(t)}),c(document).on(BJUI.eventType.afterInitUI,function(t){c(t.target).find('table[data-toggle="tabledit"]').each(function(){var t;!c(this).is("[data-initnum]")||0<(t=c(this).data("initnum"))&&n.call(c(this),"add",c(this),t)})}),c(document).on("click.bjui.tabledit.data-api",'[data-toggle="tableditadd"]',function(t){var e=c(this),i=e.data("num")||1,a=e.data("target");a&&c(a).length&&c(a).isTag("table")&&(n.call(e,"add",c(a),i),t.preventDefault())})}(jQuery),function(s){"use strict";function r(t,e){this.$element=s(t),this.options=e,this.tools=this.TOOLS(),this.$spinner=null,this.height=this.$element.addClass("form-control").innerHeight(),this.ivalue=Number(this.$element.val())||0}function e(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.spinner");i||t.data("bjui.spinner",i=new r(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}r.DEFAULTS={min:0,max:100,step:1,decimalPlace:0},r.EVENTS={afterChange:"afterchange.bjui.spinner"},r.prototype.TOOLS=function(){var s=this;return{changeVal:function(t){var e=s.$element,i=Number(e.val())||Number(s.ivalue),a=t.data("add")||-1,n=s.options.min,o=s.options.max,t=s.options.step;1===a?i<=o-t&&(i+=t):-1===a?n+t<=i&&(i-=t):o<i?i=o:i<n&&(i=n),s.options.decimalPlace&&(i=i.toFixed(s.options.decimalPlace)),s.ivalue=i,e.val(i).trigger(r.EVENTS.afterChange,{value:i})}}},r.prototype.init=function(){isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?BJUI.debug("Spinner Plugin: Parameter is non-numeric type!"):this.addBtn()},r.prototype.addBtn=function(){var e,i=this,t=i.$element;this.$lookBtn||t.parent().hasClass("wrap_bjui_btn_box")||(this.$spinner=s(FRAG.spinnerBtn),t.css({paddingRight:"13px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),(t=t.parent()).css("position","relative"),this.$spinner.css({height:this.height}).appendTo(t),this.$spinner.on("selectstart",function(){return!1}),e=null,i.$spinner.find("li").on("click",function(t){i.tools.changeVal(s(this))}).on("mousedown",function(){var t=s(this);e=setInterval(function(){i.tools.changeVal(t)},150)}).on("mouseup",function(){clearTimeout(e)}))},r.prototype.destroy=function(){this.$element.parent().hasClass("wrap_bjui_btn_box")&&(this.$element.parent().find(".bjui-spinner").remove(),this.$element.unwrap())};var t=s.fn.spinner;s.fn.spinner=e,s.fn.spinner.Constructor=r,s.fn.spinner.noConflict=function(){return s.fn.spinner=t,this},s(document).on(BJUI.eventType.initUI,function(t){t=s(t.target).find('input[data-toggle="spinner"]');t.length&&e.call(t)})}(jQuery),function(r){"use strict";function l(t,e){this.$element=r(t),this.options=e,this.$lookBtn=null}var e,i,d,a,n,c,u;function o(a){var n=arguments,o=a;return this.each(function(){var t=r(this),e=r.extend({},l.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.lookup");i?t.data("newurl")&&(i.options.url=t.data("newurl"),t.data("bjui.dialog",null)):(t.data("newurl")&&(e.url=t.data("newurl")),t.data("bjui.lookup",i=new l(this,e))),"string"==typeof o&&r.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):("object"==typeof o&&o.url&&(i.options.url=o.url),i.init())})}l.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:"Lookup",maxable:!0,resizable:!0,arrayfix:null,suffix:null,inputFilter:null,autoAssign:!0,open:!0,addBtn:!1,block:!1,beforeSelect:null},l.EVENTS={afterChange:"afterchange.bjui.lookup"},l.prototype.init=function(){var t=this.options;return t.url?(t.url=decodeURI(t.url).replacePlh(this.$element.closest(".unitBox")),t.url.isFinishedTm()?(t.url=encodeURI(t.url),e=this.options.group||null,i=this.options.suffix||null,a=this.options.arrayfix||null,c=this.options.inputFilter||null,u=this.options.autoAssign,d=this.$element,i=i&&i.trim(),t.beforeSelect&&"string"==typeof t.beforeSelect&&(this.options.beforeSelect=t.beforeSelect.toFunc()),n=this.options.beforeSelect,void(d.data("bjui.lookupinit")?(d.data("bjui.lookupinit",!0),this.open(this.$element)):(t.addBtn&&this.addBtn(),t.open&&this.open(this.$element),d.data("bjui.lookupinit",!0)))):(this.$element.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),BJUI.debug("Lookup Plugin: The lookup's url is incorrect, url:"+t.url),!1)):(BJUI.debug("Lookup Plugin: Error trying open a lookup dialog, url is undefined!"),!1)},l.prototype.addBtn=function(){var t,i=this,e=i.$element;this.$lookBtn||e.parent().hasClass("wrap_bjui_btn_box")||(this.$lookBtn=r(FRAG.lookupBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),t=this.$element.parent(),e=this.$element.addClass("form-control").innerHeight(),t.css({position:"relative",display:this.options.block?"block":"inline-block"}),r.each(i.options,function(t,e){"toggle"!==t&&i.$lookBtn.data(t,e)}),i.$lookBtn.data("bjui.lookupinit",!0),this.$lookBtn.css({height:e,lineHeight:e+"px"}).appendTo(t),this.$lookBtn.on("selectstart",function(){return!1}))},l.prototype.open=function(t){var e=this.options;t.dialog({id:e.id||"lookup_dialog",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask,maxable:e.maxable,resizable:e.resizable})},l.prototype.getField=function(t){return a&&(t=a+"["+t+"]"),(e?e+".":"")+t+(i||"")},l.prototype.setValCustom=function(t,e,i){i=i?1:0;this.beforeSelect(t,e,i)&&this.setVal(t,i)},l.prototype.setSingle=function(t,e){"string"==typeof t&&(t=new Function("return "+t)()),this.beforeSelect(t,[t],e)&&this.setVal(t,e)},l.prototype.setMult=function(t,e){var a={},n=[];this.$element.closest(".unitBox").find('[name="'+t+'"]').filter(":checked").each(function(){var t,e,i=new Function("return "+r(this).val())();for(t in"object"==typeof i&&n.push(i),i)i.hasOwnProperty(t)&&(e=a[t]?a[t]+",":"",a[t]=e+i[t])}),r.isEmptyObject(a)?this.$element.alertmsg("error",this.$element.data("warn")||FRAG.alertSelectMsg):this.beforeSelect(a,n,e)&&this.setVal(a,e)},l.prototype.beforeSelect=function(t,e,i){return!n||!1!==n(t,e,i)},l.prototype.setVal=function(a,n){var o,s=this,t=d.closest(".unitBox");u&&(d.data("customEvent")?d.trigger("customEvent.bjui.lookup",[a]):t.find((c?"[data-filter="+c+"]":"")+":input").each(function(){var t,e=r(this),i=e.attr("name");for(t in a)if(a.hasOwnProperty(t))if(s.getField(t)===i){o=1===parseInt(n)&&e.val()?e.val()+","+a[t]:a[t],e.val(o).trigger(l.EVENTS.afterChange,{value:a[t]});break}})),this.$element.dialog("closeCurrent")};var t=r.fn.lookup;r.fn.lookup=o,r.fn.lookup.Constructor=l,r.fn.lookup.noConflict=function(){return r.fn.lookup=t,this},r(document).on(BJUI.eventType.initUI,function(t){t=r(t.target).find('[data-toggle="lookup"]');t.length&&o.call(t,"addBtn")}),r(document).on("click.bjui.lookup.data-api",'[data-toggle="lookupbtn"]',function(t){var e=r(this);e.attr("href")&&!e.data("url")&&e.attr("data-url",e.attr("href")),e.data("title")||e.attr("data-title",e.text()),o.call(e),t.preventDefault()}),r(document).on("click.bjui.lookupback.data-api",'[data-toggle="lookupback"]',function(t){var e=r(this),i=e.data("args"),a=e.data("lookupid"),n=r('input[name="lookupType"]:checked').val();i?o.call(e,"setSingle",i,n):a&&o.call(e,"setMult",a,n),t.preventDefault()})}(jQuery),function(d){"use strict";function r(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()}function e(a){var n=arguments,o=a;if(window.FileReader)return this.each(function(){var t=d(this),e=d.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.upload");i||t.data("bjui.upload",i=new r(this,e)),"string"==typeof o&&d.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()});this.each(function(){if(d.fn.uploadify){var t={swf:BJUI.PLUGINPATH+"uploadify/scripts/uploadify.swf",fileTypeExts:"*.jpg;*.png",id:"fileInput",fileObjName:"file",fileSizeLimit:204800,buttonText:"选择上传文件",auto:!1,multi:!1,height:24},e=d(this),i=e.data();if(e.addClass("bjui-upload"),i.id||(i.id=e.attr("id")),d.extend(t,i),t.uploader){if(t.uploader=decodeURI(t.uploader).replacePlh(e.closest(".unitBox")),!t.uploader.isFinishedTm())return e.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+t.uploader);t.uploader=encodeURI(t.uploader),"fileInput"===t.id&&(t.id=t.id+(new Date).getTime());var a,n=d('<input type="file" name="'+t.name+'" id="'+t.id+'">');t.onInit&&"string"==typeof t.onInit&&(t.onInit=t.onInit.toFunc()),t.onCancel&&"string"==typeof t.onCancel&&(t.onCancel=t.onCancel.toFunc()),t.onSelect&&"string"==typeof t.onSelect&&(t.onSelect=t.onSelect.toFunc()),t.onUploadSuccess&&"string"==typeof t.onUploadSuccess&&(t.onUploadSuccess=t.onUploadSuccess.toFunc()),t.onUploadComplete&&"string"==typeof t.onUploadComplete&&(t.onUploadComplete=t.onUploadComplete.toFunc()),t.onUploadError&&"string"==typeof t.onUploadError&&(t.onUploadError=t.onUploadError.toFunc()),t.onUploadBefore&&"string"==typeof t.onUploadBefore&&(t.onUploadBefore=t.onUploadBefore.toFunc()),n.appendTo(e),t.auto||((a=d('<button class="btn btn-orange" data-icon="cloud-upload">开始上传</button>')).hide().insertAfter(e).click(function(){n.uploadify("upload","*"),d(this).hide()}),t.onSelect=function(){a.show()}),n.uploadify(t)}else BJUI.debug("Upload Plugin: The options uploader is undefined!")}})}r.DEFAULTS={fileTypeExts:"*.jpg;*.png",uploader:"",class:"btn btn-default",hideFileList:!1,auto:!1,method:"POST",multi:!1,formData:{},fileObjName:"file",fileSizeLimit:204800,previewImg:!0,previewLoadimg:null,dragDrop:!1,showUploadedPercent:!0,showUploadedSize:!0,buttonText:"选择上传文件",removeTimeout:1e3,itemTemplate:FRAG.uploadTemp,breakPoints:!1,fileSplitSize:1048576,onUploadBefore:null,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null},r.MIMETYPES={zip:["application/x-zip-compressed"],jpg:["image/jpeg"],png:["image/png"],gif:["image/gif"],swf:["application/x-shockwave-flash"],doc:["application/msword"],xls:["application/vnd.ms-excel"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],mp3:["audio/mpeg"],mp4:["video/mp4"],pdf:["application/pdf"],txt:["text/plain"],xml:["text/xml"]},r.prototype.TOOLS=function(){var o=this,s=this.options,i={formatFileSize:function(t,e){return t=1048576<t&&!e?(Math.round(100*t/1048576)/100).toString()+"MB":(Math.round(100*t/1024)/100).toString()+"KB"},getFile:function(t,e){console.log(t);for(var i=0;i<e.length;i++)if(e[i].index===t)return e[i];return!1},getFileTypes:function(t){for(var e=[],i=t.split(";"),a=0;a<i.length;a++)e.push(i[a].split(".").pop());return e},getMimetype:function(t){return r.MIMETYPES[t]},getAcceptString:function(t){for(var e=this.getFileTypes(t),i=[],a=0;a<e.length;a++){var n=this.getMimetype(e[a]);n?i.push(n):i.push("."+e[a])}return i.join(",")},filter:function(t){var e=[],i=this.getFileTypes(s.fileTypeExts);if(0<i.length)for(var a=0;a<t.length;a++){var n=t[a];parseInt(this.formatFileSize(n.size,!0))>s.fileSizeLimit?o.$element.alertmsg("error",'文件"'+n.name+'"大小超出限制！'):0<=d.inArray(n.name.split(".").pop().toLowerCase(),i)?e.push(n):o.$element.alertmsg("error",'文件"'+n.name+'"类型不允许！')}return e},getFiles:function(t){for(var e=t.target.files||t.dataTransfer.files,e=this.filter(e),i=0;i<e.length;i++)e[i].id=e[i].lastModifiedDate.getTime()+"_"+e[i].size+"_"+(e[i].type||"").replace(/\W/g,""),this.renderQueueItem(e[i]),o.queueData.files++;return e},renderQueueItem:function(t){var e,a=0,i=d(s.itemTemplate.replace("{fileId}",t.id).replace("{fileName}",t.name).replace("#upConfirm#",BJUI.regional.upload.upConfirm).replace("#upPause#",BJUI.regional.upload.upPause).replace("#upCancel#",BJUI.regional.upload.upCancel).replace("{percent}","0.00%").replace("{uploadedSize}","0KB").replace("{fileSize}",this.formatFileSize(t.size)));s.auto&&i.find("> .info > .up_confirm").remove(),i.data("upfile",t),o.$uploadFileList.append(i),s.breakPoints&&(a=this.getUploadedSize(t.id))>t.size&&(a=t.size),this.showProgress(t.id,a,t.size),s.previewImg&&-1!==t.type.indexOf("image")?(e=i.find("> .preview > .img"),s.previewLoadimg&&e.html('<img src="'+s.previewLoadimg+'" height="114">'),this.previewImg(t,e)):i.find("> .preview").remove(),s.showUploadedSize?((e=i.find("> .filesize")).find("> .uploadedsize").html(this.formatFileSize(a)),e.find("> .filesize").html(this.formatFileSize(t.size))):i.find("> .filesize").remove(),s.showUploadedPercent?i.find("> .percent").html((a/t.size*100).toFixed(2)+"%"):i.find("> .percent").remove(),s.onSelect&&s.onSelect(t),s.auto&&o.fileUpload(t,a),i.on("click.bjui.upload.confirm",".up_confirm",function(t){var e=d(this),i=e.closest(".item");e.hide().next().show(),o.fileUpload(i.data("upfile"),a)}),i.on("click.bjui.upload.cancel",".up_cancel",this.removeQueueItem)},successQueueItem:function(t,e){i.showProgress(t.id,t.size,t.size),s.onUploadSuccess&&s.onUploadSuccess.toFunc().call(o,t,e.responseText,o.$element),setTimeout(function(){o.$element.find("#"+t.id).fadeOut("normal",function(){d(this).remove(),0===o.$element.find("> .queue > .item:visible").length&&(o.$element.find("> .queue").hide(),o.$file.val(""))})},s.removeTimeout)},removeQueueItem:function(t,e){e&&e.abort(),d(this).closest(".item").fadeOut("normal",function(){d(this).remove(),0===o.$element.find("> .queue > .item:visible").length&&o.$element.find("> .queue").hide()}),t.preventDefault()},previewImg:function(t,e){var i;t&&e.length&&((i=new FileReader).onload=function(t){e.html('<img src="'+t.target.result+'">')},i.readAsDataURL(t))},showProgress:function(t,e,i){i=e/i*100+"%";o.$element.find("#"+t+" > .progress > .bar").css("width",i)},getUploadedSize:function(t){return+localStorage.getItem(t)},saveUploadedSize:function(t,e){localStorage.setItem(t,e)},sendBlob:function(t,e,i,a){var n=new FormData;if(e.open(s.method,t,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.append(s.fileObjName,i),a)for(var o in a)a.hasOwnProperty(o)&&n.append(o,a[o]);e.send(n)}};return i},r.prototype.init=function(){var t,e=this,i=this.$element,a=this.options;if(a.uploader){if(a.uploader=decodeURI(a.uploader).replacePlh(i.closest(".unitBox")),!a.uploader.isFinishedTm())return i.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+a.uploader);a.uploader=encodeURI(a.uploader),i.hasClass("bjui-upload")||(t=d(FRAG.uploadFrag.replaceAll("#multi#",a.multi?"multiple":"").replaceAll("#btn-default#",a.class||"btn btn-default").replaceAll("#accept#",e.tools.getAcceptString(a.fileTypeExts)).replaceAll("#btnTxt#",(a.icon?'<i class="'+BJUI.iconPrefix+a.icon+'">&nbsp;&nbsp;':"")+a.buttonText)),i.addClass("bjui-upload").append(t),this.$file=i.find("> .bjui-upload-select-file"),this.$uploadFileList=i.find("> .queue"),this.queueData={files:0,success:0,error:0},i.on("change.bjui.upload",".bjui-upload-select-file",function(t){e.fileSelect(t)}).on("click.bjui.upload",".bjui-upload-select",function(t){e.$file.trigger("click")}),a.onInit&&a.onInit(),a.dragDrop&&(i[0].ondragover=function(t){return t.preventDefault(),!0},i[0].ondrop=function(t){e.fileSelect(t),t.stopPropagation(),t.preventDefault()}))}else BJUI.debug("Upload Plugin: The options uploader is undefined!")},r.prototype.fileSelect=function(t){this.options.hideFileList&&this.options.auto||this.$uploadFileList.show(),this.tools.getFiles(t)},r.prototype.fileUpload=function(i,a){var n=this,t=n.$element,o=n.options,s=n.tools,r=!1,l=i;o.onUploadComplete&&"string"==typeof o.onUploadComplete&&(o.onUploadComplete=o.onUploadComplete.toFunc());var e=!0;if(o.onUploadBefore&&("string"==typeof o.onUploadBefore&&(o.onUploadBefore=o.onUploadBefore.toFunc()),!0!==(e=o.onUploadBefore(o.formData||{},this.$file))&&(o.formData=e)),!e)return t.find("#"+l.id+" > .info > .up_cancel").trigger("click.bjui.upload.cancel"),void(o.onUploadComplete&&o.onUploadComplete(l,r.responseText,this.$file));r=new XMLHttpRequest,o.breakPoints&&(i=l.slice(a,a+o.fileSplitSize)),r.upload&&(r.upload.onprogress=function(t){n.onProgress(i,t.loaded,l.size)},r.onreadystatechange=function(t){var e;4===r.readyState&&(200===r.status?(e=!1,o.breakPoints?(a+=o.fileSplitSize,s.saveUploadedSize(l.id,a),a<l.size?(i=l.slice(a,a+o.fileSplitSize),s.sendBlob(o.uploader,r,i,o.formData)):e=!0):e=!0,e&&(n.queueData.success++,s.successQueueItem(l,r),o.onUploadComplete&&o.onUploadComplete(l,r.responseText,n.$file))):(n.queueData.error++,o.onUploadError&&o.onUploadError(l,r.responseText)),o.onQueueComplete&&n.queueData.files===n.queueData.success+n.queueData.error&&o.onQueueComplete(n.queueData))},o.onUploadStart&&o.onUploadStart(),o.formData.fileName=l.name,o.formData.lastModifiedDate=l.lastModifiedDate.getTime(),s.sendBlob(o.uploader,r,i,o.formData)),t.find("#"+l.id+" > .info > .up_pause").on("click.bjui.upload.pause",function(t){r.abort(),d(this).hide().prev().show()}),t.find("#"+l.id+" > .info > .up_cancel").off("click.bjui.upload.cancel").on("click.bjui.upload.cancel",d.proxy(function(t){this.tools.removeQueueItem(t,r)},this))},r.prototype.onProgress=function(t,e,i){var a=this,n=a.options,o=a.$element.find("#"+t.id+" .progress"),s=e,r=o.attr("lastLoaded")||0;(e-=parseInt(r))>t.size&&(e=t.size),a.$progressBar=o.children(".bar");i=(e/i*100+(n.breakPoints?parseFloat(a.$progressBar.get(0).style.width||0):0)).toFixed(2),i=100<i?"100%":i+"%";n.showUploadedSize&&o.nextAll(".filesize").find("> .uploadedsize").text(a.tools.formatFileSize(e)),n.showUploadedPercent&&o.nextAll(".up_percent").text(i),a.$progressBar.css("width",i),s<n.fileSplitSize?o.attr("lastLoaded",s):o.removeAttr("lastLoaded")},r.prototype.destroy=function(){};var t=d.fn.upload;d.fn.upload=e,d.fn.upload.Constructor=r,d.fn.upload.noConflict=function(){return d.fn.upload=t,this},d(document).on(BJUI.eventType.initUI,function(t){t=d(t.target).find('[data-toggle="upload"]');t.length&&e.call(t)})}(jQuery),function(s){"use strict";var i,a;function r(t,e){this.$element=s(t),this.options=e}function e(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.theme");i||t.data("bjui.theme",i=new r(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s(function(){i=s("#bjui-link-theme"),a=s("#bjui-themes")}),r.DEFAULTS={theme:"purple"},r.prototype.init=function(){var t,e;i.length&&(e=(e=(e=i.attr("href")).substring(0,e.lastIndexOf("/"))).substring(0,e.lastIndexOf("/")),e+="/"+this.options.theme+"/core.css",i.attr("href",e),e=(e=(t=this.$element.closest("ul").prev()).attr("class")).replace(/(theme[\s][a-z]*)/g,""),t.removeClass().addClass(e).addClass("theme").addClass(this.options.theme),a.find("li").removeClass("active"),this.$element.parent().addClass("active"),this.cookie())},r.prototype.setTheme=function(t){a.find("a.theme_"+t).trigger("click")},r.prototype.cookie=function(){var t=this.options.theme;s.cookie&&s.cookie("bjui_theme",t,{path:"",expires:30})};var t=s.fn.theme;s.fn.theme=e,s.fn.theme.Constructor=r,s.fn.theme.noConflict=function(){return s.fn.theme=t,this},s(document).on("click.bjui.theme.data-api",'[data-toggle="theme"]',function(t){e.call(s(this)),t.preventDefault()})}(jQuery),function(s){"use strict";function r(t,e){this.$element=s(t),this.options=e}function i(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.initui");i||t.data("bjui.initui",i=new r(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}r.DEFAULTS={},r.prototype.init=function(){var t=this.$element;s.when(this.initUI()).done(function(){t.trigger(BJUI.eventType.afterInitUI)})},r.prototype.initUI=function(){var t=this.$element;s.when(t.trigger(BJUI.eventType.beforeInitUI)).done(function(){t.trigger(BJUI.eventType.initUI)})};var t=s.fn.initui;function a(t){var e=t,i=e;"static"===e.css("position")&&(i=e.offsetParent());var a=parseInt(i.css("zIndex"))||0,t=e.find("> .bjui-maskBackground"),i=e.find("> .bjui-maskProgress");return t.length||(t=s(FRAG.maskBackground),i=s(FRAG.maskProgress.replace("#msg#",BJUI.regional.progressmsg)),e.prepend(t).prepend(i)),t.css("zIndex",a+1),i.css("zIndex",a+2),{$bg:t,$pr:i}}function e(t){t.find('select[data-toggle="selectpicker"]').selectpicker("destroyMenu"),t.find('[data-toggle="selectztree"]').trigger("destroy.bjui.selectztree")}s.fn.initui=i,s.fn.initui.Constructor=r,s.fn.initui.noConflict=function(){return s.fn.initui=t,this},s(document).on("click.bjui.initui.data-api",'[data-toggle="initui"]',function(t){var e=s(this);i.call(e,e.data()),t.preventDefault()}),s(document).on(BJUI.eventType.beforeInitUI,function(t){var e=s(t.target),a=[],t=e.find("[data-noinit]");e.find("> .bjui-maskProgress").find(".progress").stop().animate({width:"85%"},"fast"),t.each(function(t){var e=s(this),i={};i.$target=e,i.$next=e.next(),i.$prev=e.prev(),i.$parent=e.parent(),i.visible=!!e.is(":visible"),a.push(i),e.remove()}),e.data("bjui.noinit",a)}),s(document).on(BJUI.eventType.initUI,function(t){s(t.target).find("> .bjui-maskProgress").find(".progress").stop().animate({width:"95%"},"fast")}),s(document).on(BJUI.eventType.afterInitUI,function(t){var i=s(t.target),t=i.data("bjui.noinit"),e=i.find("> .bjui-pageContent").find("form");t&&s.each(t,function(t,e){e.$next.length?e.$next.before(e.$target):e.$prev.length?e.$prev.after(e.$target):e.$parent.length&&e.$parent.append(e.$target),e.visible&&e.$target.show(),i.removeData("bjui.noinit")}),i.resizePageH(),e.length&&i.find("> .bjui-pageFooter").find(":submit").on("click.bjui.submit",function(t){t.preventDefault(),e.submit()}),i.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){i.find(".bjui-ajax-mask").fadeOut("normal",function(){s(this).remove()})})}),s(document).one(BJUI.eventType.afterInitUI,function(t){var e=s("#bjui-hnav-navbar").find("> li.active");e.length&&e.find("> .items").length&&e.find("> a").trigger("click")}),s(document).on("bjui.ajaxStart",function(t,e,i){t=a(s(t.target));t.$bg.fadeIn(),t.$pr.fadeIn(),t.$pr.find(".progress").animate({width:"80%"},e||500),i&&setTimeout(function(){i.toFunc().call(this)},25)}).on("bjui.ajaxStop",function(t){var e=a(s(t.target));e.$pr.find(".progress").animate({width:"100%"},"fast",function(){e.$bg.remove(),e.$pr.remove()})}).on("bjui.ajaxError",function(t){t=a(s(t.target));t.$bg.remove(),t.$pr.remove()}),s(document).on(BJUI.eventType.ajaxStatus,function(t){var t=s(t.target),e=a(t);t.one("ajaxStart",function(){e.$bg.fadeIn(),e.$pr.fadeIn(),e.$pr.find(".progress").animate({width:"10%"},"fast")}).one("ajaxStop",function(){}).one("ajaxError",function(){e.$bg.remove(),e.$pr.remove()})}),s(document).on(BJUI.eventType.beforeLoadDialog,function(t){}).on(BJUI.eventType.beforeAjaxLoad,function(t){e(s(t.target))}).on(BJUI.eventType.beforeCloseNavtab,function(t){e(s(t.target))}).on(BJUI.eventType.beforeCloseDialog,function(t){e(s(t.target))}),s(function(){s(document).on("keydown keyup",function(t){t.which===BJUI.keyCode.CTRL&&(BJUI.KeyPressed.ctrl="keydown"===t.type),t.which===BJUI.keyCode.SHIFT&&(BJUI.KeyPressed.shift="keydown"===t.type)})})}(jQuery),function(d){"use strict";d(document).on(BJUI.eventType.initUI,function(t){function o(t){var e,i,a=t.data("switch")?"switch":(t.attr("type")||"").toLowerCase(),n=t.data("class")||"",o="";switch(a){case"checkbox":e='<div class="pretty p-icon p-curve '+n+'"></div>',o='<i class="icon bjicon-ok"></i>',i=t.data("color")||"primary-o";break;case"radio":e='<div class="pretty p-default p-round '+n+'"></div>',o="";break;case"switch":e='<div class="pretty p-switch p-fill '+n+'"></div>',o=""}e&&(i=i||(t.data("color")||"primary"),a=t.data("label")||"",t.wrap(d(e)),t.parent().append('<div class="state p-'+i+'">'+o+"<label>"+a+"</label></div>"))}var i=d(t.target),s=BJUI.pluginConfig.checkbox||"icheck",t=i.find('[data-toggle="icheck"]');d.fn.iCheck?t.each(function(){var t,a,n,e;"icheck"===((t=d(this)).data("initType")||s)?(a=t.attr("id"),n=t.attr("name"),(e=t.data("label"))&&(a||(a=d.getGUID(),t.attr("id",a)),t.after('<label for="'+a+'" class="ilabel">'+e+"</label>")),t.on("ifCreated",function(t){var e=d(this).closest("div"),i=e.next('[for="'+a+'"]');e.attr("data-icheck",n),i.attr("data-icheck",n)}).iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChanged",function(){d(this).trigger("validate")}),t.prop("disabled")&&t.iCheck("disable")):o(t)}):t.each(function(){o(d(this))}),t.filter(".checkboxCtrl").each(function(){var t=d(this);"icheck"===(t.data("initType")||s)?t.on("ifChanged",function(t){var e=!0===t.target.checked?"check":"uncheck",t=d(this).data("group");i.find(':checkbox[name="'+t+'"]').iCheck(e)}):t.on("change",function(){var t=d(this),e=t.prop("checked"),t=t.data("group");i.find(':checkbox[name="'+t+'"]').prop("checked",e)})}),i.find('[data-toggle="boolcheck"]').each(function(t){var e,i,a=d(this),n=a.attr("name");a.removeAttr("name"),n&&(e=a.is(":checked")?1:0,i=d('<input type="hidden" value="'+e+'" name="'+n+'">').appendTo(a.parent())),d.fn.iCheck&&"icheck"===(a.data("initType")||s)?a.iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChecked",function(){i&&i.val(1)}).on("ifUnchecked",function(){i&&i.val(0)}):(i&&a.on("change",function(){i.val(d(this).prop("checked")?1:0)}),o(a))}),i.find(":text, :password, textarea, :button, a.btn").each(function(){var t,e,i,a=d(this),n=a.closest("table.bjui-tabledit");(a.is(":text")||a.is(":password")||a.isTag("textarea"))&&!a.hasClass("form-control")&&a.addClass("form-control"),a.is(":button")&&(t=a.data("icon"),e=a.attr("class"),a.hasClass("btn")||a.removeClass().addClass("btn").addClass(e),t&&(a.data("bjui.icon")||a.html('<i class="'+BJUI.iconPrefix+t+'"></i> '+a.html()).data("bjui.icon",!0))),a.isTag("a")&&(t=a.data("icon"))&&(a.data("bjui.icon")||a.html('<i class="'+BJUI.iconPrefix+t+'"></i> '+a.html()).data("bjui.icon",!0)),!a.isTag("textarea")||(i=a.data("toggle"))&&"autoheight"===i&&(d.fn.autosize?a.addClass("autosize").autosize():window.autosize&&(window.autosize(a),a.addClass("autosize"))),n.length||(i=a.attr("size"))&&(n=0,(n="%"!==i.charAt(i.length-1)?10*i:i)&&a.css("width",n))}),i.find('form[data-toggle="validate"]').each(function(){var t=d(this),a=void 0===t.data("alertmsg")||t.data("alertmsg");d(this).validator({valid:function(t){d(t).bjuiajax("ajaxForm",d(t).data())},validClass:"ok",theme:t.data("theme")||"red_right_effect"}).on("invalid.form",function(t,e,i){a&&d(e).alertmsg("error",FRAG.validateErrorMsg.replace("#validatemsg#",BJUI.regional.validatemsg).replaceMsg(i.length))})}),i.find('[data-toggle="moresearch"]').each(function(){var e=d(this),i=e.closest(".bjui-pageHeader"),a=i&&i.find(".bjui-moreSearch"),n=e.data("name");e.attr("title")||e.attr("title","更多查询条件"),e.click(function(t){a.length?(a.css("top",i.outerHeight()-1),a.is(":visible")?(e.html('<i class="bjicon-angle-double-down"></i>'),n&&d("body").data("moresearch."+n,!1)):(e.html('<i class="bjicon-angle-double-up"></i>'),n&&d("body").data("moresearch."+n,!0)),a.fadeToggle("slow","linear"),t.preventDefault()):BJUI.debug("Not created 'moresearch' box[class=\"bjui-moreSearch\"]!")}),n&&d("body").data("moresearch."+n)&&(a.css("top",i.outerHeight()-1).fadeIn(),e.html('<i class="bjicon-angle-double-up"></i>'))});function a(t,e){var i,o,a=t.data("refurl"),s=function(t){var e=d(t.data("nextselect"));e&&e.length&&(t=e.data("emptytxt")||"&nbsp;",e.html("<option>"+t+"</option>").selectpicker("refresh"),s(e))};e&&e.length&&a&&(i=t.data("val"),o=e.data("val"),void 0===i&&(i=t.val()),d.ajax({type:"POST",dataType:"json",url:a.replace("{value}",encodeURIComponent(i)),cache:!1,data:{},success:function(i){var a,n;i&&(n=a="",d.each(i,function(t){var e,t=i[t]&&i[t].length?(e=i[t][0],i[t][1]):(e=i[t].value,i[t].label);void 0!==o&&(n=e===o?" selected":""),a+='<option value="'+e+'"'+n+">"+t+"</option>"}),t.removeAttr("data-val").removeData("val"),e.removeAttr("data-val").removeData("val"),a=a||"<option>"+(a=e.data("emptytxt")||"&nbsp;")+"</option>",e.html(a).selectpicker("refresh"),s(e))},error:BJUI.ajaxError}))}t=i.find('select[data-toggle="selectpicker"]');t.each(function(){var t=d(this),e=t.data(),i=d(e.nextselect);t.addClass("show-tick"),e.style||t.data("style","btn-default"),e.width||t.data("width","auto"),e.container?!0===e.container&&t.attr("data-container","false").data("container",!1):t.data("container","body"),t.selectpicker(),i&&i.length&&void 0!==i.data("val")&&a(t,i)}),t.change(function(){var t=d(this),e=d(t.data("nextselect"));a(t,e),t.attr("aria-required")&&t.trigger("validate")}),i.find('[data-toggle="ztree"]').each(function(){var t,e=d(this),s=e.data()||{},i=s.options;s.hasOwnProperty("iconPrefix")||(s.iconPrefix=BJUI.iconPrefix),i&&"string"==typeof i&&(i=i.toObj()),i&&d.extend(s,"object"==typeof i&&i),t=s.setting,s.nodes?("string"==typeof s.nodes&&(s.nodes.trim().startsWith("[")||s.nodes.trim().startsWith("{")?s.nodes=s.nodes.toObj():s.nodes=s.nodes.toFunc()),"function"==typeof s.nodes&&(s.nodes=s.nodes.call(this)),e.removeAttr("data-nodes")):(s.nodes=[],e.find("> li").each(function(){var t=d(this),e=t.data();e.pid&&(e.pId=e.pid),e.name=t.html(),s.nodes.push(e)}),e.empty()),s.showRemoveBtn||(s.showRemoveBtn=!1),s.showRenameBtn||(s.showRenameBtn=!1),s.addHoverDom&&"function"!=typeof s.addHoverDom&&(s.addHoverDom="edit"===s.addHoverDom?function(a,n){var t=n.level,e=d("#"+n.tId+r),i=d("#diyBtn_add_"+n.id),o=d("#diyBtn_del_"+n.id);i.length||t<s.maxAddLevel&&((i=d('<span class="tree_add" id="diyBtn_add_'+n.id+'" title="添加"></span>')).appendTo(e),i.on("click",function(){l.addNodes(n,{name:"新增Item"})}));o.length||(o=d('<span class="tree_del" id="diyBtn_del_'+n.id+'" title="删除"></span>')).appendTo(e).on("click",function(e){function t(){o.alertmsg("confirm","确认要删除 "+n.name+" 吗？",{okCall:function(){var t;l.removeNode(n),!s.onRemove||(t=s.onRemove.toFunc())&&t.call(this,e,a,n)},cancelCall:function(){}})}var i;s.beforeRemove?!(i=s.beforeRemove.toFunc())||(i=i.call(i,a,n))&&!0===i&&t():t()})}:s.addHoverDom.toFunc()),s.removeHoverDom&&"function"!=typeof s.removeHoverDom&&(s.removeHoverDom="edit"===s.removeHoverDom?function(t,e){var i=d("#diyBtn_add_"+e.id),e=d("#diyBtn_del_"+e.id);i&&i.length&&i.off("click").remove();e&&e.length&&e.off("click").remove()}:s.removeHoverDom.toFunc()),s.maxAddLevel||(s.maxAddLevel=2);i={view:{addHoverDom:s.addHoverDom||null,removeHoverDom:s.removeHoverDom||null,addDiyDom:s.addDiyDom?s.addDiyDom.toFunc():null},edit:{enable:s.editEnable,showRemoveBtn:s.showRemoveBtn,showRenameBtn:s.showRenameBtn},check:{enable:s.checkEnable,chkStyle:s.chkStyle,radioType:s.radioType},callback:{onClick:s.onClick?s.onClick.toFunc():null,beforeDrag:s.beforeDrag?s.beforeDrag.toFunc():function(t,e){for(var i=0;i<e.length;i++)if(!1===e[i].drag)return!1;return!0},beforeDrop:s.beforeDrop?s.beforeDrop.toFunc():function(t,e,i,a){return!i||!1!==i.drop},onDrop:s.onDrop?s.onDrop.toFunc():null,onCheck:s.onCheck?s.onCheck.toFunc():null,beforeRemove:s.beforeRemove?s.beforeRemove.toFunc():null,onRemove:s.onRemove?s.onRemove.toFunc():null,onNodeCreated:function(t,e,i){{var a;i.faicon&&((a=d("#"+i.tId+"_a")).data("faicon")||a.data("faicon",!0).addClass("faicon").find("> span.button").append('<i class="'+s.iconPrefix+i.faicon+'"></i>'))}s.onNodeCreated&&s.onNodeCreated.toFunc().call(this,t,e,i)},onCollapse:function(t,e,i){i.faiconClose&&d("#"+i.tId+"_ico").find("> i").attr("class",s.iconPrefix+i.faiconClose);s.onCollapse&&s.onCollapse.toFunc().call(this,t,e,i)},onExpand:function(t,e,i){i.faicon&&i.faiconClose&&d("#"+i.tId+"_ico").find("> i").attr("class",s.iconPrefix+i.faicon);s.onExpand&&s.onExpand.toFunc().call(this,t,e,i)}},data:{simpleData:{enable:s.simpleData||!0},key:{title:s.title||""}}};t&&"string"==typeof t&&(t=t.toObj()),t&&d.extend(!0,i,"object"==typeof t&&t),d.fn.zTree.init(e,i,s.nodes);var r="_a",l=d.fn.zTree.getZTreeObj(e.attr("id"));s.expandAll&&l.expandAll(!0)}),i.find('[data-toggle="selectztree"]').each(function(){var i,a,n,t,o=d(this),s=o.data(),r=d(s.tree),l=o.outerHeight();s.width=s.width||o.outerWidth(),s.height=s.height||"auto",r&&r.length&&(i=r.attr("id"),a=d("#"+i+"_select_box"),n=function(t){var e=o.offset().top,i=o.offset().left,a=r.clone().appendTo(d("body")),n=a.outerHeight();a.remove();a=d(window).height()-n-e-l,n=d(window).height()-e-l;"auto"===s.height&&a<0&&(n+=a),t.css({top:e+l,left:i,"max-height":n})},o.click(function(){if(a&&a.length)return n(a),void a.show();var t=2,e=d.CurrentDialog;e&&e.length&&(t=e.css("zIndex")+1),a=d('<div id="'+i+'_select_box" class="tree-box"></div>').css({position:"absolute",zIndex:t,"min-width":s.width,height:s.height,overflow:"auto",background:"#FAFAFA",border:"1px #EEE solid"}).hide().appendTo(d("body")),r.appendTo(a).css("width","100%").data("fromObj",o).removeClass("hide").show(),n(a),a.show()}),d("body").on("mousedown",function(t){var e=d(t.target);o[0]===t.target||a&&0<a.length&&0<e.closest(".tree-box").length||a.hide()}),(t=o.closest(".bjui-pageContent"))&&t.length&&t.scroll(function(){a&&a.length&&n(a)}),o.on("destroy.bjui.selectztree",function(){a.remove()}))}),i.find('[data-toggle="accordion"]').each(function(){function t(t,e){var i=a.data("offsety")||0;e=e||d(t).outerHeight()-+i,t=a.find(".panel-heading"),i=((i=t.outerHeight())+1)*t.length,a.css("height",e),e-=i,a.find(".panel-collapse").find(".panel-body").css("height",e)}var a=d(this),e=a.data("heightbox"),i=a.data("height");a.find("> .panel").length&&(e||i)&&(t(e,i),d(window).resize(function(){t(e,i)}),a.on("hidden.bs.collapse",function(t){var e=d(this).find("> .panel:last");e.find("> .panel-heading > h4 > a").hasClass("collapsed")&&e.css("border-bottom","1px #ddd solid")}))}),i.find('[data-toggle="kindeditor"]').each(function(){var t=d(this),e=t.data();e.items&&"string"==typeof e.items&&(e.items=e.items.replaceAll("'","").replaceAll(" ","").split(",")),e.afterUpload&&(e.afterUpload=e.afterUpload.toFunc()),e.afterSelectFile&&(e.afterSelectFile=e.afterSelectFile.toFunc()),e.confirmSelect&&(e.confirmSelect=e.confirmSelect.toFunc());var i=!0;void 0!==e.formatUploadUrl?i=e.formatUploadUrl:void 0!==BJUI.KindEditor.formatUploadUrl&&(i=BJUI.KindEditor.formatUploadUrl),KindEditor.create(t,{pasteType:e.pasteType,minHeight:e.minHeight||260,autoHeightMode:e.autoHeight||!1,items:e.items||KindEditor.options.items,uploadJson:e.uploadJson||BJUI.KindEditor.uploadJson,fileManagerJson:e.fileManagerJson||BJUI.KindEditor.fileManagerJson,formatUploadUrl:i,allowFileManager:e.allowFileManager||!0,fillDescAfterUploadImage:e.fillDescAfterUploadImage||!0,afterUpload:e.afterUpload,afterSelectFile:e.afterSelectFile,X_afterSelect:e.confirmSelect,htmlTags:{video:["id","class","src","controls","width","height"],font:[],span:[".color",".background-color",".font-size",".font-family"],div:[".margin",".padding",".text-align"],table:["align","width"],"td,th":["align","valign","width","height","colspan","rowspan"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["class","align",".text-align",".color",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]},cssPath:[BJUI.PLUGINPATH+"kindeditor/editor-content.css",BJUI.PLUGINPATH+"kindeditor/plugins/code/prettify.css"],afterBlur:function(){this.sync()}})}),i.find('[data-toggle="colorpicker"]').each(function(){var e=d(this),t=e.data("bgcolor");e.colorpicker(),t&&e.on("changeColor",function(t){e.css("background-color",t.color.toHex())})}),i.find('[data-toggle="clearcolor"]').each(function(){var t=d(this),e=t.data("target")?d(t.data("target")):null;e&&e.length&&t.click(function(){e.val(""),e.data("bgcolor")&&e.css("background-color","")})}),i.find('[data-toggle="tooltip"]').each(function(){d(this).tooltip()}),i.find('[data-toggle="dropdown"]').parent().on("show.bs.dropdown",function(t){var e=d(this),i=e.outerWidth(),e=e.find("> .dropdown-menu");e.outerWidth()<i&&e.css("min-width",i)}),i.find('form[data-toggle="ajaxform"]').each(function(){d(this).validator({ignore:":input"}),d(this).validator("destroy")}),i.find("textarea[data-toggle=jsoneditor]").each(function(){var e=d(this);e.hide(),setTimeout(function(){CodeMirror.fromTextArea(e[0],{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}).on("change",function(t){e.val(t.getValue())})},100)}),i.find("[data-toggle=clipboard]").each(function(){var t=d(this).data(),e={};t.target?e.target=function(){return i.find(t.target)[0]}:t.text&&(e.text=function(){return t.text}),new ClipboardJS(this,e).on("error",function(t){i.alertmsg("error","复制失败！")})})})}(jQuery);