!function(t){var e=!1;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var a=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=a,i}}}(function(){function g(){for(var t=0,e={};t<arguments.length;t++){var a=arguments[t];for(var i in a)e[i]=a[i]}return e}return function t(p){function f(t,e,a){var i;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(a=g({path:"/"},f.defaults,a)).expires){var n=new Date;n.setMilliseconds(n.getMilliseconds()+864e5*a.expires),a.expires=n}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(e),/^[\{\[]/.test(i)&&(e=i)}catch(t){}e=p.write?p.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o="";for(var s in a)a[s]&&(o+="; "+s,!0!==a[s]&&(o+="="+a[s]));return document.cookie=t+"="+e+o}t||(i={});for(var l=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var c=l[d].split("="),u=c.slice(1).join("=");this.json||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var h=c[0].replace(r,decodeURIComponent);if(u=p.read?p.read(u,h):p(u,h)||u.replace(r,decodeURIComponent),this.json)try{u=JSON.parse(u)}catch(t){}if(t===h){i=u;break}t||(i[h]=u)}catch(t){}}return i}}return(f.set=f).get=function(t){return f.call(f,t)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(t,e){f(t,"",g(e,{expires:-1}))},f.withConverter=t,f}(function(){})}),jQuery.cookie=function(t,e,a){return void 0!==e?(a=a||{},null===e?Cookies.remove(t,a):Cookies.set(t,e,a)):Cookies.get(t)},function(b){"use strict";var v={version:"1.1.4",JSPATH:"BJUI/",PLUGINPATH:"BJUI/plugins/",IS_DEBUG:!1,date:!0,KeyPressed:{ctrl:!1,shift:!1},theme:"blue",dialog:{mask:!1,width:500,height:300},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{initUI:"bjui.initUI",beforeInitUI:"bjui.beforeInitUI",afterInitUI:"bjui.afterInitUI",ajaxStatus:"bjui.ajaxStatus",resizeGrid:"bjui.resizeGrid",beforeAjaxLoad:"bjui.beforeAjaxLoad",beforeLoadNavtab:"bjui.beforeLoadNavtab",beforeLoadDialog:"bjui.beforeLoadDialog",afterLoadNavtab:"bjui.afterLoadNavtab",afterLoadDialog:"bjui.afterLoadDialog",beforeCloseNavtab:"bjui.beforeCloseNavtab",beforeCloseDialog:"bjui.beforeCloseDialog",afterCloseNavtab:"bjui.afterCloseNavtab",afterCloseDialog:"bjui.afterCloseDialog"},pageInfo:{total:"total",pageCurrent:"pageCurrent",pageSize:"pageSize",orderField:"orderField",orderDirection:"orderDirection"},alertMsg:{displayPosition:"topcenter",displayMode:"slide",alertTimeout:3e3},ajaxTimeout:5e4,statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},ui:{windowWidth:0,showSlidebar:!0,clientPaging:!0,overwriteHomeTab:!1},debug:function(t){this.IS_DEBUG&&("undefined"!=typeof console?console.log(t):alert(t))},loginInfo:{url:"login.html",title:"Login",width:420,height:260,mask:!0},loadLogin:function(){var t=this.loginInfo;b("body").dialog({id:"bjui-login",url:t.url,title:t.title,width:t.width,height:t.height,mask:t.mask})},init:function(t){var e=b.extend({},t);b.extend(v.statusCode,e.statusCode),b.extend(v.pageInfo,e.pageInfo),b.extend(v.alertMsg,e.alertMsg),b.extend(v.loginInfo,e.loginInfo),b.extend(v.ui,e.ui),b.extend(v.dialog,e.dialog),e.JSPATH&&(this.JSPATH=e.JSPATH),e.PLUGINPATH&&(this.PLUGINPATH=e.PLUGINPATH),e.ajaxTimeout&&(this.ajaxTimeout=e.ajaxTimeout),this.date=void 0===e.date?this.date:e.date,this.IS_DEBUG=e.debug||!1,this.theme=b.cookie("bjui_theme")||e.theme,this.initEnv(),this.date&&this.initDate(),b(this).theme("setTheme",this.theme)},initEnv:function(){b(window).resize(function(){var t=b(this).width();v.ui.windowWidth&&600<v.ui.windowWidth&&v.ui.windowWidth<t&&(t=v.ui.windowWidth),v.initLayout(t),setTimeout(function(){b(this).trigger(v.eventType.resizeGrid)},30)}),setTimeout(function(){var t=b(window).width();v.ui.windowWidth&&600<v.ui.windowWidth&&v.ui.windowWidth<t&&(t=v.ui.windowWidth),v.initLayout(t),b(document).initui()},10)},initLayout:function(t){var e=b("#bjui-header"),a=b("#bjui-navtab"),i=t-(v.ui.showSlidebar?b("#bjui-sidebar").width()+6:6),n=b(window).height()-e.height()-b("#bjui-footer").outerHeight(),o=a.find(".tabsPageHeader").height();v.ui.windowWidth&&b("#bjui-window").width(t),v.windowWidth=t,b("#bjui-container").height(n),a.width(i),b("#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy").css({height:"100%"}),b("#bjui-navtab .tabsPageContent").height(n-o),setTimeout(function(){b("#bjui-navtab > .tabsPageContent > .navtabPage").resizePageH().find(".bjui-layout").resizePageH()},10);var s=b("body").data("bjui.navbar.width"),l=e.find(".bjui-navbar-toggle"),r=e.find(".bjui-navbar-logo"),d=b("#bjui-navbar-collapse"),c=d.find(".bjui-navbar-right");s||(s={logoW:r.outerWidth(),navW:c.outerWidth()},b("body").data("bjui.navbar.width",s)),s&&(t-s.logoW<s.navW?(l.show(),d.addClass("collapse menu")):(l.hide(),d.removeClass("collapse menu in")));var u=b("#bjui-hnav-navbar-box"),h=u.find("> #bjui-hnav-navbar"),p=u.prev(),f=u.next(),g=u.width(),m=0;h.find("> li").each(function(t){var e=b(this);m+=e.outerWidth(),g<m?(f.show(),u.data("hnav.move",!0).data("hnav.liw",m)):(p.hide(),f.hide(),u.removeData("hnav.move"))})},regional:{},setRegional:function(t,e){v.regional[t]=e},getRegional:function(t){if(0<=String(t).indexOf(".")){for(var e,a=String(t).split("."),i=0;i<a.length;i++)e=e?e[a[i]]:v.regional[a[i]];return e}return v.regional[t]},doRegional:function(a,t){return b.each(t,function(t,e){a=a.replaceAll("#"+t+"#",e)}),a},initDate:function(){var t=new Date;b("#bjui-date").html(t.formatDate("yyyy/MM/dd")),setInterval(function(){t=new Date(t.setSeconds(t.getSeconds()+1)),b("#bjui-clock").html(t.formatDate("HH:mm:ss"))},1e3)},removeProgress:function(){var t=b(document);t.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){t.find(".bjui-ajax-mask").fadeOut("normal",function(){b(this).remove()})})}};window.BJUI=v}(jQuery),function(t){"use strict";t(function(){BJUI.setRegional("alertmsg",{title:{error:"错误提示",info:"信息提示",warn:"警告信息",correct:"成功信息",confirm:"确认信息"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}}),BJUI.setRegional("dialog",{close:"关闭",maximize:"最大化",restore:"还原",minimize:"最小化",title:"弹出窗口"}),BJUI.setRegional("orderby",{asc:"升序",desc:"降序"}),BJUI.setRegional("pagination",{total:"总记录数/总页数",first:"首页",last:"末页",prev:"上一页",next:"下一页",jumpto:"输入跳转页码，回车确认",jump:"跳转",page:"页",refresh:"刷新"}),BJUI.setRegional("datagrid",{asc:"升序",desc:"降序",showhide:"显示/隐藏 列",filter:"过滤",clear:"清除",lock:"锁定列",unlock:"解除锁定",add:"添加",edit:"编辑",save:"保存",update:"更新",cancel:"取消",del:"删除",prev:"上一条",next:"下一条",refresh:"刷新",query:"查询",import:"导入",export:"导出",all:"全部",true:"是",false:"否",selectMsg:"未选中任何行！",editMsg:"请先保存编辑行！",saveMsg:"没有需要保存的行！",delMsg:"确定要删除该行吗？",delMsgM:"确定要删除选中行？"}),BJUI.setRegional("progressmsg","正在努力加载数据，请稍等..."),BJUI.setRegional("datepicker",{close:"关闭",prev:"上月",next:"下月",clear:"清空",ok:"确定",dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),BJUI.setRegional("navtabCM",{refresh:"刷新本标签",close:"关闭本标签",closeother:"关闭其他标签",closeall:"关闭所有标签"}),BJUI.setRegional("dialogCM",{refresh:"刷新本窗口",close:"关闭本窗口",closeother:"关闭其他窗口",closeall:"关闭所有窗口"}),BJUI.setRegional("upload",{upConfirm:"开始上传",upPause:"暂停上传",upCancel:"取消上传"}),BJUI.setRegional("statusCode_503","服务器当前负载过大或者正在维护！"),BJUI.setRegional("sessiontimeout","会话超时，请重新登陆！"),BJUI.setRegional("plhmsg","占位符对应的选择器无有效值！"),BJUI.setRegional("nocheckgroup",'未定义选中项的组名[复选框的"data-group"]！'),BJUI.setRegional("notchecked","未选中任何一项！"),BJUI.setRegional("selectmsg","请选择一个选项！"),BJUI.setRegional("validatemsg","提交的表单中 [{0}] 个字段有错误，请更正后再提交！"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","我的主页"),t.validator&&t.validator.config({defaultMsg:"{0}格式不正确",loadingMsg:"正在验证...",rules:{digits:[/^\d+$/,"请输入整数"],number:[/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"请输入有效的数字"],letters:[/^[a-z]+$/i,"{0}只能输入字母"],datetime:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的日期时间，例：yyyy-MM-dd HH:mm:ss"],pattern:function(t,e){return!e||(!!t.value.parseDate(e)||this.renderMsg("错误的日期时间格式！",e))},accept:function(t,e){if(!e)return!0;var a=e[0];return"*"===a||new RegExp(".(?:"+(a||"png|jpg|jpeg|gif")+")$","i").test(t.value)||this.renderMsg("只接受{1}后缀",a.replace("|",","))}}})})}(jQuery),function(t){"use strict";BJUI.setRegional("alertmsg",{title:{error:"Error",info:"Info",warn:"Warning",correct:"Correct",confirm:"Confirm"},btnMsg:{ok:"OK",yes:"YES",no:"NO",cancel:"Cancel"}}),BJUI.setRegional("dialog",{close:"Close",maximize:"Maximize",restore:"Restore",minimize:"Minimize",title:"Popup window"}),BJUI.setRegional("orderby",{asc:"Asc",desc:"Desc"}),BJUI.setRegional("pagination",{first:"First page",last:"Last page",prev:"Prev page",next:"Next page",jumpto:"Jump page number",jump:"Jump"}),BJUI.setRegional("datagrid",{asc:"ASC",desc:"DESC",showhide:"Show/Hide columns",filter:"Filter",clear:"Clear",lock:"Lock",unlock:"Unlock",add:"Add",edit:"Edit",save:"Save",update:"Update",cancel:"Cancel",del:"Delete",prev:"Prev",next:"Next",refresh:"Refresh",query:"Query",import:"Import",export:"Export",all:"All",true:"True",false:"False",selectMsg:"Not selected any rows!",saveMsg:"No rows need to save!",editMsg:"Please save the edited row!",delMsg:"Sure you want to delete this row?",delMsgM:"Sure you want to delete selected rows?"}),BJUI.setRegional("progressmsg","Data loading, please waiting..."),BJUI.setRegional("datepicker",{close:"Close",prev:"Prev month",next:"Next month",clear:"Clear",ok:"OK",dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),BJUI.setRegional("navtabCM",{refresh:"Refresh navtab",close:"Close navtab",closeother:"Close other navtab",closeall:"Close all navtab"}),BJUI.setRegional("dialogCM",{refresh:"Refresh dialog",close:"Close dialog",closeother:"Close other dialog",closeall:"Close all dialog"}),BJUI.setRegional("upload",{upConfirm:"Start upload",upPause:"Pause upload",upCancel:"Cancel upload"}),BJUI.setRegional("statusCode_503","The current server load is too large or is down for maintenance!"),BJUI.setRegional("sessiontimeout","Session timeout, please login!"),BJUI.setRegional("plhmsg","Placeholder corresponding selector None Valid!"),BJUI.setRegional("nocheckgroup",'Undefined group name selected item [check box "data-group"]!'),BJUI.setRegional("notchecked","Unchecked any one!"),BJUI.setRegional("selectmsg","Please select one option!"),BJUI.setRegional("validatemsg","Submitted form data has [{0}] field an error, please after modified submitting!"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","My home"),window.FRAG={dialog:'<div class="bjui-dialog bjui-dialog-container" style="top:150px; left:300px;">    <div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;">        <a class="close" href="#close" title="#close#"><i class="fa fa-times-circle"></i></a>        <a class="maximize" href="#maximize" title="#maximize#"><i class="fa fa-plus-circle"></i></a>        <a class="restore" href="#restore" title="#restore#"><i class="fa fa-history"></i></a>        <a class="minimize" href="#minimize" title="#minimize#"><i class="fa fa-minus-circle"></i></a>        <h1><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></h1>    </div>    <div class="dialogContent unitBox"></div>    <div class="resizable_h_l" tar="nw"></div>    <div class="resizable_h_r" tar="ne"></div>    <div class="resizable_h_c" tar="n"></div>    <div class="resizable_c_l" tar="w" style="height:100%;"></div>    <div class="resizable_c_r" tar="e" style="height:100%;"></div>    <div class="resizable_f_l" tar="sw"></div>    <div class="resizable_f_r" tar="se"></div>    <div class="resizable_f_c" tar="s"></div></div>',taskbar:'<div id="bjui-taskbar" style="left:0px; display:none;">    <div class="taskbarContent">        <ul></ul>    </div>    <div class="taskbarLeft taskbarLeftDisabled"><i class="fa fa-angle-double-left"></i></div>    <div class="taskbarRight"><i class="fa fa-angle-double-right"></i></div></div>',splitBar:'<div id="bjui-splitBar"></div>',splitBarProxy:'<div id="bjui-splitBarProxy"></div>',resizable:'<div id="bjui-resizable" class="bjui-resizable"></div>',alertBackground:'<div class="bjui-alertBackground"></div>',maskBackground:'<div class="bjui-maskBackground bjui-ajax-mask"></div>',maskProgress:'<div class="bjui-maskProgress bjui-ajax-mask"><i class="fa fa-cog fa-spin"></i>&nbsp;&nbsp;#msg#<div class="progressBg"><div class="progress"></div></div></div>',progressBar_custom:'<div id="bjui-progressBar-custom" class="progressBar"><i class="fa fa-cog fa-spin"></i> <span></span></div>',dialogMask:'<div class="bjui-dialogBackground"></div>',orderby:'<a href="javascript:;" class="order asc" data-order-direction="asc" title="#asc#"><i class="fa fa-angle-up"></i></a><a href="javascript:;" class="order desc" data-order-direction="desc" title="#desc#"><i class="fa fa-angle-down"></i></a>',slidePanel:'<div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#bjui-accordionmenu" href="##id#" class="#class#">#icon#&nbsp;#title#<b>#righticon#</b></a></h4>    </div>    <div id="#id#" class="panel-collapse collapse#bodyclass#">        <div class="panel-body">        </div>    </div></div>',pagination:'<ul class="pagination">    <li class="j-first">        <a class="first" href="javascript:;"><i class="fa fa-step-backward"></i> #first#</a>        <span class="first"><i class="fa fa-step-backward"></i> #first#</span>    </li>    <li class="j-prev">        <a class="previous" href="javascript:;"><i class="fa fa-backward"></i> #prev#</a>        <span class="previous"><i class="fa fa-backward"></i> #prev#</span>    </li>    #pageNumFrag#    <li class="j-next">        <a class="next" href="javascript:;">#next# <i class="fa fa-forward"></i></a>        <span class="next">#next# <i class="fa fa-forward"></i></span>    </li>    <li class="j-last">        <a class="last" href="javascript:;">#last# <i class="fa fa-step-forward"></i></a>        <span class="last">#last# <i class="fa fa-step-forward"></i></span>    </li>    <li class="jumpto"><span class="p-input"><input class="form-control input-sm-pages" type="text" size="2.6" value="#pageCurrent#" title="#jumpto#"></span><a class="goto" href="javascript:;" title="#jump#"><i class="fa fa-chevron-right"></i></a></li></ul>',gridPaging:'<ul class="pagination">    <li class="page-total">        <span title="#total#">#count#</span>    </li>    <li class="page-jumpto"><span class="page-input"><input class="form-control input-sm-pages" type="text" size="3.2" value="#pageCurrent#" title="#jumpto#"></span></li>    <li class="page-first btn-nav">        <a href="javascript:;" title="#first#"><i class="fa fa-step-backward"></i></a>    </li>    <li class="page-prev btn-nav">        <a href="javascript:;" title="#prev#"><i class="fa fa-backward"></i></a>    </li>    <li class="page-next btn-nav">        <a href="javascript:;" title="#next#"><i class="fa fa-forward"></i></a>    </li>    <li class="page-last btn-nav">        <a href="javascript:;" title="#last#"><i class="fa fa-step-forward"></i></a>    </li></ul>',gridPageNum:'<li class="page-num#active#"><a href="javascript:;">#num#</a></li>',gridMenu:'<div class="datagrid-menu-box">    <ul>        <li class="datagrid-li-asc"><a href="javascript:;"><span class="icon"><i class="fa fa-sort-amount-asc"></i></span><span class="title">#asc#</span></a></li>        <li class="datagrid-li-desc"><a href="javascript:;"><span class="icon"><i class="fa fa-sort-amount-desc"></i></span><span class="title">#desc#</span></a></li>        <li class="datagrid-li-filter"><a href="javascript:;"><span class="icon"><i class="fa fa-filter"></i></span><span class="title">#filter#</span><span class="arrow"></span></a></li>        <li class="datagrid-li-showhide"><a href="javascript:;"><span class="icon"><i class="fa fa-check-square-o"></i></span><span class="title">#showhide#</span><span class="arrow"></span></a></li>        <li class="datagrid-li-lock"><a href="javascript:;"><span class="icon"><i class="fa fa-lock"></i></span><span class="title">#lock#</span></a></li>        <li class="datagrid-li-unlock disable"><a href="javascript:;"><span class="icon"><i class="fa fa-unlock"></i></span><span class="title">#unlock#</span></a></li>    </ul></div>',gridFilter:'<div class="datagrid-filter-box"><fieldset><legend>#label#</legend><span class="filter-a"></span><span class="filter-and"><select data-toggle="selectpicker" data-container="true" data-width="100%"><option value="and">AND</option><option value="or">OR</option></select></span><span class="filter-b"></span><span class="filter-ok"><button type="button" class="btn-green ok" data-icon="check">#filter#</button><button type="button" class="btn-orange clear" data-icon="remove">#clear#</button></span></fieldset></div>',gridShowhide:'<li data-index="#index#" class="datagrid-col-check"><a href="javascript:;"><i class="fa fa-check-square-o"></i>#label#</a></li>',gridEditBtn:'<button type="button" class="btn-green edit" data-icon="edit">#edit#</button><button type="button" class="btn-green update" data-icon="edit">#update#</button><button type="button" class="btn-green save" data-icon="check">#save#</button><button type="button" class="btn-orange cancel" data-icon="undo">#cancel#</button><button type="button" class="btn-orange delete" data-icon="remove">#del#</button>',gridDialogEditBtns:'<ul>    <li class="pull-left"><button type="button" class="btn btn-orange prev" data-icon="arrow-up">#prev#</button></li>    <li class="pull-left"><button type="button" class="btn btn-orange next" data-icon="arrow-down">#next#</button></li>    <li><button type="button" class="btn btn-red cancel" data-icon="remove">#cancel#</button></li>    <li><button type="button" class="btn btn-default save" data-icon="save">#save#</button></li></ul>',alertBoxFrag:'<div id="bjui-alertMsgBox" class="bjui-alert"><div class="alertContent"><div class="#type#"><div class="alertInner"><h1><i class="fa #fa#"></i>#title#</h1><div class="msg">#message#</div></div><div class="toolBar"><ul>#btnFragment#</ul></div></div></div></div>',alertBtnFrag:'<li><button class="btn btn-#class#" rel="#callback#" type="button">#btnMsg#</button></li>',calendarFrag:'<div id="bjui-calendar">    <div class="main">        <a class="close" href="javascript:;" title="#close#"><i class="fa fa-times-circle"></i></a>        <div class="head">            <table width="100%" border="0" cellpadding="0" cellspacing="2">                <tr>                    <td width="20"><a class="prev" href="javascript:;" title="#prev#"><i class="fa fa-arrow-left"></i></a></td>                    <td><select name="year"></select></td>                    <td><select name="month"></select></td>                    <td width="20"><a class="next" href="javascript:;" title="#next#"><i class="fa fa-arrow-right"></i></a></td>                </tr>            </table>        </div>        <div class="body">            <dl class="dayNames"><dt>7</dt><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>            <dl class="days">\x3c!-- date list --\x3e</dl>            <div style="clear:both;height:0;line-height:0"></div>        </div>        <div class="foot">            <table class="time">                <tr>                    <td>                        <input type="text" class="hh" maxlength="2" data-type="hh" data-start="0" data-end="23">:<input                         type="text" class="mm" maxlength="2" data-type="mm" data-start="0" data-end="59">:<input                         type="text" class="ss" maxlength="2" data-type="ss" data-start="0" data-end="59">                    </td>                    <td><ul><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul></td>                </tr>            </table>            <button type="button" class="clearBtn btn btn-orange">#clear#</button>            <button type="button" class="okBtn btn btn-default">#ok#</button>        </div>        <div class="tm">            <ul class="hh">                <li>0</li>                <li>1</li>                <li>2</li>                <li>3</li>                <li>4</li>                <li>5</li>                <li>6</li>                <li>7</li>                <li>8</li>                <li>9</li>                <li>10</li>                <li>11</li>                <li>12</li>                <li>13</li>                <li>14</li>                <li>15</li>                <li>16</li>                <li>17</li>                <li>18</li>                <li>19</li>                <li>20</li>                <li>21</li>                <li>22</li>                <li>23</li>            </ul>            <ul class="mm">                <li>0</li>                <li>5</li>                <li>10</li>                <li>15</li>                <li>20</li>                <li>25</li>                <li>30</li>                <li>35</li>                <li>40</li>                <li>45</li>                <li>50</li>                <li>55</li>            </ul>            <ul class="ss">                <li>0</li>                <li>10</li>                <li>20</li>                <li>30</li>                <li>40</li>                <li>50</li>            </ul>        </div>    </div></div>',spinnerBtn:'<ul class="bjui-spinner"><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul>',lookupBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="lookupbtn"><i class="fa fa-search"></i></a>',dateBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="datepickerbtn"><i class="fa fa-calendar"></i></a>',navtabCM:'<ul id="bjui-navtabCM">    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</li>    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</li>    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</li></ul>',dialogCM:'<ul id="bjui-dialogCM">    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</span></li>    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</span></li>    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</span></li></ul>',externalFrag:'<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',uploadTemp:'<div id="{fileId}" class="item">    <div class="info">        <span class="up_filename">{fileName}</span><span class="up_confirm" title="#upConfirm#"><i class="fa fa-play-circle-o"></i></span><span class="up_pause" title="#upPause#"><span class="glyphicon glyphicon-pause"></span></span><span class="up_cancel" title="#upCancel#"><i class="fa fa-times-circle-o"></i></span>    </div>    <div class="preview"><span class="img"></span></div>    <div class="progress"><div class="bar"></div></div>    <span class="percent">{percent}</span>    <span class="filesize"><span class="uploadedsize">{uploadedSize}</span>/<span class="totalsize">{fileSize}</span></span></div>',uploadFrag:'<input class="bjui-upload-select-file" style="display:none;" type="file" name="fileselect[]" #multi# accept="#accept#"><a href="javascript:void(0)" class="btn btn-default bjui-upload-select">#btnTxt#</a><div class="queue"></div>',statusCode_503:"HTTP status 503, #statusCode_503#",sessionTimout:"#sessiontimeout#",alertPlhMsg:"#plhmsg#",alertNoCheckGroup:"#nocheckgroup#",alertNotChecked:"#notchecked#",alertSelectMsg:"#selectmsg#",validateErrorMsg:"#validatemsg#",uiTitle:"#uititle#",mainTabTitle:"#mynavtab#"}}(jQuery),function(s){"use strict";s.fn.extend({ajaxUrl:function(i){var n=s(this);n.trigger(BJUI.eventType.beforeAjaxLoad),i.loadingmask&&n.trigger(BJUI.eventType.ajaxStatus),s.ajax({type:i.type||"GET",url:i.url,data:i.data||{},cache:!1,dataType:"html",timeout:BJUI.ajaxTimeout,success:function(t){var e=t.toJson(),a=n.find("> .bjui-ajax-mask");e[BJUI.keys.statusCode]?(e[BJUI.keys.statusCode]===BJUI.statusCode.error?(e[BJUI.keys.message]&&n.alertmsg("error",e[BJUI.keys.message]),n.closest(".bjui-layout").length||(n.closest(".navtab-panel").length?n.navtab("closeCurrentTab"):n.dialog("closeCurrent"))):e[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&(n.closest(".bjui-dialog").length&&n.dialog("closeCurrent"),n.closest(".navtab-panel").length&&n.navtab("closeCurrentTab"),s("body").alertmsg("info",e[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()),a.fadeOut("normal",function(){s(this).remove()})):(n.empty().html(t).append(a).initui(),s.isFunction(i.callback)&&i.callback(t))},error:function(t,e,a){n.bjuiajax("ajaxError",t,e,a),n.closest(".bjui-layout").length||(n.closest(".navtab-panel").length?n.navtab("closeCurrentTab"):n.dialog("closeCurrent")),n.trigger("bjui.ajaxError")},statusCode:{503:function(t,e,a){n.alertmsg("error",FRAG.statusCode_503.replace("#statusCode_503#",BJUI.regional.statusCode_503)||a)},403:function(t,e,a){n.alertmsg("error","登录超时"),BJUI.loadLogin()}}})},loadUrl:function(t,e,a){s(this).ajaxUrl({url:t,data:e,callback:a})},doAjax:function(e){var i,n,o=s(this);e.url?e.callback?(e.callback=e.callback.toFunc(),e.loadingmask&&((i=o.getPageTarget()).trigger(BJUI.eventType.ajaxStatus),n=i.find("> .bjui-ajax-mask")),e.type||(e.type="POST"),e.dataType||(e.dataType="json"),e.cache||(e.cache=!1),e.timeout=BJUI.ajaxTimeout,e.success=function(t){n?e.callback?s.when(e.callback(t)).done(function(){i.trigger("bjui.ajaxStop")}):i.trigger("bjui.ajaxStop"):e.callback(t)},e.error=e.error||function(t,e,a){o.bjuiajax("ajaxError",t,e,a),n&&i.trigger("bjui.ajaxError")},s.ajax(e)):BJUI.debug("The ajax callback is undefined!"):BJUI.debug("The ajax url is undefined!")},getPageTarget:function(){return this.closest(".bjui-layout").length?this.closest(".bjui-layout"):this.closest(".navtab-panel").length?s.CurrentNavtab:s.CurrentDialog},resizePageH:function(){return this.each(function(){if(!s(this).closest(".tab-content").length){var t=s(this),e=t.find("> .bjui-pageHeader"),a=t.find("> .bjui-pageContent"),i=t.find("> .bjui-pageFooter"),n=e.outerHeight()||0,o=i.outerHeight()||0;t.hasClass("navtabPage")&&t.is(":hidden")&&(t.show(),n=e.outerHeight()||0,o=i.outerHeight()||0,t.hide()),i.css("bottom")&&(o+=parseInt(i.css("bottom"))||0),0===o&&t.hasClass("dialogContent")&&(o=5),a.css({top:n,bottom:o})}})},getMaxIndexObj:function(t){var a=0,i=0;return t.each(function(t){var e=parseInt(s(this).css("zIndex"))||1;a<e&&(a=e,i=t)}),t.eq(i)},serializeJson:function(){var t={},e=this.serializeArray();return s.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},isTag:function(t){return!!t&&(!!s(this).prop("tagName")&&s(this)[0].tagName.toLowerCase()===t)},isBind:function(t){var e=s(this).data("events");return e&&t&&e[t]},log:function(t){return this.each(function(){console&&console.log("%s: %o",t,this)})}}),s.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/).test(this)},includeChinese:function(){return new RegExp(/[\u4E00-\u9FA5]/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},replaceSuffix2:function(t){return this.replace(/\-(i)([0-9]+)$/,"-i"+t).replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replacePlh:function(a){return a=a||s(document),this.replace(/{\/?[^}]*}/g,function(t){var e=a.find(t.replace(/[{}]+/g,""));return e&&e.val()?e.val():t})},replaceMsg:function(t){return this.replace(new RegExp("({.*})","g"),t)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},replaceTmById:function(t){var a=t||s(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){var e=a.find("#"+t.replace(/[{}]+/g,""));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp("{/?[^}]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!==e&&"\n"!==e&&"\t"!==e&&"\r"!==e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1===this.indexOf("://"+document.domain)},toBool:function(){return"true"===this.toLowerCase()},toJson:function(){var t=this;try{return"object"==typeof t&&(t=t.toString()),t.trim().match("^{(.+:.+,*){1,}}$")?JSON.parse(this):this}catch(t){return this}},toObj:function(){var e=null;try{e=new Function("return "+this)()}catch(t){e=this,BJUI.debug('String toObj：Parse "String" to "Object" error! Your str is: '+this)}return e},toFunc:function(){if(this&&0!==this.length){if(this.startsWith("function"))return new Function("return "+this)();for(var t=this.split("."),e=window,a=0;a<t.length;a++)e=e[t[a]];return"function"==typeof e?e:void 0}},setUrlParam:function(t,e){var a=this,i=a;if(null!=i&&"undefined"!==i&&""!==i){e=encodeURIComponent(e);var n=new RegExp("(^|)"+t+"=([^&]*)(|$)"),o=t+"="+e;i=null!=a.match(n)?a.replace(n,o):a.match("[?]")?a+"&"+o:a+"?"+o}return i}}),s.extend(Function.prototype,{toFunc:function(){return this}}),s.extend(Array.prototype,{remove:function(t){return t<0?this:this.slice(0,t).concat(this.slice(t+1,this.length))},unique:function(){var t=[];this.sort();for(var e=0;e<this.length;e++)this[e]!==this[e+1]&&(t[t.length]=this[e]);return t},myIndexOf:function(t){return this.indexOf(t)},toJson:function(){var t={};return s.each(this,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}),s.isJson=function(t){var e=!0;try{e=s.parseJSON(t)}catch(t){return!1}return!!e}}(jQuery),function(t){"use strict";function e(){}e.prototype.destroyModules=function(t){try{var e=t.find(".bjui-upload > .uploadify");e.length&&e.uploadify("destroy");var a=t.find('[data-toggle="colorpicker"]');a.length&&a.colorpicker("destroy")}catch(t){BJUI.debug(t)}},BJUI.ModuleFixed=new e}(jQuery),function(s){"use strict";var l=function(t,e){this.$element=s(t),this.options=e};l.prototype.init=function(){var e=this;this.options.$obj=this.$element,this.options.obj&&(this.options.$obj=this.options.obj),this.options.event?this.start(this.options.event):this.$element.find(this.options.selector).bind("mousedown",function(t){e.start.apply(e,[t])})},l.prototype.start=function(t){document.onselectstart=function(t){return!1};var e=this;this.options.oleft=parseInt(this.$element.css("left"))||0,this.options.otop=parseInt(this.$element.css("top"))||0,s(document).bind("mouseup.bjui.basedrag",function(t){e.stop.apply(e,[t])}).bind("mousemove.bjui.basedrag",function(t){e.drag.apply(e,[t])})},l.prototype.drag=function(t){t||(t=window.event);var e=this.options,a=e.oleft+(t.pageX||t.clientX)-e.event.pageX,i=e.otop+(t.pageY||t.clientY)-e.event.pageY;if(i<1&&(i=0),"horizontal"===e.move)e.minW&&a>=parseInt(this.options.$obj.css("left"))+e.minW&&e.maxW&&a<=parseInt(this.options.$obj.css("left"))+e.maxW?this.$element.css("left",a):e.scop&&e.relObj&&(parseInt(e.relObj.css("left")),e.cellMinW,this.$element.css("left",a));else if("vertical"===e.move)this.$element.css("top",i);else{var n=e.selector?this.options.$obj.find(e.selector):this.options.$obj;a>=2*-n.outerWidth()/3&&0<=i&&a+n.outerWidth()/3<s(window).width()&&i+n.outerHeight()<s(window).height()&&this.$element.css({left:a,top:i})}return e.drag&&e.drag.apply(this.$element,[this.$element,t]),this.preventEvent(t)},l.prototype.stop=function(t){return s(document).unbind("mousemove.bjui.basedrag").unbind("mouseup.bjui.basedrag"),this.options.stop&&this.options.stop.apply(this.$element,[this.$element,t]),this.options.event&&this.destroy(),document.onselectstart=function(t){return!0},this.preventEvent(t)},l.prototype.preventEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},l.prototype.destroy=function(){this.$element.removeData("bjui.basedrag"),this.options.nounbind||this.$element.unbind("mousedown")};var t=s.fn.basedrag;s.fn.basedrag=function(i){var n=arguments,o=i;return this.each(function(){var t=s(this),e=s.extend({},t.data(),"object"==typeof i&&i),a=t.data("bjui.basedrag");a||t.data("bjui.basedrag",a=new l(this,e)),"string"==typeof o&&s.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})},s.fn.basedrag.Constructor=l,s.fn.basedrag.noConflict=function(){return s.fn.basedrag=t,this}}(jQuery),function(d){"use strict";d(function(){d("#bjui-leftside").after("\x3c!-- Adjust the width of Left slide --\x3e").after(FRAG.splitBar).after(FRAG.splitBarProxy)});var s=function(t,e){this.$element=d(t),this.$bar=this.$element.find("#bjui-sidebar"),this.$sbar=this.$element.find("#bjui-sidebar-s"),this.$accordionmenu=this.$bar.find("#bjui-accordionmenu"),this.$lock=this.$bar.find("> .toggleCollapse > .lock"),this.$navtab=d("#bjui-navtab"),this.$collapse=this.$sbar.find(".collapse"),this.$split=d("#bjui-splitBar"),this.$split2=d("#bjui-splitBarProxy"),this.isfloat=!1,this.options=e};function n(i){var n=arguments,o=i;return this.each(function(){var t=d(this),e=d.extend({},t.data(),"object"==typeof i&&i),a=t.data("bjui.slidebar");a||t.data("bjui.slidebar",a=new s(this,e)),"string"==typeof o&&d.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}s.prototype.lock=function(){var t=this,e=t.$bar.outerWidth()+4,a=BJUI.windowWidth-d("#bjui-sidebar").width()-6;t.faLock(),t.hoverLock(),t.$sbar.animate({left:-10},20),t.$bar.removeClass("shadown"),t.isfloat=!1,t.$navtab.animate({left:e,width:a},500,function(){d(window).trigger(BJUI.eventType.resizeGrid)}),t.$split.show()},s.prototype.unlock=function(){var t=this,e=0-t.$bar.outerWidth(),a=BJUI.windowWidth-6;t.faUnLock(),t.hoverUnLock(),t.$navtab.animate({left:6,width:a},400),t.$bar.animate({left:e},500,function(){t.$sbar.animate({left:0},200),t.$split.hide(),d(window).trigger(BJUI.eventType.resizeGrid)}),t.isfloat=!1},s.prototype.float=function(){this.$sbar.animate({left:-10},200),this.$bar.addClass("shadown").animate({left:0},500),this.isfloat=!0},s.prototype.hideFloat=function(){var t=this,e=0-t.$bar.outerWidth();t.$bar.animate({left:e-10},500,function(){t.$sbar.animate({left:0},100)}),t.isfloat=!1},s.prototype.hoverLock=function(){var t=this;t.$lock.hover(function(){t.tipUnLock(),t.faUnLock()},function(){t.tipLock(),t.faLock()})},s.prototype.hoverUnLock=function(){var t=this;t.$lock.hover(function(){t.tipLock(),t.faLock()},function(){t.tipUnLock(),t.faUnLock()})},s.prototype.tipLock=function(){this.$lock.tooltip("destroy").tooltip({title:"保持锁定，始终显示导航栏",container:"body"})},s.prototype.tipUnLock=function(){this.$lock.tooltip("destroy").tooltip({title:"解除锁定，自动隐藏导航栏",container:"body"})},s.prototype.faLock=function(){this.$lock.find("> i").attr("class","fa fa-lock")},s.prototype.faUnLock=function(){this.$lock.find("> i").attr("class","fa fa-unlock-alt")},s.prototype.init=function(){var n=this;BJUI.ui.showSlidebar?n.hoverLock():n.unlock(),this.$lock.off("click.bjui.slidebar").on("click.bjui.slidebar",function(){n.isfloat?n.lock():n.unlock(),BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar}),this.$collapse.hover(function(){n.float(),n.$navtab.click(function(){n.isfloat&&n.hideFloat()})}),this.$split.mousedown(function(e){n.$split2.each(function(){var t=d(this);return setTimeout(function(){t.show()},100),t.css({visibility:"visible",left:n.$split.css("left")}).basedrag(d.extend(n.options,{obj:n.$bar,move:"horizontal",event:e,stop:function(){d(this).css("visibility","hidden");var t=parseInt(d(this).css("left"))-parseInt(n.$split.css("left")),e=n.$bar.outerWidth()+t,a=parseInt(n.$navtab.css("left"))+t,i=n.$navtab.outerWidth()-t;n.$bar.css("width",e),n.$split.css("left",d(this).css("left")),n.$navtab.css({left:a,width:i})}})),!1})}),d("#bjui-hnav-navbar-box").length&&n.moveHnav(),n.$accordionmenu.collapse().on("hidden.bs.collapse",function(t){d(this).find("> .panel > .panel-heading").each(function(){var t=d(this);if(t.find("> h4 > a").hasClass("collapsed")){t.removeClass("active");var e=t.parent();e.is(":last-child")&&e.removeClass("last-child")}})}).on("shown.bs.collapse",function(t){d(this).find("> .panel > .panel-heading").each(function(){var t=d(this);if(!t.find("> h4 > a").hasClass("collapsed")){t.addClass("active");var e=t.parent();e.is(":last-child")&&e.addClass("last-child")}})}),n.clickMenu()},s.prototype.clickMenu=function(){var o=this;o.$bar.on("click","ul.menu-items li > a",function(t){t.preventDefault();var e=d(this),a=e.parent(),i=e.data("options").toObj(),n=a.find("> .menu-items-children");a.addClass("active"),i&&(i.url=e.attr("href"),i.url&&"javascript:;"!==i.url&&(i.onClose=function(){a.removeClass("active")},i.onSwitch=function(){o.$accordionmenu.find("ul.menu-items li").removeClass("switch"),a.addClass("switch")},i.title||(i.title=e.text()),i.target?e.dialog(i):e.navtab(i))),n.length&&a.toggleClass("open")})},s.prototype.moveHnav=function(){var t=d("#bjui-hnav-navbar-box"),e=t.find("> #bjui-hnav-navbar"),a=t.prev(),i=t.next();a.hover(function(){e.stop().animate({left:0},2e3,function(){a.hide()})},function(){e.stop(),t.data("hnav.move")&&i.show()}).on("click",function(){return e.stop().animate({left:0},"fast",function(){a.hide()}),!1}),i.hover(function(){e.stop().animate({left:t.width()-t.data("hnav.liw")-10},2e3,function(){i.hide()})},function(){e.stop(),"0px"!==e.css("left")&&a.show()}).on("click",function(){return e.stop().animate({left:t.width()-t.data("hnav.liw")-10},"fast",function(){i.hide()}),!1})},s.prototype.initHnav=function(){var t,e,s,a,l=this.$element.text().trim(),i=this.$element.parent(),r=d("#bjui-accordionmenu");t=i.find("> .items > ul.ztree"),e=i.find("> .items > ul.menu-items"),(t.length||e.length)&&(t.length&&(a=t),e.length&&(a=a?a.add(e):e,e.find("a").each(function(){var t=d(this),e=t.data("options");!t.data("icon.init")&&e&&"string"==typeof e&&(e=e.toObj())&&e.faicon&&(e.faicon=e.faicon.trim(),e.faicon.startsWith("fa-")&&(e.faicon=e.faicon.substr(3)),t.prepend('<i class="fa fa-'+e.faicon+'"></i>').data("icon.init",!0).attr("title",t.text()))})),r.empty(),a.each(function(t){var e,a,i,n=d(this),o=n.data("faicon")||"dot-circle-o";n.data("tit")&&(l=n.data("tit")),a=t?"collapsed":"",i=t?"":" in",e=FRAG.slidePanel.replaceAll("#id#","bjui-collapse"+t).replaceAll("#title#",l).replaceAll("#righticon#",'<i class="fa fa-angle-down"></i>').replaceAll("#class#",a).replaceAll("#bodyclass#",i),e=o?e.replaceAll("#icon#",'<i class="fa fa-'+o+'"></i>'):e.replaceAll("#icon#",""),(s=d(e)).find("> .panel-collapse > .panel-body").append(n.removeAttr("data-noinit")),r.append(s),t||s.collapse("show")}),d("#bjui-sidebar").initui(),i.addClass("active").data("bjui.slidebar.hnav.panels",r.find("> .panel")).siblings().removeClass("active"))};var t=d.fn.slidebar;d.fn.slidebar=n,d.fn.slidebar.Constructor=s,d.fn.basedrag.noConflict=function(){return d.fn.slidebar=t,this},d(document).one(BJUI.eventType.afterInitUI,function(t){d("#bjui-leftside").slidebar({minW:150,maxW:700})}),d(document).on("click.bjui.slidebar.data-api",'[data-toggle="slidebar"]',function(t){var e=d(this).parent(),a=d("#bjui-accordionmenu"),i=e.data("bjui.slidebar.hnav.panels");a.find("> .panel").detach(),i&&i.length?(a.append(i),e.addClass("active").siblings().removeClass("active")):n.call(d(this),"initHnav"),t.preventDefault()})}(jQuery),function(c){"use strict";var u,h,p;c(function(){u=c('<div id="bjui-contextmenu"></div>').hide(),h=c('<div id="bjui-contextmenuShadow"></div>').hide(),p=[],c("body").append("\x3c!-- contextmenu --\x3e").append(u).append(h)});var s=function(t,e){this.$element=c(t),this.options=e};s.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null},s.prototype.init=function(){var e=this,a=this.options;if(a.id){p.push({id:a.id,shadow:a.shadow,bindings:a.bindings||{},ctrSub:a.ctrSub});var i=p.length-1;this.$element.on("contextmenu",function(t){return e.display(i,this,t,a),!1})}},s.prototype.display=function(t,a,e,i){var n=this,o=p[t],s=BJUI.regional[o.id],l=FRAG[o.id];c.each(s,function(t,e){l=l.replace("#"+t+"#",s[t])}),u.html(l),c.each(o.bindings,function(t,e){c('[rel="'+t+'"]',u).on("click",function(t){n.hide(),e(c(a),c("#bjui-"+o.id))})});var r=e.pageX,d=e.pageY;c(window).width()<r+u.width()&&(r-=u.width()),c(window).height()<d+u.height()&&(d-=u.height()),u.css({left:r,top:d}).show(),o.shadow&&h.css({width:u.width(),height:u.height(),left:r+3,top:d+3}).show(),c(document).one("click",n.hide),c.isFunction(o.ctrSub)&&o.ctrSub(c(a),c("#bjui-"+o.id))},s.prototype.hide=function(){u.hide(),h.hide()},s.prototype.show=function(a){var i=this;a.items&&a.items.length&&i.$element.on("contextmenu",function(t){var e=!0;return a.exclude&&i.$element.find(a.exclude).each(function(){if(this===t.target||c(this).find(t.target).length)return e=!1,null}),e?(i.custom(a.items,t),!1):(t.stopPropagation(),!e)})},s.prototype.custom=function(t,e){u.empty().html("<ul></ul>");var i,n=this,a=n.options,o=u.find("> ul");c.each(t,function(t,e){var a="";e.icon&&(a='<i class="fa fa-'+e.icon+'"></i>'),"diver"===e.title?i=c('<li class="diver"></li>'):(i=c('<li><span class="icon">'+a+'</span><span class="title">'+e.title+"</span></li>"),e.func&&"string"==typeof e.func&&(e.func=e.func.toFunc()),e.func&&i.on("click",function(t){n.hide(),e.func(n.$element,i)})),i.appendTo(o)});var s=e.pageX,l=e.pageY;c(window).width()<s+u.width()&&(s-=u.width()),c(window).height()<l+u.height()&&(l-=u.height()),u.css({left:s,top:l}).show(),a.shadow&&h.css({width:u.width(),height:u.height(),left:s+3,top:l+3}).show(),c(document).one("click",n.hide)};var t=c.fn.contextmenu;c.fn.contextmenu=function(i){var n=arguments,o=i;return this.each(function(){var t=c(this),e=c.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.contextmenu");a||t.data("bjui.contextmenu",a=new s(this,e)),"string"==typeof o&&c.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})},c.fn.contextmenu.Constructor=s,c.fn.contextmenu.noConflict=function(){return c.fn.contextmenu=t,this}}(jQuery),function(u){"use strict";var h,o,s,t,p,f,i,n,l,g,r,d,m;u(function(){var a,e;h=0,t=u("#bjui-navtab"),p=t.find(".navtab-tab"),f=t.find(".navtab-panel"),i=t.find(".tabsLeft"),n=t.find(".tabsRight"),l=t.find(".tabsMore"),g=t.find(".tabsMoreList"),r=p.find("li:first"),d=g.find("li:first"),i.click(function(){u(this).navtab("scrollPrev")}),n.click(function(){u(this).navtab("scrollNext")}),l.click(function(){g.show()}),u(document).on("click.bjui.navtab.switchtab",function(t){var e="I"===t.target.tagName?u(t.target).parent():u(t.target);l[0]!==e[0]&&g.hide()}),r.navtab("contextmenu",r).click(function(){u(this).navtab("switchTab","main")}).find("> a > span").html(function(t,e){return a=e.replace("#maintab#",BJUI.regional.maintab)}),e=u.extend({},b.DEFAULTS,r.data(),{id:"main",title:a}),r.data("initOptions",e).data("options",e),r.attr("data-url")&&u(document).one(BJUI.eventType.initUI,function(t){r.removeAttr("data-url").navtab("reload",e)}),setTimeout(function(){r.navtab("switchTab","main")},50),d.click(function(){u(this).hasClass("active")?g.hide():u(this).navtab("switchTab","main")}).find("> a").html(function(t,e){return e.replace("#maintab#",BJUI.regional.maintab)})});var b=function(t,e){this.$element=u(t),this.options=e,this.tools=this.TOOLS()};function c(i){var n=arguments,o=i;return this.each(function(){var t=u(this),e=u.extend({},b.DEFAULTS,"object"==typeof i&&i),a=t.data("bjui.navtab");a||t.data("bjui.navtab",a=new b(this,e)),"string"==typeof o&&u.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):(a=new b(this,e)).openTab()})}b.DEFAULTS={id:void 0,title:"New tab",url:void 0,type:"GET",data:{},loadingmask:!0,fresh:!1,autorefresh:!1,onLoad:null,beforeClose:null,onClose:null},b.prototype.TOOLS=function(){var c=this;return{getDefaults:function(){return b.DEFAULTS},getTabs:function(){return p.find("> li")},getPanels:function(){return f.find("> div")},getMoreLi:function(){return g.find("> li")},getTab:function(t){var e=this.indexTabId(t);if(0<=e)return this.getTabs().eq(e)},getPanel:function(t){var e=this.indexTabId(t);if(0<=e)return this.getPanels().eq(e)},getTabsW:function(t,e){return this.tabsW(this.getTabs().slice(t,e))},tabsW:function(t){var e=0;return t.each(function(){e+=u(this).outerWidth(!0)}),e},indexTabId:function(e){if(!e)return-1;var a=-1;return this.getTabs().each(function(t){u(this).data("initOptions").id===e&&(a=t)}),a},getLeft:function(){return p.position().left},getScrollBarW:function(){return t.width()-55},visibleStart:function(){for(var t=this.getLeft(),e=0,a=this.getTabs(),i=0;i<a.size();i++){if(0<=e+t)return i;e+=a.eq(i).outerWidth(!0)}return 0},visibleEnd:function(){for(var t=this.getLeft(),e=0,a=this.getTabs(),i=0;i<a.size();i++)if((e+=a.eq(i).outerWidth(!0))+t>this.getScrollBarW())return i;return a.size()},scrollPrev:function(){var t=this.visibleStart();0<t&&this.scrollTab(-this.getTabsW(0,t-1))},scrollNext:function(){var t=this.visibleEnd();t<this.getTabs().size()&&this.scrollTab(-this.getTabsW(0,t+1)+this.getScrollBarW())},scrollTab:function(t,e){p.animate({left:t},200,function(){c.tools.ctrlScrollBtn()})},scrollCurrent:function(){var t=this.tabsW(this.getTabs()),e=this.getScrollBarW();t<=e?this.scrollTab(0):this.getLeft()<e-t?this.scrollTab(e-t):h<this.visibleStart()?this.scrollTab(-this.getTabsW(0,h)):h>=this.visibleEnd()&&this.scrollTab(e-this.getTabs().eq(h).outerWidth(!0)-this.getTabsW(0,h))},ctrlScrollBtn:function(){var t=this.tabsW(this.getTabs());this.getScrollBarW()>t?(i.hide(),n.hide(),p.parent().removeClass("tabsPageHeaderMargin")):(i.show().removeClass("tabsLeftDisabled"),n.show().removeClass("tabsRightDisabled"),p.parent().addClass("tabsPageHeaderMargin"),0<=this.getLeft()?i.addClass("tabsLeftDisabled"):this.getLeft()<=this.getScrollBarW()-t&&n.addClass("tabsRightDisabled"))},switchTab:function(t){var e=this.getTabs().removeClass("active").eq(t).addClass("active"),a=this.getPanels(),i=a.eq(t),n=c.options.onSwitch?c.options.onSwitch.toFunc():null;e.data("reloadFlag")?(a.hide(),i.show(),c.refresh(e.data("initOptions").id)):(a.hide(),i.find(".bjui-ajax-mask").length?i.show():(i.addClass("fade").removeClass("in").show(),u.support.transition?i.one("bsTransitionEnd",function(){i.addClass("in")}).emulateTransitionEnd(10):i.removeClass("fade"))),this.getMoreLi().removeClass("active").eq(t).addClass("active"),h=t,this.scrollCurrent(),o=e,u.CurrentNavtab=s=i,n&&n.apply(c),i.trigger("bjui.navtab.switch")},closeTab:function(t,e){var a=this.getTabs().eq(t),i=this.getMoreLi().eq(t),n=this.getPanels().eq(t),o=a.data("options"),s=o.beforeClose?o.beforeClose.toFunc():null,l=o.onClose?o.onClose.toFunc():null,r=!0;if(s&&(r=s.apply(c,[n])),r){if(BJUI.ModuleFixed.destroyModules(n),a.remove(),i.remove(),n.trigger(BJUI.eventType.beforeCloseNavtab).remove(),m&&clearInterval(m),l&&l.apply(c),t<=h&&h--,e){var d=this.indexTabId(e);0<d&&(h=d)}this.scrollCurrent(),this.switchTab(h)}else c.tools.switchTab(t)},closeOtherTab:function(e){e=e||h,this.getTabs().each(function(t){0<t&&e!==t&&u(this).find("> .close").trigger("click")})},loadUrlCallback:function(t){t.find(":button.btn-close").click(function(){c.closeCurrentTab()})},reload:function(t,e){e=e||t.data("reloadFlag");var a=t.data("options");if(e){t.data("reloadFlag",!1);var i=c.tools.getPanel(a.id);t.hasClass("external")?c.openExternal(a.url,i):c.tools.reloadTab(i,a)}},reloadTab:function(e,t){var a=t.onLoad?t.onLoad.toFunc():null,i=t.autorefresh&&(isNaN(String(t.autorefresh))?15:t.autorefresh);BJUI.ModuleFixed.destroyModules(e),e.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:t.type||"GET",url:t.url,data:t.data||{},loadingmask:t.loadingmask,callback:function(t){c.tools.loadUrlCallback(e),a&&a.apply(c,[e]),m&&clearInterval(m),i&&(m=setInterval(function(){e.navtab("refresh")},1e3*i)),BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e)}})}}},b.prototype.contextmenu=function(t){var i=this;t.contextmenu({id:"navtabCM",bindings:{reload:function(t,e){i.refresh(t.data("initOptions").id)},closeCurrent:function(t,e){var a=t.data("initOptions").id;a?i.closeTab(a):i.closeCurrentTab()},closeOther:function(t,e){if(0===t.index())i.closeAllTab();else{var a=i.tools.indexTabId(t.data("initOptions").id);i.tools.closeOtherTab(0<a?a:h)}},closeAll:function(t,e){i.closeAllTab()}},ctrSub:function(t,e){var a=e.find('[rel="reload"]'),i=e.find('[rel="closeCurrent"]');0===t.index()&&(i.addClass("disabled"),t.data("url")||a.addClass("disabled"))}})},b.prototype.openTab=function(){var a=this,t=this.$element,i=this.options,e=this.tools;if(!i.url&&i.href&&(i.url=i.href),i.url){if(i.url=decodeURI(i.url).replacePlh(t.closest(".unitBox")),!i.url.isFinishedTm())return t.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Navtab Plugin: The new navtab's url is incorrect, url: "+i.url);i.url=encodeURI(i.url);var n,o,s=i.id?e.indexTabId(i.id):h;if(i.id||BJUI.ui.overwriteHomeTab||0!==s||(i.id="navtab",s=-1),0<=s){i.id||delete i.id,n=e.getTabs().eq(s),o=e.getPanels().eq(s);var l=n.data("initOptions"),r=u.extend({},l,i);(l.fresh||i.fresh||l.url!==i.url)&&a.reload(r),h=s}else{n=u('<li><a href="javascript:" title="#title#"><span>#title#</span></a><span class="close">&times;</span></li>'.replaceAll("#title#",i.title)),o=u('<div class="navtabPage unitBox"></div>');var d=u('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",i.title));n.appendTo(p),o.appendTo(f),d.appendTo(g),n.data("options",i).data("initOptions",i),i.external||i.url&&i.url.isExternalUrl()?(n.addClass("external"),this.openExternal(i.url,o)):(n.removeClass("external"),e.reloadTab(o,i)),h=e.getTabs().length-1,this.contextmenu(n),n.on("click",function(t){var e=u(t.target);if(e.hasClass("close"))a.closeTab(i.id);else{if(e.closest("li").hasClass("active"))return!1;a.switchTab(i.id)}}),d.on("click",function(){a.switchTab(i.id)})}e.switchTab(h),e.scrollCurrent()}else BJUI.debug("Navtab Plugin: Error trying to open a navtab, url is undefined!")},b.prototype.closeTab=function(t){var e=this.tools.indexTabId(t);0<e&&this.tools.closeTab(e)},b.prototype.closeCurrentTab=function(t){0<h&&this.tools.closeTab(h,t)},b.prototype.closeAllTab=function(){this.tools.getTabs().find("> .close").each(function(){u(this).trigger("click")})},b.prototype.reloadFlag=function(t){for(var e=t.split(","),a=0;a<e.length;a++){var i=this.tools.getTab(e[a].trim());i&&(this.tools.indexTabId(e[a])===h?this.tools.reload(i,!0):i.data("reloadFlag",!0))}},b.prototype.switchTab=function(t){var e=this.tools.indexTabId(t);this.tools.switchTab(e)},b.prototype.scrollPrev=function(){this.tools.scrollPrev()},b.prototype.scrollNext=function(){this.tools.scrollNext()},b.prototype.refresh=function(t){var e;(e=t?"string"==typeof t?this.tools.getTab(t):t:o)&&e.length&&(this.tools.getPanel(e.data("initOptions").id).removeData("bjui.clientPaging"),this.reload(e.data("initOptions")))},b.prototype.reload=function(t,e){var a=this,i=u.extend({},"object"==typeof t&&t),n=i.id?this.tools.getTab(i.id):this.tools.getTabs().eq(h);if(n){var o=n.data("initOptions")||{},s=u.extend({},o,i),l=function(){o.title!==s.title&&n.find("> a").attr("title",s.title).find("> span").html(s.title),e||n.data("initOptions",s),n.data("options",s),a.tools.reload(n,!0)};i.reloadWarn?this.$element.alertmsg("confirm",i.reloadWarn,{okCall:function(){l()}}):l()}},b.prototype.reloadForm=function(t,e){var a,i,n=u.extend({},"object"==typeof e&&e);if(i="string"==typeof e?(a=this.tools.getTab(e),this.tools.getPanel(e)):(a=n.id?this.tools.getTab(n.id):this.tools.getTabs().eq(h),n.id?this.tools.getPanel(n.id):this.tools.getPanels().eq(h)),a&&i){if(!a.hasClass("external")){var o=i.find("#pagerForm"),s={},l={};if(o.attr("action")&&(n.url=o.attr("action")),o&&o.length){if(l=o.serializeJson(),e&&e.type||(n.type=o.attr("method")||"POST"),t){var r=BJUI.pageInfo;for(var d in l[r.orderDirection]=l[r.orderField]="",i.data("bjui.clientPaging")&&(i.data("bjui.clientPaging").orderDirection=i.data("bjui.clientPaging").orderField=""),r)r.hasOwnProperty(d)&&(s[r[d]]=l[r[d]])}else s=l;n.data=u.extend({},n.data||{},s)}}this.reload(n,!0)}},b.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(h)},b.prototype.checkTimeout=function(){var t=JSON.parse(s.html());t&&t[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&this.closeCurrentTab()},b.prototype.openExternal=function(t,e){var a=e.closest(".navtab-panel").height();e.html(FRAG.externalFrag.replaceAll("{url}",t).replaceAll("{height}",a+"px"))};var e=u.fn.navtab;u.fn.navtab=c,u.fn.navtab.Constructor=b,u.fn.navtab.noConflict=function(){return u.fn.navtab=e,this},u(document).on("click.bjui.navtab.data-api",'[data-toggle="navtab"]',function(t){var e=u(this),a=e.attr("href"),i=e.data(),n=i.options;n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&u.extend(i,n)),i.title||(i.title=e.text()),a&&!i.url&&(i.url=a),c.call(e,i),t.preventDefault()})}(jQuery),function(d){"use strict";var l,r,c;d(function(){r="dialogShadow",c=u.ZINDEX,d("body").append("\x3c!-- dialog resizable --\x3e").append(FRAG.resizable)});var u=function(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()};function o(i){var n=arguments,o=i;return this.each(function(){var t=d(this),e=d.extend({},u.DEFAULTS,BJUI.dialog,"object"==typeof i&&i),a=t.data("bjui.dialog");a||t.data("bjui.dialog",a=new u(this,e)),"string"==typeof o&&d.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):(a=new u(this,e)).open()})}u.DEFAULTS={id:"dialog",title:"New Dialog",url:void 0,type:"GET",data:{},loadingmask:!0,width:500,height:300,minW:65,minH:40,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!1,onLoad:null,beforeClose:null,onClose:null},u.ZINDEX=30,u.prototype.TOOLS=function(){var s=this;return{getDefaults:function(){return d.extend(u.DEFAULTS,BJUI.dialog)},init:function(t){var e=s.options.width>s.options.minW?s.options.width:s.options.minW,a=s.options.height>s.options.minH?s.options.height:s.options.minH,i=d(window).width(),n=d(window).height(),o=s.options.max?0:(n-a)/2;i<e&&(e=i),n<a&&(a=n),t.height(a).width(e).show().css({left:(i-e)/2,top:0,opacity:.1}).animate({top:0<o?o:0,opacity:1}).addClass(r).find("> .dialogContent").height(a-d("> .dialogHeader",t).outerHeight()-6),d("body").find("> .bjui-dialog-container").not(t).removeClass(r)},reload:function(e,t){var a,i=e.find("> .dialogContent");if(t=t||e.data("initOptions"),a=t.onLoad?t.onLoad.toFunc():null,e.trigger(BJUI.eventType.beforeLoadDialog),BJUI.ModuleFixed.destroyModules(e),t.url)i.ajaxUrl({type:t.type||"GET",url:t.url,data:t.data||{},loadingmask:t.loadingmask,callback:function(t){a&&a.apply(s,[e]),BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e)}});else if(t.target){var n=d(t.target).html()||e.data("bjui.dialog.target");d(t.target).empty(),e.data("bjui.dialog.target",n),i.trigger(BJUI.eventType.beforeAjaxLoad).html(n).initui(),a&&a.apply(s,[e])}},resizeContent:function(t,e,a){t.find("> .dialogContent").css({width:e-12,height:a-t.find("> .dialogHeader").outerHeight()-6}).resizePageH(),d(window).trigger(BJUI.eventType.resizeGrid)}}},u.prototype.open=function(){var a=this,i=a.options,t=d("body"),n=t.data(i.id);if(i.target&&d(i.target).length)i.url=void 0;else{if(!i.url&&i.href&&(i.url=i.href),!i.url)return void BJUI.debug("Dialog Plugin: Error trying to open a dialog, url is undefined!");if(i.url=decodeURI(i.url).replacePlh(a.$element.closest(".unitBox")),!i.url.isFinishedTm())return a.$element.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Dialog Plugin: The new dialog's url is incorrect, url: "+i.url);i.url=encodeURI(i.url)}if(n){var e=n.data("initOptions")||i;this.switchDialog(n),n.is(":hidden")&&n.show(),(e.fresh||i.fresh||!e.url||e.url!==i.url)&&(a.reload(i),n.data("initOptions",i))}else{var o=BJUI.regional.dialog,s=FRAG.dialog.replace("#close#",o.close).replace("#maximize#",o.maximize).replace("#restore#",o.restore).replace("#minimize#",o.minimize).replace("#title#",o.title);(n=d(s).data("options",i).data("initOptions",i).css("zIndex",c+=1).hide().appendTo(t)).find("> .dialogHeader > h1 > span.title").html(i.title),this.tools.init(n),i.maxable?n.find("a.maximize").show():n.find("a.maximize").hide(),i.minable?n.find("a.minimize").show():n.find("a.minimize").hide(),i.max&&a.maxsize(n),i.mask?this.addMask(n):i.minable&&d.fn.taskbar&&this.$element.taskbar({id:i.id,title:i.title}),n.on("click",function(t){d(t.target).data("bjui.dialog")||l&&l[0]!==n[0]&&a.switchDialog(n)}).on("click",".btn-close",function(t){a.close(n),t.preventDefault()}).on("click",".dialogHeader > a",function(t){var e=d(this);e.hasClass("close")&&a.close(n),e.hasClass("minimize")&&a.minimize(n),e.hasClass("maximize")&&(a.switchDialog(n),a.maxsize(n)),e.hasClass("restore")&&a.restore(n),t.preventDefault(),t.stopPropagation()}).on("dblclick",".dialogHeader > h1",function(t){i.maxable&&(n.find("> .dialogHeader > a.restore").is(":hidden")?n.find("a.maximize").trigger("click"):n.find("> .dialogHeader > a.restore").trigger("click"))}).on("mousedown.bjui.dialog.drag",".dialogHeader > h1",function(t){a.switchDialog(n),i.drawable&&!n.data("max")&&(n.data("bjui.dialog.task",!0),setTimeout(d.proxy(function(){n.data("bjui.dialog.task")&&a.drag(t,n)},a),150),t.preventDefault())}).on("mouseup.bjui.dialog.drag",".dialogHeader > h1",function(t){n.data("bjui.dialog.task",!1)}).on("mousedown.bjui.dialog.resize",'div[class^="resizable"]',function(t){if(i.drawable&&!n.data("max")){var e=d(this);a.switchDialog(n),a.resizeInit(t,d("#bjui-resizable"),n,e),e.show(),t.preventDefault()}}).on("mouseup.bjui.dialog.resize",'div[class^="resizable"]',function(t){t.preventDefault()}),t.data(i.id,n),this.tools.reload(n,i)}d.CurrentDialog=l=n},u.prototype.addMask=function(t){var e=t.data("bjui.dialog.mask");t.wrap('<div style="z-index:'+c+'" class="bjui-dialog-wrap"></div>'),t.find("> .dialogHeader > a.minimize").hide(),e&&e.length||((e=d(FRAG.dialogMask)).css("zIndex",1).show().insertBefore(t),t.data("bjui.dialog.mask",e))},u.prototype.refresh=function(t){if(t&&"string"==typeof t)for(var e=t.split(","),a=0;a<e.length;a++){var i=d("body").data(e[a].trim());i&&(i.removeData("bjui.clientPaging"),this.tools.reload(i))}else l.removeData("bjui.clientPaging"),this.tools.reload(l)},u.prototype.reload=function(t,e){var a=this,i=d.extend({},"object"==typeof t&&t),n=i.id&&d("body").data(i.id)||a.getCurrent();if(n&&n.length){var o=n.data("initOptions"),s=d.extend({},o,i),l=function(){var t=n.find("> .dialogContent");o.width!==s.width&&(s.max?(n.width(s.width),t.width(s.width)):n.animate({width:s.width},"normal",function(){t.width(s.width)})),o.height!==s.height&&(s.max?(n.height(s.height),t.height(s.height-n.find("> .dialogHeader").outerHeight()-6)):n.animate({height:s.height},"normal",function(){t.height(s.height-n.find("> .dialogHeader").outerHeight()-6).resizePageH()})),o.maxable!==s.maxable&&(s.maxable?n.find("a.maximize").show():n.find("a.maximize").hide()),o.minable!==s.minable&&(s.minable?n.find("a.minimize").show():n.find("a.minimize").hide()),o.max!==s.max&&s.max&&setTimeout(a.maxsize(n),10),o.mask!==s.mask&&(s.mask?(a.addMask(n),d.fn.taskbar&&a.$element.taskbar("closeDialog",s.id)):s.minable&&d.fn.taskbar&&a.$element.taskbar({id:s.id,title:s.title})),o.title!==s.title&&(n.find("> .dialogHeader > h1 > span.title").html(s.title),n.taskbar("changeTitle",s.id,s.title)),n.data("options",s),e||n.data("initOptions",s),a.tools.reload(n,s)};s.reloadWarn?n.alertmsg("confirm",s.reloadWarn,{okCall:function(){l()}}):l()}},u.prototype.reloadForm=function(t,e){var a,i;if("string"==typeof e?i=(a=d("body").data(e)).data("options"):"object"==typeof e&&(a=e.id&&d("body").data(e.id)||this.getCurrent()),a){"object"==typeof e&&(e.title&&a.find("> .dialogHeader > h1 > span.title").html(e.title),i=d.extend({},e,a.data("options")));var n=a.find("#pagerForm"),o={},s={};if(n.attr("action")&&(i.url=n.attr("action")),n&&n.length){if(s=n.serializeJson(),e&&e.type||(i.type=n.attr("method")||"POST"),t){var l=BJUI.pageInfo;for(var r in l)l.hasOwnProperty(r)&&(o[l[r]]=s[l[r]])}else o=s;i.data=d.extend({},i.data||{},o)}this.reload(i,!0)}},u.prototype.getCurrent=function(){return l},u.prototype.switchDialog=function(t){var e=t.css("zIndex");if(l&&l!==t){var a=l.css("zIndex");l.css("zIndex",e),t.css("zIndex",a),d.CurrentDialog=l=t,d.fn.taskbar&&this.$element.taskbar("switchTask",t.data("options").id)}t.addClass(r),d("body").find("> .bjui-dialog-container").not(t).removeClass(r)},u.prototype.close=function(t){var i=this,n="string"==typeof t?d("body").data(t):t,e=n.data("bjui.dialog.mask"),o=n.data("options"),a=n.data("bjui.dialog.target"),s=o.beforeClose?o.beforeClose.toFunc():null,l=o.onClose?o.onClose.toFunc():null,r=!0;n&&o&&(s&&(r=s.apply(i,[n])),r?(BJUI.ModuleFixed.destroyModules(n),o.target&&a&&d(o.target).html(a),e&&e.length?(e.remove(),n.unwrap()):d.fn.taskbar&&this.$element.taskbar("closeDialog",o.id),n.animate({top:-n.outerHeight(),opacity:.1},"normal",function(){var t=d("body");t.removeData(o.id),n.trigger(BJUI.eventType.beforeCloseDialog).remove(),l&&l.apply(i);var e=t.find(".bjui-dialog-container"),a=null;e.length?a=i.$element.getMaxIndexObj(e):c=u.ZINDEX,a&&a.is(":visible")&&i.switchDialog(a)})):i.switchDialog(n))},u.prototype.closeCurrent=function(){this.close(l)},u.prototype.checkTimeout=function(){var t=l.find("> .dialogContent"),e=JSON.parse(t.html());e&&e[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&this.closeCurrent()},u.prototype.maxsize=function(t){t.data("original",{top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height")}).data("max",!0),t.find("> .dialogHeader > a.maximize").hide(),t.find("> .dialogHeader > a.restore").show();var e=d(window).width(),a=d(window).height()-d("#bjui-taskbar").height()-1;t.css({top:0,left:0,width:e,height:a}),this.tools.resizeContent(t,e,a)},u.prototype.restore=function(t){var e=t.data("original"),a=parseInt(e.width),i=parseInt(e.height);t.css({top:e.top,left:e.left,width:a,height:i}),this.tools.resizeContent(t,a,i),t.find("> .dialogHeader > a.maximize").show(),t.find("> .dialogHeader > a.restore").hide(),t.data("max",!1)},u.prototype.minimize=function(t){t.hide(),d.fn.taskbar&&this.$element.taskbar("minimize",t)},u.prototype.drag=function(t,e){e.find("> .dialogContent").css("opacity",".3"),e.basedrag({selector:"> .dialogHeader",stop:function(){e.css({left:e.css("left"),top:e.css("top")}).find("> .dialogContent").css("opacity",1)},event:t,nounbind:!0})},u.prototype.resizeDialog=function(t,e,a){var i=parseInt(t.css("left")),n=parseInt(t.css("top")),o=parseInt(t.css("height")),s=parseInt(t.css("width"));(n<0&&(n=0),e.css({top:n,left:i,width:s+2,height:o+1}).find("> .dialogContent").css("width",s-10),"w"!==a&&"e"!==a)&&e.find("> .dialogContent").css({height:o-e.find("> .dialogHeader").outerHeight()-6}).resizePageH();d(window).trigger(BJUI.eventType.resizeGrid)},u.prototype.resizeInit=function(t,e,a,i){var n=i.attr("tar");d("body").css("cursor",n+"-resize"),e.css({top:a.css("top"),left:a.css("left"),height:a.outerHeight(),width:a.css("width")}).show(),this.options.dragCurrent||(this.options.dragCurrent={$resizable:e,$dialog:a,target:n,oleft:parseInt(e.css("left"))||0,owidth:parseInt(e.css("width"))||0,otop:parseInt(e.css("top"))||0,oheight:parseInt(e.css("height"))||0,ox:t.pageX||t.screenX,oy:t.pageY||t.clientY},d(document).on("mouseup.bjui.dialog.resize",d.proxy(this.resizeStop,this)),d(document).on("mousemove.bjui.dialog.resize",d.proxy(this.resizeStart,this)))},u.prototype.resizeStart=function(t){var e=this.options.dragCurrent;if(e){t||(t=window.event);var a=(t.pageX||t.screenX)-e.ox,i=(t.pageY||t.clientY)-e.oy,n=e.$dialog.data("bjui.dialog.mask");if(n&&n.length||!((t.pageY||t.clientY)<=0||(t.pageY||t.clientY)>=d(window).height()-e.$dialog.find("> .dialogHeader").outerHeight())){var o=e.target,s=e.owidth,l=e.oheight;"n"!==o&&"s"!==o&&(s+=0<=o.indexOf("w")?-a:a),s>=this.options.minW&&(0<=o.indexOf("w")&&e.$resizable.css("left",e.oleft+a),"n"!==o&&"s"!==o&&e.$resizable.css("width",s)),"w"!==o&&"e"!==o&&(l+=0<=o.indexOf("n")?-i:i),l>=this.options.minH&&(0<=o.indexOf("n")&&e.$resizable.css("top",e.otop+i),"w"!==o&&"e"!==o&&e.$resizable.css("height",l))}}},u.prototype.resizeStop=function(t){var e=this.options.dragCurrent;if(!e)return!1;d(document).off("mouseup.bjui.dialog.resize"),d(document).off("mousemove.bjui.dialog.resize"),this.options.dragCurrent=null,this.resizeDialog(e.$resizable,e.$dialog,e.target),d("body").css("cursor",""),e.$resizable.hide()};var t=d.fn.dialog;d.fn.dialog=o,d.fn.dialog.Constructor=u,d.fn.dialog.noConflict=function(){return d.fn.dialog=t,this},d(document).on("click.bjui.dialog.data-api",'[data-toggle="dialog"]',function(t){var e=d(this),a=e.attr("href"),i=e.data(),n=i.options;n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&d.extend(i,n)),i.title||(i.title=e.text()),a&&!i.url&&(i.url=a),o.call(e,i),t.preventDefault()})}(jQuery),function(s){"use strict";var n,t,e,o,a,i,l,r,d;s(function(){n=s("#bjui-resizable"),t=s(FRAG.taskbar),e=t.find(".taskbarContent"),o=e.find("> ul"),a=t.find(".taskbarLeft"),i=t.find(".taskbarRight"),l="disabled",r="selected",d="taskbarMargin",s("body").append("\x3c!-- dialog task bar --\x3e").append(t),a.click(function(t){s(this).taskbar("scrollLeft")}),i.click(function(t){s(this).taskbar("scrollRight")})});var c=function(t,e){this.$element=s(t),this.$task=null,this.options=e,this.tools=this.TOOLS()};c.DEFAULTS={id:void 0,title:void 0},c.prototype.init=function(){var a=this,i=o.find("#"+this.options.id);if(this.show(),i.length)i.find("> div > span.title").html(this.options.title);else{(i=s('<li id="#taskid#"><div class="taskbutton"><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></div><div class="close"><i class="fa fa-times-circle"></i></div></li>'.replace("#taskid#",this.options.id).replace("#title#",this.options.title))).appendTo(o)}this.contextmenu(i),this.switchTask(i),this.tools.scrollTask(i),i.click(function(t){if(s(t.target).closest("div").hasClass("close")||s(t.target).hasClass("close"))i.dialog("close",a.options.id);else{var e=s("body").data(a.options.id);i.hasClass("selected")?e.find(".dialogHeader a.minimize").trigger("click"):e.is(":hidden")?a.restoreDialog(e):(e.trigger("click"),i.addClass(r)),a.scrollCurrent(i)}return!1})},c.prototype.TOOLS=function(){return{scrollCurrent:function(){if(this.tasksW(this.getTasks())>this.getTaskBarW()){var t=this,e=o.find("> li:last-child"),a=this.getTaskBarW()-e.position().left-e.outerWidth(!0);o.animate({left:a},200,function(){t.ctrlScrollBtn()})}else this.ctrlScrollBtn()},getTaskBarW:function(){return e.width()-(a.is(":hidden")?a.width()+2:0)-(i.is(":hidden")?i.width()+2:0)},scrollTask:function(t){var e,a=this;t.position().left+this.getLeft()+t.outerWidth()>this.getBarWidth()?(e=this.getTaskBarW()-t.position().left-t.outerWidth(!0)-2,o.animate({left:e},200,function(){a.ctrlScrollBtn()})):t.position().left+this.getLeft()<0&&(e=this.getLeft()-(t.position().left+this.getLeft()),o.animate({left:e},200,function(){a.ctrlScrollBtn()}))},ctrlScrollBtn:function(){var t=this.tasksW(this.getTasks());this.getTaskBarW()>t?(e.removeClass(d),i.hide(),a.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(e.addClass(d),i.show().removeClass(l),a.show().removeClass(l),0<=this.getLeft()&&a.addClass(l),this.getLeft()<=this.getTaskBarW()-t&&i.addClass(l))},getLeft:function(){return o.position().left},visibleStart:function(){for(var t=this.getLeft(),e=this.getTasks(),a=0;a<e.size();a++)if(0<=e.eq(a).position().left+e.eq(a).outerWidth(!0)+t)return e.eq(a);return e.eq(0)},visibleEnd:function(){for(var t=this.getLeft(),e=this.getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>this.getBarWidth())return e.eq(a);return e.eq(e.size()-1)},getTasks:function(){return o.find("> li")},tasksW:function(t){var e=0;return t.each(function(){e+=s(this).outerWidth(!0)}),e},getBarWidth:function(){return t.innerWidth()},getCurrent:function(){return o.find("li."+r)}}},c.prototype.contextmenu=function(t){var n=this;t.contextmenu({id:"dialogCM",bindings:{reload:function(t){t.dialog("refresh",n.options.id)},closeCurrent:function(t,e){(t.isTag("li")?t:n.tools.getCurrent()).find(".close").trigger("click")},closeOther:function(t,e){o.find("> li").not(t).each(function(t){s(this).find(".close").trigger("click")})},closeAll:function(t,e){n.tools.getTasks().each(function(t){s(this).find(".close").trigger("click")})}},ctrSub:function(t,e){var a=e.find('[rel="closeCurrent"]'),i=e.find('[rel="closeOther"]');n.tools.getCurrent().length?1===n.tools.getTasks().size()&&i.addClass(l):(a.addClass(l),i.addClass(l))}})},c.prototype.closeDialog=function(t){var e="string"==typeof t?this.getTask(t):t;e&&e.length&&(e.remove(),0===this.tools.getTasks().size()&&this.hide(),this.tools.scrollCurrent(),this.$element.removeData("bjui.taskbar"))},c.prototype.minimize=function(t){var e=this,a="string"==typeof t?s("body").data("dialog"):t,i=this.getTask(a.data("options").id);n.css({top:a.css("top"),left:a.css("left"),height:a.css("height"),width:a.css("width")}).show().animate({top:s(window).height()-60,left:i.position().left,width:i.outerWidth(),height:i.outerHeight()},250,function(){s(this).hide(),e.inactive(i)})},c.prototype.restoreDialog=function(t){var e=this.getTask(t.data("options").id);n.css({top:s(window).height()-60,left:e.position().left,height:e.outerHeight(),width:e.outerWidth()}).show().animate({top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height")},250,function(){s(this).hide(),t.show()}),this.switchTask(e)},c.prototype.inactive=function(t){("string"==typeof t?this.getTask(t):t).removeClass(r)},c.prototype.scrollLeft=function(){var t=this.tools.visibleStart();this.tools.scrollTask(t)},c.prototype.scrollRight=function(){var t=this.tools.visibleEnd();this.tools.scrollTask(t)},c.prototype.scrollCurrent=function(t){this.tools.scrollTask(t)},c.prototype.switchTask=function(t){this.tools.getCurrent().removeClass(r),("string"==typeof t?this.getTask(t):t).addClass(r)},c.prototype.getTask=function(t){return o.find("#"+t)},c.prototype.changeTitle=function(t,e){var a=this.getTask(t);a&&e&&a.find(".title").html(e)},c.prototype.show=function(){t.is(":hidden")&&t.show().animate({bottom:0},500)},c.prototype.hide=function(){t.is(":visible")&&t.animate({bottom:-50},500,function(){t.hide()})};var u=s.fn.taskbar;s.fn.taskbar=function(i){var n=arguments,o=i;return this.each(function(){var t=s(this),e=s.extend({},c.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.taskbar");a?a.options.id!==e.id&&t.data("bjui.taskbar",a=new c(this,e)):t.data("bjui.taskbar",a=new c(this,e)),"string"==typeof o&&s.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})},s.fn.taskbar.Constructor=c,s.fn.taskbar.noConflict=function(){return s.fn.taskbar=u,this}}(jQuery),function(d){"use strict";var n,c=function(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()};function o(i){var n=arguments,o=i;return this.each(function(){var t=d(this),e=d.extend({},c.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.bjuiajax");a||t.data("bjui.bjuiajax",a=new c(this,e)),"string"==typeof o&&d.isFunction(a[o])&&([].shift.apply(n),n?a[o].apply(a,n):a[o]())})}c.DEFAULTS={reload:!0,loadingmask:!0},c.NAVTAB="navtab",c.prototype.TOOLS=function(){var t=this;return{getPagerForm:function(t,e){var a=t.isTag("form")?t[0]:t.find("#pagerForm:first")[0],i=d.extend({},BJUI.pageInfo);if(t.data("bjui.clientPaging")&&(e=d.extend({},t.data("bjui.clientPaging"),e),t.data("bjui.clientPaging",e)),a)for(var n in i)if(i.hasOwnProperty(n)){var o="";e&&e[n]&&(o=e[n]),a[i[n]]?o&&(a[i[n]].value=o):d('<input type="hidden" name="'+i[n]+'" value="'+o+'">').appendTo(d(a))}return a},getTarget:function(){return t.$element.closest(".navtab-panel").length?c.NAVTAB:"dialog"}}},c.prototype.ajaxForm=function(e){var i=this,n=this.$element,o=e&&e.callback,a=n.attr("enctype");e=d.extend({},i.options,"object"==typeof e&&e),o&&(o=o.toFunc());var s=function(t,e,a){o?o.apply(i,[t,n]):d.proxy(i.ajaxCallback(t),i)},t=function(){var t={loadingmask:e.loadingmask,type:n.attr("method"),url:n.attr("action"),callback:s,error:d.proxy(i.ajaxError,i)};a&&"multipart/form-data"===a?window.FormData?d.extend(t,{data:new FormData(n[0]),contentType:!1,processData:!1}):d.extend(t,{data:n.serializeArray(),files:n.find(":file"),iframe:!0,processData:!1}):d.extend(t,{data:n.serializeArray()}),n.doAjax(t)};e.confirmMsg?n.alertmsg("confirm",e.confirmMsg,{okCall:t}):t()},c.prototype.ajaxDone=function(t){var e=this.$element;t[BJUI.keys.statusCode]===BJUI.statusCode.error?t[BJUI.keys.message]&&e.alertmsg("error",t[BJUI.keys.message]):t[BJUI.keys.statusCode]===BJUI.statusCode.timeout?(e.alertmsg("info",t[BJUI.keys.message]||FRAG.sessionTimout),BJUI.loadLogin()):t[BJUI.keys.message]&&e.alertmsg("correct",t[BJUI.keys.message])},c.prototype.ajaxError=function(t,e,a){BJUI.removeProgress();var i=t.responseText.trim();i.startsWith("{")?this.ajaxDone(i.toObj()):this.$element.alertmsg("error","<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+" </div><div>thrownError: "+a+" </div><div>"+i+"</div>")},c.prototype.ajaxCallback=function(t){var e=this,a=e.$element.closest(".bjui-layout");e.ajaxDone(t),t[BJUI.keys.statusCode]===BJUI.statusCode.ok&&(a&&a.length?e.divCallback(t,a):e.tools.getTarget()===c.NAVTAB?e.navtabCallback(t):e.dialogCallback(t))},c.prototype.divCallback=function(t,e){var a=this;if(t.tabid&&setTimeout(function(){a.$element.navtab("reloadFlag",t.tabid)},100),t.dialogid&&setTimeout(function(){a.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){a.$element.bjuiajax("refreshDiv",t.divid)},100),a.options.reload){var i=a.tools.getPagerForm(e),n=null,o=null;o=i?(n=i.attr("action"),i.attr("method")||"GET"):(n=e.data("url"),e.data("type")||"GET"),n&&e.ajaxUrl({url:n,type:o})}if(a.options.reloadNavtab&&setTimeout(function(){a.$element.navtab("refresh")},100),t.forward){var s=function(){e.ajaxUrl({url:t.forward})};t.forwardConfirm?a.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){s()}}):s()}},c.prototype.navtabCallback=function(t){var e=this;if(t.closeCurrent&&!t.forward?e.$element.navtab("closeCurrentTab"):!1!==t.tabid&&(""===d.trim(t.tabid)&&t.statusCode===BJUI.statusCode.ok?setTimeout(function(){e.$element.navtab("refresh")},100):t.tabid?setTimeout(function(){e.$element.navtab("reloadFlag",t.tabid)},100):e.options.reload&&setTimeout(function(){e.$element.navtab("refresh")},100)),t.dialogid&&setTimeout(function(){e.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){e.$element.bjuiajax("refreshDiv",t.divid)},100),t.datagrid&&setTimeout(function(){d.each(t.datagrid.join(","),function(t,e){d("#"+e.trim()).datagrid("refresh")})},100),t.forward){var a=function(){e.$element.navtab("reload",{url:t.forward})};t.forwardConfirm?e.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){a()},cancelCall:function(){t.closeCurrent&&e.$element.navtab("closeCurrentTab")}}):a()}},c.prototype.dialogCallback=function(t){var e=this;if(!1!==t.tabid&&(""===d.trim(t.tabid)&&t.statusCode===BJUI.statusCode.ok?setTimeout(function(){e.$element.navtab("refresh")},100):t.tabid&&setTimeout(function(){e.$element.navtab("reloadFlag",t.tabid)},100)),t.dialogid&&setTimeout(function(){e.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){e.$element.bjuiajax("refreshDiv",t.divid)},100),t.closeCurrent&&!t.forward?e.$element.dialog("closeCurrent"):e.options.reload&&setTimeout(function(){e.$element.dialog("refresh")},100),e.options.reloadNavtab&&setTimeout(function(){e.$element.navtab("refresh")},100),t.forward){var a=function(){e.$element.dialog("reload",{url:t.forward})};t.forwardConfirm?e.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){a()}}):a()}},c.prototype.pageCallback=function(t,e){var a=this,i=d.extend({},c.DEFAULTS,t),n=e||null,o=null;n&&n.length?(o=a.tools.getPagerForm(n,i))&&(d.extend(i,d(o).data()),a.reloadDiv(n,{type:d(o).attr("method")||"POST",url:d(o).attr("action"),data:d(o).serializeArray(),loadingmask:i.loadingmask})):a.tools.getTarget()===c.NAVTAB?(n=d.CurrentNavtab,(o=a.tools.getPagerForm(n,i))&&d.extend(i,d(o).data()),a.$element.navtab("reloadForm",!1,i)):(n=d.CurrentDialog,(o=a.tools.getPagerForm(n,i))&&d.extend(i,d(o).data()),a.$element.dialog("reloadForm",!1,i))},c.prototype.doSearch=function(n){var o=this,s=o.$element,l={pageCurrent:1},r=s.closest(".bjui-layout"),t=n.isValid;if((n=d.extend({},c.DEFAULTS,"object"==typeof n&&n)).url||(n.url=s.attr("action")),n.url){if(n.url=decodeURI(n.url).replacePlh(s.closest(".unitBox")),!n.url.isFinishedTm())return s.alertmsg("error",n.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The submit form action is incorrect: "+n.url);n.url=encodeURI(n.url);var e=function(){if(r&&r.length){o.tools.getPagerForm(r,l);var t=s.serializeJson(),e={};if(n.clearQuery){var a=BJUI.pageInfo;for(var i in a)a.hasOwnProperty(i)&&(e[a[i]]=t[a[i]]);t=e}o.reloadDiv(r,{type:s.attr("method")||"POST",url:n.url,data:t,loadingmask:n.loadingmask})}else o.tools.getTarget()===c.NAVTAB?(r=d.CurrentNavtab,o.tools.getPagerForm(r,l),s.navtab("reloadForm",n.clearQuery,n)):(r=d.CurrentDialog,o.tools.getPagerForm(r,l),s.dialog("reloadForm",n.clearQuery,n))};t?e():d.validator?s.isValid(function(t){t&&e()}):e()}else BJUI.debug("Error trying to submit form action: action url is undefined!")},c.prototype.doLoad=function(t){var e=this.$element,a=t.target?d(t.target):null;if((t=d.extend({},c.DEFAULTS,"object"==typeof t&&t)).url){if(t.url=decodeURI(t.url).replacePlh(e.closest(".unitBox")),!t.url.isFinishedTm())return e.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax link incorrect: "+t.url);t.url=encodeURI(t.url),a&&a.length?a&&a.length&&(a.removeData("bjui.clientPaging"),this.reloadDiv(a,t)):BJUI.debug("Not set loaded 'ajax' content container, like [data-target].")}else BJUI.debug("Error trying to open a ajax link: The url is undefined!")},c.prototype.refreshLayout=function(t){var e=t.target?d(t.target):null;if(t=d.extend({},c.DEFAULTS,"object"==typeof t&&t),!e||!e.length)return n&&clearInterval(n),void BJUI.debug("Not set loaded 'ajax' content container, like [data-target].");e&&e.length&&(e.removeData("bjui.clientPaging"),this.reloadDiv(e,d.extend({},e.data("options")||{},t)))},c.prototype.reloadDiv=function(e,a){var i=a.autorefresh&&(isNaN(String(a.autorefresh))?15:a.autorefresh);e.addClass("bjui-layout").data("options",a).ajaxUrl({type:a.type,url:a.url,data:a.data,loadingmask:a.loadingmask,callback:function(t){BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e),a.callback&&a.callback.apply(this,[e]),n&&clearInterval(n),i&&(n=setInterval(function(){e.bjuiajax("refreshLayout",a)},1e3*i))}})},c.prototype.refreshDiv=function(t){if(t&&"string"==typeof t)for(var e=t.split(","),a=0;a<e.length;a++)this.refreshLayout({target:"#"+e[a]})},c.prototype.doAjax=function(t){var e=this,a=e.$element;if((t=d.extend({},c.DEFAULTS,"object"==typeof t&&t)).url){if(t.url=decodeURI(t.url).replacePlh(a.closest(".unitBox")),!t.url.isFinishedTm())return a.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+t.url);t.url=encodeURI(t.url),t.data&&(t.data="object"==typeof t.data?t.data:t.data.toObj());var i=t.callback&&t.callback.toFunc(),n=function(){a.doAjax({type:t.type,url:t.url,data:t.data,callback:i||d.proxy(function(t){e.ajaxCallback(t)},e)})};t.confirmMsg?a.alertmsg("confirm",t.confirmMsg,{okCall:function(){n()}}):n()}else BJUI.debug("Error trying to open a ajax link: url is undefined!")},c.prototype.doExport=function(t){var e,a=this,i=a.$element,n=t.target?d(t.target):null;if(t.url){if(t.url=decodeURI(t.url).replacePlh(i.closest(".unitBox")),!t.url.isFinishedTm())return i.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+t.url);var o=function(){n&&n.length||(n=a.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog),t.data?t.data="object"==typeof t.data?t.data:t.data.toObj():t.data={},(e=a.tools.getPagerForm(n))&&(t.data=d.extend(t.data,d(e).serializeJson())),d.fileDownload(t.url,{httpMethod:t.type,data:t.data,cookiePath:"/",failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),a.ajaxDone(t)}})};t.confirmMsg?i.alertmsg("confirm",t.confirmMsg,{okCall:function(){o()}}):o()}else BJUI.debug("Error trying to open a ajax link: url is undefined!")},c.prototype.doExportChecked=function(a){var i=this,t=i.$element,n=a.target?d(a.target):null;if(a.url){if(a.url=decodeURI(a.url).replacePlh(t.closest(".unitBox")),!a.url.isFinishedTm())return t.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+a.url);var e=function(){if(a.group){n&&n.length||(n=i.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog);var t=[],e=n.find(":checkbox[name="+a.group+"]:checked");0!==e.length?(e.each(function(){t.push(d(this).val())}),a.data?a.data="object"==typeof a.data?a.data:a.data.toObj():a.data={},a.data[a.idname?a.idname:"ids"]=t.join(","),d.fileDownload(a.url,{httpMethod:a.type,data:a.data,cookiePath:"/",failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),i.ajaxDone(t)}})):i.$element.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked))}else i.$element.alertmsg("error",a.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))};a.confirmMsg?t.alertmsg("confirm",a.confirmMsg,{okCall:function(){e()}}):e()}else BJUI.debug("Error trying to open a export link: url is undefined!")},c.prototype.doAjaxChecked=function(i){var n=this,o=n.$element,s=i.target?d(i.target):null;if((i=d.extend({},c.DEFAULTS,"object"==typeof i&&i)).url){if(i.url=decodeURI(i.url).replacePlh(o.closest(".unitBox")),!i.url.isFinishedTm())return o.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+i.url);var t=function(){if(i.group){s&&s.length||(s=n.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog);var t=[],e=s.find(":checkbox[name="+i.group+"]:checked"),a=i.callback&&i.callback.toFunc();0!==e.length?(e.each(function(){t.push(d(this).val())}),i.data?i.data="object"==typeof i.data?i.data:i.data.toObj():i.data={},i.data[i.idname?i.idname:"ids"]=t.join(","),o.doAjax({type:i.type,url:i.url,data:i.data,callback:a||d.proxy(function(t){n.ajaxCallback(t)},n)})):o.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked))}else o.alertmsg("error",i.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))};i.confirmMsg?o.alertmsg("confirm",i.confirmMsg,{okCall:function(){t()}}):t()}else BJUI.debug("Error trying to open a del link: url is undefined!")};var t=d.fn.bjuiajax;d.fn.bjuiajax=o,d.fn.bjuiajax.Constructor=c,d.fn.bjuiajax.noConflict=function(){return d.fn.bjuiajax=t,this},d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxform"]',function(t){var e=d(this),a=e.data();o.call(e,"ajaxForm",a),t.preventDefault()}),d(function(){d.validator?d(document).on(BJUI.eventType.initUI,function(t){d(t.target).find('form[data-toggle="ajaxsearch"]').each(function(){var e=d(this),a=e.data();a.isValid=!0,e.validator({valid:function(t){o.call(e,"doSearch",a)}})})}):d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxsearch"]',function(t){var e=d(this),a=e.data();o.call(e,"doSearch",a),t.preventDefault()})}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="reloadsearch"]',function(t){var e,a=d(this),i=a.closest("form");i&&i.length&&((e=i.data()).clearQuery=a.data("clearQuery")||!0,o.call(i,"doSearch",e),t.preventDefault())}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="ajaxload"]',function(t){var e=d(this),a=e.data();a.url||(a.url=e.attr("href")),o.call(e,"doLoad",a),t.preventDefault()}),d(document).on(BJUI.eventType.initUI,function(t){d(t.target).find('[data-toggle="autoajaxload"]').each(function(){var t=d(this),e=t.data();e.target=this,o.call(t,"doLoad",e)})}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="refreshlayout"]',function(t){var e=d(this),a=e.data();o.call(e,"refreshLayout",a)}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajax"]',function(t){var e=d(this),a=e.data();a.url||(a.url=e.attr("href")),o.call(e,"doAjax",a),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexport"]',function(t){var e=d(this),a=e.data();a.url||(a.url=e.attr("href")),o.call(e,"doExport",a),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexportchecked"]',function(t){var e=d(this),a=e.data();a.url||(a.url=e.attr("href")),o.call(e,"doExportChecked",a),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajaxchecked"]',function(t){var e=d(this),a=e.data();a.url||(a.url=e.attr("href")),o.call(e,"doAjaxChecked",a),t.preventDefault()})}(jQuery),function(f){"use strict";var g,m,b;f(function(){g=f(FRAG.alertBoxFrag).hide().html(""),m=f(FRAG.alertBackground).hide().html(""),f("body").append("\x3c!-- alert msg box --\x3e").append(g).append("\x3c!-- alert msg box mask bg --\x3e").append(m)});var s=function(t,e){this.$element=f(t),this.options=e,this.tools=this.TOOLS(),this.clearTime=null};function o(i){var n=arguments,o=i;return this.each(function(){var t=f(this),e=f.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i),a=new s(this,e);"string"==typeof o&&f.isFunction(a[o])&&([].shift.apply(n),n?a[o].apply(a,n):a[o]())})}s.DEFAULTS={displayPosition:"topcenter",displayMode:"slide",autoClose:null,alertTimeout:3e3,mask:null,types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},fas:{error:"fa-times-circle",info:"fa-info-circle",warn:"fa-exclamation-circle",correct:"fa-check-circle",confirm:"fa-question-circle"}},s.prototype.TOOLS=function(){var h=this,p=h.options;return{getTitle:function(t){return p.title||BJUI.regional.alertmsg.title[t]},keydownOk:function(t){return t.which!==BJUI.keyCode.ENTER||(t.data.target.trigger("click"),!1)},keydownEsc:function(t){t.which===BJUI.keyCode.ESC&&t.data.target.trigger("click")},openPosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,a=g.outerHeight(),i={},n={};switch(t?p.displayPosition&&"topcenter"!==p.displayPosition&&(t=p.displayPosition):t=p.displayPosition,e?p.displayMode&&"silde"!==p.displayMode&&(e=p.displayMode):e=p.displayMode,t){case"topleft":i={top:0-a,left:0,"margin-left":0},n={top:0};break;case"topcenter":i={top:0-a},n={top:0};break;case"topright":i={top:0-a,left:"auto",right:0,"margin-left":0},n={top:0};break;case"middleleft":i={top:"50%",left:-460,"margin-left":0,"margin-top":0-a/2},n={left:0};break;case"middlecenter":i={top:"0","margin-top":0-a/2},n={top:"50%"};break;case"middleright":i={top:"50%",left:"auto",right:-460,"margin-top":0-a/2},n={right:0};break;case"bottomleft":i={top:"auto",left:0,bottom:0-a,"margin-left":0},n={bottom:0};break;case"bottomcenter":i={top:"auto",bottom:0-a},n={bottom:0};break;case"bottomright":i={top:"auto",left:"auto",right:0,bottom:0-a,"margin-left":0},n={bottom:0}}"slide"===e?g.css(i).show().animate(n,500):"fade"===e?(i.opacity=.1,g.css(i).css(n).show().animate({opacity:1},500)):g.css(i).css(n).show()},closePosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,a=g.outerHeight(),i={};switch(t?p.displayPosition&&"topcenter"!==p.displayPosition&&(t=p.displayPosition):t=p.displayPosition,e?p.displayMode&&"silde"!==p.displayMode&&(e=p.displayMode):e=p.displayMode,t){case"topleft":case"topcenter":case"topright":i={top:0-a};break;case"middleleft":i={left:-460};break;case"middlecenter":i={top:0-a};break;case"middleright":i={right:-460};break;case"bottomleft":case"bottomcenter":case"bottomright":i={bottom:0-a}}"slide"===e?g.animate(i,500,function(){m.hide(),f(this).hide().empty()}):"fade"===e?g.animate({opacity:0},500,function(){m.hide(),f(this).hide().empty()}):(g.hide().remove(),m.hide())},open:function(t,e,a){var i,n,o=this,s="",l=BJUI.alertMsg.alertTimeout;if(a)for(var r=0;r<a.length;r++){var d=a[r].call?"callback":"",c=a[r].cls?a[r].cls:"default",u=a[r].cls&&"green"===a[r].cls?"check":"close";s+=FRAG.alertBtnFrag.replace("#btnMsg#",'<i class="fa fa-'+u+'"></i> '+a[r].name).replace("#callback#",d).replace("#class#",c)}i=f(FRAG.alertBoxFrag.replace("#type#",t).replace("#fa#",p.fas[t]).replace("#title#",this.getTitle(t)).replace("#message#",e).replace("#btnFragment#",s)).hide().appendTo("body"),g&&g.length&&g.remove(),g=i,o.openPosition(),b&&(clearTimeout(b),b=null),null==p.mask&&p.types.info!==t&&p.types.correct!==t&&m.show(),null==p.autoClose&&(p.types.info!==t&&p.types.correct!==t||(l?p.alertTimeout&&3e3!==p.alertTimeout&&(l=p.alertTimeout):l=p.alertTimeout,b=setTimeout(function(){o.close()},l))),(n=g.find(".btn")).each(function(e){f(this).on("click",f.proxy(function(){h.tools.close();var t=a[e].call;"string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call()},h)),a[e].keyCode===BJUI.keyCode.ENTER&&f(document).on("keydown.bjui.alertmsg.ok",{target:n.eq(e)},o.keydownOk),a[e].keyCode===BJUI.keyCode.ESC&&f(document).on("keydown.bjui.alertmsg.esc",{target:n.eq(e)},o.keydownEsc)})},alert:function(t,e,a){f.extend(p,"object"==typeof a&&a);var i=f.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},p),n=[{name:i.okName,call:i.okCall,cls:"default",keyCode:BJUI.keyCode.ENTER}];this.open(t,e,n)},close:function(){f(document).off("keydown.bjui.alertmsg.ok").off("keydown.bjui.alertmsg.esc"),this.closePosition()}}},s.prototype.error=function(t,e){this.tools.alert(this.options.types.error,t,e)},s.prototype.info=function(t,e){this.tools.alert(this.options.types.info,t,e)},s.prototype.warn=function(t,e){this.tools.alert(this.options.types.warn,t,e)},s.prototype.ok=function(t,e){this.tools.alert(this.options.types.correct,t,e)},s.prototype.correct=function(t,e){this.tools.alert(this.options.types.correct,t,e)},s.prototype.confirm=function(t,e){f.extend(this.options,"object"==typeof e&&e);var a=f.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options),i=[{name:a.okName,call:a.okCall,cls:"green",keyCode:BJUI.keyCode.ENTER},{name:a.cancelName,call:a.cancelCall,cls:"red",keyCode:BJUI.keyCode.ESC}];this.tools.open(this.options.types.confirm,t,i)};var t=f.fn.alertmsg;f.fn.alertmsg=o,f.fn.alertmsg.Constructor=s,f.fn.alertmsg.noConflict=function(){return f.fn.alertmsg=t,this},f(document).on("click.bjui.alertmsg.data-api",'[data-toggle="alertmsg"]',function(t){var e,a=f(this),i=a.data(),n=i.options;if(n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&f.extend(i,n)),!(e=i.type))return!1;o.call(a,e,i.msg||e,i),t.preventDefault()})}(jQuery),function(p){"use strict";var s=function(t,e){this.$element=p(t),this.options=e,this.tools=this.TOOLS()};function a(i){var n=arguments,o=i;return this.each(function(){var t=p(this),e=p.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.pagination");a||t.data("bjui.pagination",a=new s(this,e)),"string"==typeof o&&p.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}s.DEFAULTS={first:"li.j-first",prev:"li.j-prev",next:"li.j-next",last:"li.j-last",nums:"li.j-num > a",jump:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}},s.prototype.TOOLS=function(){var i=this.options;return{pageNums:function(){return Math.ceil(i.total/i.pageSize)},getInterval:function(){var t=Math.ceil(i.pageNum/2),e=this.pageNums(),a=e-i.pageNum;return{start:(this.getCurrentPage()>t?Math.max(Math.min(this.getCurrentPage()-t,a),0):0)+1,end:(this.getCurrentPage()>t?Math.min(this.getCurrentPage()+t,e):Math.min(i.pageNum,e))+1}},getCurrentPage:function(){var t=parseInt(i.pageCurrent);return isNaN(t)?1:t},hasPrev:function(){return 1<this.getCurrentPage()},hasNext:function(){return this.getCurrentPage()<this.pageNums()}}},s.prototype.init=function(){BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize});for(var i=this,n=this.options,t=this.tools,e=t.getInterval(),a="",o=FRAG.pagination,s=BJUI.regional.pagination,l=e.start;l<e.end;l++)a+=n.pageNumFrag.replaceAll("#pageNum#",l).replaceAll("#liClass#",l===t.getCurrentPage()?"selected j-num":"j-num");o=o.replaceAll("#pageNumFrag#",a).replaceAll("#pageCurrent#",t.getCurrentPage()).replaceAll("#first#",s.first).replaceAll("#last#",s.last).replaceAll("#prev#",s.prev).replaceAll("#next#",s.next).replaceAll("#jumpto#",s.jumpto).replaceAll("#jump#",s.jump),this.$element.html(o);var r=this.$element.find(n.first),d=this.$element.find(n.prev),c=this.$element.find(n.next),u=this.$element.find(n.last);function h(t,a){t.on("click",function(t){var e={pageCurrent:a,pageSize:i.options.pageSize};i.setClientPaging(e),p(this).bjuiajax("pageCallback",e,i.$element.closest(".bjui-layout")),t.preventDefault()})}t.hasPrev()?(r.add(d).find("> span").hide(),h(d,t.getCurrentPage()-1),h(r,1)):r.add(d).addClass("disabled").find("> a").hide(),t.hasNext()?(c.add(u).find("> span").hide(),h(c,t.getCurrentPage()+1),h(u,t.pageNums())):c.add(u).addClass("disabled").find("> a").hide(),this.$element.find(n.nums).each(function(t){h(p(this),t+e.start)}),this.$element.find(n.jump).each(function(){var a=p(this).find(":text"),e=p(this).find(".goto");e.on("click",function(){var t=a.val(),e={pageCurrent:t,pageSize:n.pageSize};t&&t.isPositiveInteger()&&(i.setClientPaging(e),p(this).bjuiajax("pageCallback",e,i.$element.closest(".bjui-layout")))}),a.keyup(function(t){t.keyCode===BJUI.keyCode.ENTER&&e.trigger("click")})})},s.prototype.changePagesize=function(){var t=this.$element.val(),e={pageSize:t};isNaN(t)||(this.setClientPaging(e),this.$element.bjuiajax("pageCallback",e,this.$element.closest(".bjui-layout")))},s.prototype.orderBy=function(t){var e=this;e.$element.css({cursor:"pointer"}).click(function(){var t={orderField:p(this).data("orderField"),orderDirection:p(this).data("orderDirection")};e.setClientPaging(t),p(this).bjuiajax("pageCallback",t,e.$element.closest(".bjui-layout"))})},s.prototype.destroy=function(){this.$element.removeData("bjui.pagination").empty()},s.prototype.getTarget=function(){return this.$element.closest(".bjui-layout").length?this.$element.closest(".bjui-layout"):this.$element.closest(".navtab-panel").length?p.CurrentNavtab:p.CurrentDialog},s.prototype.getClientPaging=function(){return this.getTarget().data("bjui.clientPaging")},s.prototype.setClientPaging=function(t){if(BJUI.ui.clientPaging){var e=this.getTarget();e.data("bjui.clientPaging",p.extend({},e.data("bjui.clientPaging")||{},t))}},s.prototype.setClientOrder=function(t){if(BJUI.ui.clientPaging){var e=this.getClientPaging();e&&e.orderField||this.setClientPaging(t)}},s.prototype.setPagingAndOrderby=function(t){var e=t.data("bjui.clientPaging");t.find('[data-toggle="pagination"]').pagination("destroy").pagination(e),e.pageSize&&t.find('select[data-toggle-change="changepagesize"]').selectpicker("val",e.pageSize),e.orderField&&t.find('th[data-order-field="'+e.orderField+'"]').addClass(e.orderDirection).siblings().removeClass("asc desc")};var t=p.fn.pagination;p.fn.pagination=a,p.fn.pagination.Constructor=s,p.fn.pagination.noConflict=function(){return p.fn.pagination=t,this},p(document).on(BJUI.eventType.initUI,function(t){var e=p(t.target).find('[data-toggle="pagination"]');e.length&&a.call(e)}),p(document).on("change.bjui.pagination.data-api",'select[data-toggle-change="changepagesize"]',function(t){var e=p(this);a.call(e,"changePagesize"),t.preventDefault()})}(jQuery),function($){"use strict";var MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){e+="";var a="",i=0,n="",o="",s=t.getYear()+"",l=t.getMonth()+1,r=t.getDate(),d=t.getDay(),c=t.getHours(),u=t.getMinutes(),h=t.getSeconds(),p={};for(s.length<4&&(s=""+(s-0+1900)),p.y=""+s,p.yyyy=s,p.yy=s.substring(2,4),p.M=l,p.MM=LZ(l),p.MMM=MONTH_NAMES[l-1],p.NNN=MONTH_NAMES[l+11],p.d=r,p.dd=LZ(r),p.E=DAY_NAMES[d+7],p.EE=DAY_NAMES[d],p.H=c,p.HH=LZ(c),p.h=0===c?12:12<c?c-12:c,p.hh=LZ(p.h),p.K=11<c?c-12:c,p.k=c+1,p.KK=LZ(p.K),p.kk=LZ(p.k),p.a=11<c?"PM":"AM",p.m=u,p.mm=LZ(u),p.s=h,p.ss=LZ(h);i<e.length;){for(n=e.charAt(i),o="";e.charAt(i)===n&&i<e.length;)o+=e.charAt(i++);null!=p[o]?a+=p[o]:a+=o}return a}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,a,i){for(var n=i;a<=n;n--){var o=t.substring(e,e+n);if(o.length<a)return null;if(_isInteger(o))return o}return null}function parseDate(t,e){var a;t+="",e+="";for(var i,n,o=0,s=0,l="",r="",d=new Date(1900,0,1),c=d.getYear(),u=d.getMonth()+1,h=1,p=d.getHours(),f=d.getMinutes(),g=d.getSeconds(),m="";s<e.length;){for(l=e.charAt(s),r="";e.charAt(s)===l&&s<e.length;)r+=e.charAt(s++);if("yyyy"===r||"yy"===r||"y"===r){if("yyyy"===r&&(n=i=4),"yy"===r&&(n=i=2),"y"===r&&(i=2,n=4),null===(c=_getInt(t,o,i,n)))return 0;o+=c.length,2===c.length&&(c=70<c?c-0+1900:c-0+2e3)}else if("MMM"===r||"NNN"===r){for(a=u=0;a<MONTH_NAMES.length;a++){var b=MONTH_NAMES[a];if(t.substring(o,o+b.length).toLowerCase()===b.toLowerCase()&&("MMM"===r||"NNN"===r&&11<a)){12<(u=a+1)&&(u-=12),o+=b.length;break}}if(u<1||12<u)return 0}else if("EE"===r||"E"===r)for(a=0;a<DAY_NAMES.length;a++){var v=DAY_NAMES[a];if(t.substring(o,o+v.length).toLowerCase()===v.toLowerCase()){o+=v.length;break}}else if("MM"===r||"M"===r){if(null===(u=_getInt(t,o,r.length,2))||u<1||12<u)return 0;o+=u.length}else if("dd"===r||"d"===r){if(null===(h=_getInt(t,o,r.length,2))||h<1||31<h)return 0;o+=h.length}else if("hh"===r||"h"===r){if(null===(p=_getInt(t,o,r.length,2))||p<1||12<p)return 0;o+=p.length}else if("HH"===r||"H"===r){if(null===(p=_getInt(t,o,r.length,2))||p<0||23<p)return 0;o+=p.length}else if("KK"===r||"K"===r){if(null===(p=_getInt(t,o,r.length,2))||p<0||11<p)return 0;o+=p.length}else if("kk"===r||"k"===r){if(null===(p=_getInt(t,o,r.length,2))||p<1||24<p)return 0;o+=p.length,p--}else if("mm"===r||"m"===r){if(null===(f=_getInt(t,o,r.length,2))||f<0||59<f)return 0;o+=f.length}else if("ss"===r||"s"===r){if(null===(g=_getInt(t,o,r.length,2))||g<0||59<g)return 0;o+=g.length}else if("a"===r){if("am"===t.substring(o,o+2).toLowerCase())m="AM";else{if("pm"!==t.substring(o,o+2).toLowerCase())return 0;m="PM"}o+=2}else{if(t.substring(o,o+r.length)!==r)return 0;o+=r.length}}if(o!==t.length)return 0;if(2===u)if(c%4==0&&c%100!=0||c%400==0){if(29<h)return 0}else if(28<h)return 0;return(4===u||6===u||9===u||11===u)&&30<h?0:(p<12&&"PM"===m?p+=12:11<p&&"AM"===m&&(p-=12),new Date(c,u-1,h,p,f,g))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),a=this.getMonth()+1,i=this.getDate(),n=t.replaceAll("%y",e).replaceAll("%M",a).replaceAll("%d",i),o=1900,s=0,l=1,r=(n=replaceTmEval(n)).split("-");return 0<r.length&&(o=r[0]),1<r.length&&(s=r[1]-1),2<r.length&&(l=r[2]),new Date(o,s,l).formatDate("yyyy-MM-dd")}}(jQuery),function(m){"use strict";var b,v,r,d,c,u,y,k,x,C,w,$,j,h,T,n,p,f;m(function(){!function(){var t=BJUI.regional.datepicker,e=FRAG.calendarFrag.replace("#close#",t.close).replace("#prev#",t.prev).replace("#next#",t.next).replace("#clear#",t.clear).replace("#ok#",t.ok);b=m(e).hide(),m("body").append("\x3c!-- datepicker --\x3e").append(b),v=b.find("> .main"),r=b.find("a.prev"),d=b.find("a.next"),c=b.find("select[name=year]"),u=b.find("select[name=month]"),y=b.find(".time"),k=y.find(":text"),x=y.find("ul > li"),C=y.find(".hh"),w=y.find(".mm"),$=y.find(".ss"),j=v.find("> .tm"),h=b.find(".close"),T=v.find("> .body > .days"),n=v.find("> .body > .dayNames"),p=b.find(".clearBtn"),f=b.find(".okBtn");var a="",i=BJUI.regional.datepicker;m.each(i.dayNames,function(t,e){a+="<dt>"+e+"</dt>"}),n.html(a),m.each(i.monthNames,function(t,e){var a=t+1;u.append('<option value="'+a+'">'+e+"</option>")}),b.on("selectstart",function(){return!1})}()});var s=function(t,e){this.$element=m(t),this.options=e,this.tools=this.TOOLS(),this.$dateBtn=null;var a=new Date;this.options.minDate=a.formatDateTm(this.options.minDate),this.options.maxDate=a.formatDateTm(this.options.maxDate),this.events={focus_time:"focus.bjui.datepicker.time",click_prev:"click.bjui.datepicker.prev",click_next:"click.bjui.datepicker.next",click_ok:"click.bjui.datepicker.ok",click_days:"click.bjui.datepicker.days",click_clear:"click.bjui.datepicker.clear",click_close:"click.bjui.datepicker.close",click_tm:"click.bjui.datepicker.tm",click_spinner:"click.bjui.datepicker.spinner",mousedown_sp:"mousedown.bjui.datepicker.spinner",mouseup_sp:"mouseup.bjui.datepicker.spinner",change_ym:"change.bjui.datepicker.ym",click_time:"click.bjui.datepicker.time",keydown_time:"keydown.bjui.datepicker.time",keyup_time:"keyup.bjui.datepicker.time"}};function a(i){var n=arguments,o=i;return this.each(function(){var t=m(this),e=m.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.datepicker");a||t.data("bjui.datepicker",a=new s(this,e)),"string"==typeof o&&m.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}s.DEFAULTS={pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},s.EVENTS={afterChange:"afterchange.bjui.datepicker"},s.prototype.TOOLS=function(){var l=this,e={changeTmMenu:function(t){j.removeClass("hh").removeClass("mm").removeClass("ss"),t&&(j.addClass(t),k.removeClass("slt").filter("."+t).addClass("slt"))},clickTmMenu:function(a,t){j.find("> ul").hide().filter("."+t).show().find("> li").off(l.events.click_tm).on(l.events.click_tm,function(){var t=m(this),e=parseInt(t.text())<10?"0"+t.text():t.text();a.val(e)})},keydownInt:function(t){if(!(48<=t.keyCode&&t.keyCode<=57||t.keyCode===BJUI.keyCode.DELETE||t.keyCode===BJUI.keyCode.BACKSPACE))return!1},changeTm:function(t,e){var a=parseInt(t.val()),i=parseInt(t.data("start"))||0,n=parseInt(t.data("end")),o=parseInt(t.data("step")||1),s=e?e.data("add")?e.data("add"):-1:0,l=a;1===s?a<=n-o&&(l=a+o):-1===s?i+o<=a&&(l=a-o):n<a?l=n:a<i&&(l=i),l<10&&(l="0"+l),t.val(l)},closeCalendar:function(t){e.changeTmMenu(),t&&(m(document).off(l.events.click_close),b.hide())},get:function(t){return l.options[t]},getDays:function(t,e){return 2===e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},minMaxDate:function(t){var e=t.split("-").length-1,a="y-M-d";return 1===e?a="y-M":0===e&&(a="y"),t.parseDate(a)},getMinDate:function(){return this.minMaxDate(l.options.minDate)},getMaxDate:function(){var t=l.options.maxDate,e=t.split("-").length-1,a=this.minMaxDate(t);if(e<2){var i=this.getDays(a.getFullYear(),a.getMonth()+1);a.setDate(i),0===e&&a.setMonth(11)}return a},getDateWrap:function(t){t||(t=this.parseDate(l.sDate)||new Date);var e=t.getFullYear(),a=t.getMonth()+1,i=this.getDays(e,a);return{year:e,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:i,date:t}},changeDate:function(t,e,a){var i=new Date(t,e-1,a||1);return l.sDate=this.formatDate(i),i},changeDateTime:function(t,e,a,i,n,o){var s=new Date(t,e-1,a,i,n,o);return l.sDate=this.formatDate(s),s},changeDay:function(t,e){e||(e=0);var a=this.getDateWrap();return this.changeDate(a.year,a.month+parseInt(e),t)},changeMonth:function(t){var e=c.get(0).selectedIndex,a=c.find("option").length,i=1*u.val()+t;0===i?0===e?i=1:(i=12,e--,c.get(0).selectedIndex=e):13===i&&(e===a-1?i=12:(i=1,e++,c.get(0).selectedIndex=e)),u.val(i).change()},parseDate:function(t){return t?t.parseDate(l.options.pattern):null},formatDate:function(t){return t.formatDate(l.options.pattern)},hasHour:function(){return-1!==l.options.pattern.indexOf("H")},hasMinute:function(){return-1!==l.options.pattern.indexOf("m")},hasSecond:function(){return-1!==l.options.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!==l.options.pattern.indexOf(t[e]))return!0;return!1},afterChange:function(t){l.$element.trigger(s.EVENTS.afterChange,{value:t})}};return e},s.prototype.addBtn=function(){var t=this.$element;if(!this.$dateBtn&&!this.options.addbtn&&!t.parent().hasClass("wrap_bjui_btn_box")){this.$dateBtn=m(FRAG.dateBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var e=this.$element.parent(),a=this.$element.addClass("form-control").innerHeight();e.css({position:"relative",display:"inline-block"}),this.$dateBtn.css({height:a,lineHeight:a+"px"}).appendTo(e),this.$dateBtn.on("selectstart",function(){return!1})}},s.prototype.init=function(){this.$element.val()&&(this.sDate=this.$element.val().trim());var a=this,i=this.tools,n=i.getDateWrap(),o=i.getMinDate(),s=i.getMaxDate(),t=o.getFullYear(),e=s.getFullYear();c.empty();for(var l=t;l<=e;l++)c.append('<option value="'+l+'"'+(n.year===l?" selected":"")+">"+l+"</option>");u.val(n.month),c.add(u).off(this.events.change_ym).on(this.events.change_ym,function(){var t,e;e=i.hasTime()?(t=T.find(".slt"),i.changeDateTime(c.val(),u.val(),t.data("day"),n.hour,n.minute,n.second)):(t=T.find(".slt"),i.changeDate(c.val(),u.val(),t.data("day"))),a.create(i.getDateWrap(e),o,s)}),r.off(this.events.click_prev).on(this.events.click_prev,function(){a.tools.changeMonth(-1)}),d.off(this.events.click_prev).on(this.events.click_prev,function(){a.tools.changeMonth(1)}),p.off(this.events.click_clear).on(this.events.click_clear,function(){a.$element.val(""),i.closeCalendar(!0)}),f.off(this.events.click_ok).on(this.events.click_ok,function(){var t=T.find("dd.slt");if(t.hasClass("disabled"))return!1;var e=i.changeDay(t.data("day"),t.data("month"));i.hasTime()&&(e.setHours(parseInt(C.val())),e.setMinutes(parseInt(w.val())),e.setSeconds(parseInt($.val()))),i.closeCalendar(!0),a.$element.val(i.formatDate(e)).focus(),i.afterChange(e)}),h.off(this.events.click_close).on(this.events.click_close,function(){i.closeCalendar(!0)}),m(document).on(this.events.click_close,function(t){var e=m(t.target);t.target!==a.$element.get(0)&&(e.closest("#calendar").length||("datepicker"===e.data("toggle")||"datepickerbtn"===e.parent().data("toggle")||"datepickerbtn"===e.data("toggle")?i.closeCalendar(!1):i.closeCalendar(!0)))}),this.create(n,o,s)},s.prototype.create=function(t,e,a){var i,n,o,s=this,l=this.options,r=this.tools,d=new Date(t.year,t.month-1,1),c=d.getDay(),u="";if(0<c){d.setMonth(d.getMonth()-1);var h=r.getDateWrap(d);for(o=h.days-c+1;o<=h.days;o++)u+='<dd class="other'+(n=e<=(i=new Date(t.year,t.month-2,o))&&i<=a?"":" disabled")+'" data-month="-1" data-day="'+o+'">'+o+"</dd>"}for(o=1;o<=t.days;o++)n=e<=(i=new Date(t.year,t.month-1,o))&&i<=a?"":"disabled",o===t.day&&(n+=" slt"),u+='<dd class="'+n+'" data-day="'+o+'">'+o+"</dd>";for(o=1;o<=42-c-t.days;o++)u+='<dd class="other'+(n=e<=(i=new Date(t.year,t.month,o))&&i<=a?"":" disabled")+'" data-month="1" data-day="'+o+'">'+o+"</dd>";var p=T.html(u).find("dd");if(p.not(".disabled").off(this.events.click_days).on(this.events.click_days,function(){var t=m(this);if(r.hasTime())p.removeClass("slt"),t.addClass("slt");else{var e=r.changeDay(t.data("day"),t.data("month"));r.closeCalendar(!0),s.$element.val(r.formatDate(e)).focus(),r.afterChange(e)}}),r.hasDate()?v.removeClass("nodate"):v.addClass("nodate"),r.hasTime()){y.show(),C.val(t.hour<10?"0"+t.hour:t.hour).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("hh")});var f=parseInt(t.minute/l.mmStep)*l.mmStep;w.val(f<10?"0"+f:f).data("step",l.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("mm")}),$.val(r.hasSecond()?t.second<10?"0"+t.second:t.second:"00").data("step",l.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("ss")}),b.off("click").on("click",function(t){m(t.target).closest(".time").length||(j.find("> ul").hide(),r.changeTmMenu())}),k.off(this.events.keydown_time).on(this.events.keydown_time,r.keydownInt).each(function(){var t=m(this);t.off(s.events.keyup_time).on(s.events.keyup_time,function(){r.changeTm(t)})}).off(this.events.click_time).on(this.events.click_time,function(){r.clickTmMenu(m(this),m(this).data("type"))});var g=null;x.off(this.events.click_spinner).on(this.events.click_spinner,function(t){var e=m(this);k.filter(".slt").each(function(){r.changeTm(m(this),e)}),t.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(t){var e=m(this);g=setInterval(function(){k.filter(".slt").each(function(){r.changeTm(m(this),e)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(t){clearTimeout(g)}),r.hasHour()||C.attr("disabled",!0),r.hasMinute()||w.attr("disabled",!0),r.hasSecond()||$.attr("disabled",!0)}else y.hide();this.show()},s.prototype.show=function(){var t=this.$element.offset(),e=t.top+this.$element.get(0).offsetHeight,a=b.outerHeight(!0);a<e&&e>m(window).height()-a&&(e=t.top-a),b.css({left:t.left,top:e}).show().click(function(t){t.stopPropagation()})};var t=m.fn.datepicker;m.fn.datepicker=a,m.fn.datepicker.Constructor=s,m.fn.datepicker.noConflict=function(){return m.fn.datepicker=t,this},m(document).on(BJUI.eventType.initUI,function(t){var e=m(t.target).find('[data-toggle="datepicker"]');e.length&&(e.data("nobtn")||a.call(e,"addBtn"))}),m(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepickerbtn"]',function(t){var e=m(this).prevAll('[data-toggle="datepicker"]');e&&e.is(":text")&&(a.call(e,e.data()),t.preventDefault())}),m(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepicker"]',function(t){var e=m(this);e.data("onlybtn")||e.is(":text")&&(a.call(e,e.data()),t.preventDefault())})}(jQuery),function(s){"use strict";var l=function(t,e){this.$element=s(t),this.options=e};function i(i){var n=arguments,o=i;return this.each(function(){var t=s(this),e=s.extend({},l.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.ajaxtab");a||t.data("bjui.ajaxtab",a=new l(this,e)),"string"==typeof o&&s.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}l.DEFAULTS={url:void 0,target:void 0,reload:!1},l.prototype.init=function(){var t=this.options;if(t.url){if(t.url=decodeURI(t.url).replacePlh(this.$element.closest(".unitBox")),!t.url.isFinishedTm())return this.$element.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: "+t.url);if(t.url=encodeURI(t.url),t.target)if(t.reload)this.load();else this.$element.data("bjui.ajaxtab.reload")?this.$element.tab("show"):this.load();else BJUI.debug("Ajaxtab Plugin: Attribute 'target' is not defined!")}else BJUI.debug("Ajaxtab Plugin: Error trying to open a tab, url is undefined!")},l.prototype.load=function(){var t=this.$element,e=this.options;s(e.target).ajaxUrl({url:e.url,data:{},callback:function(){t.data("bjui.ajaxtab.reload",!0).tab("show")}})};var t=s.fn.ajaxtab;s.fn.ajaxtab=i,s.fn.ajaxtab.Constructor=l,s.fn.ajaxtab.noConflict=function(){return s.fn.ajaxtab=t,this},s(document).on("click.bjui.ajaxtab.data-api",'[data-toggle="ajaxtab"]',function(t){var e=s(this),a=e.data();a.url||(a.url=e.attr("href")),i.call(e,a),t.preventDefault()})}(jQuery),function(j){"use strict";var u=function(t,e){this.$element=j(t),this.options=e,this.tools=this.TOOLS(),this.datanames={tbody:"bjui.datagrid.tbody.dom",td_html:"bjui.datagrid.td.html",changeData:"bjui.datagrid.tr.changeData"},this.classnames={s_checkbox:"datagrid-checkbox",s_linenumber:"datagrid-linenumber",s_edit:"datagrid-column-edit",s_lock:"datagrid-lock",s_menu:"datagrid-menu-box",s_filter:"datagrid-filter-box",s_showhide:"datagrid-showhide-box",th_cell:"datagrid-cell",th_menu:"datagrid-column-menu",btn_menu:"datagrid-column-menu-btn",th_col:"datagrid-col",th_field:"datagrid-col-field",th_sort:"datagrid-sortable",th_resize:"datagrid-resize-head",th_resizemark:"datagrid-column-resizemark",tr_edit:"datagrid-edit-tr",tr_add:"datagrid-add-tr",tr_selected:"datagrid-selected-tr",td_edit:"datagrid-edit-td",td_changed:"datagrid-changed",td_linenumber:"datagrid-linenumber-td",td_checkbox:"datagrid-checkbox-td",li_asc:"datagrid-li-asc",li_desc:"datagrid-li-desc",li_filter:"datagrid-li-filter",li_showhide:"datagrid-li-showhide",li_lock:"datagrid-li-lock",li_unlock:"datagrid-li-unlock"}};function a(i){var n=arguments,o=i;return this.each(function(){var t=j(this),e=j.extend({},u.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.datagrid");a||t.data("bjui.datagrid",a=new u(this,e)),"string"==typeof o&&j.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}u.DEFAULTS={gridTitle:"",columns:null,data:null,dataUrl:null,loadType:"POST",dataType:"json",local:"remote",fieldSortable:!0,filterThead:!0,sortAll:!1,filterAll:!1,filterMult:!0,linenumberAll:!1,showLinenumber:!0,showCheckboxcol:!1,showEditbtnscol:!1,showTfoot:!1,showToolbar:!1,toolbarItem:"",toolbarCustom:"",columnResize:!0,columnMenu:!0,columnShowhide:!0,columnFilter:!0,columnLock:!0,paging:!0,pagingAlign:"center",editUrl:null,editCallback:null,editMode:"inline",editDialogOp:null,inlineEditMult:!0,saveAll:!0,addLocation:"first",delUrl:null,delType:"POST",delPK:null,delConfirm:!0,delCallback:null,jsonPrefix:"",contextMenuH:!0,contextMenuB:!1,hScrollbar:!1,fullGrid:!1,importOption:null,exportOption:null,beforeEdit:null,beforeDelete:null,afterSave:null,afterDelete:null},u.renderItem=function(a,t){if(!t||!t.length)return"";var i="";return j.each(t,function(t,e){if(void 0!==e[a])return i=e[a],!1}),i},u.prototype.TOOLS=function(){var v=this,y=v.options,i={getPageCount:function(t,e){return Math.ceil(e/t)},getPageInterval:function(t,e,a){var i=Math.ceil(a/2),n=t-a,o=i<e?Math.max(Math.min(e-i,n),0):0,s=i<e?Math.min(e+i,t):Math.min(a,t);return s-o==a&&(s+=1),s<a&&(s+=1),{start:o+1,end:s}},getRight:function(t){var a=0,e=t.data("index"),i=v.$tbody.find("> tr:first > td:lt("+(e+1)+")");return i&&i.length||(i=v.$colgroupH.find("> col:lt("+(e+1)+")")),i.each(function(){var t=j(this),e=t.is(":hidden")?0:t.outerWidth();a+=e}),a},getRight4Lock:function(t){var a=0,e=v.$lockTbody.find("> tr:first > td:eq("+t+")"),i=e&&e.prevAll().add(e);return i&&i.length||(i=v.$lockColgroupH.filter(":lt("+(t+1)+")")),i.each(function(){var t=j(this),e=t.is(":hidden")?0:t.outerWidth();a+=e}),a},beforeEdit:function(t,e){var a=y.beforeEdit;return!a||("string"==typeof a&&(a=a.toFunc()),"function"!=typeof a)||a.call(v,t,e)},afterSave:function(t,e){var a=y.afterSave;a&&("string"==typeof a&&(a=a.toFunc()),"function"==typeof a&&a.call(v,t,e))},afterDelete:function(){var t=y.afterDelete;t&&("string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call(v))},setColspan:function(t,e){t.colspan&&(t.colspan=t.colspan+e-1),t.index=t.index+e-1,t.parent&&this.setColspan(t.parent,e)},columns2Arr:function(t,n,o,s){var l=this;return n||(n=[]),o||(o=0),n[o]||(n[o]=[]),j.each(t,function(t,e){var a,i=n[o].length;if(s&&(e.parent=s),e.columns)return a=e.columns.length,o&&e.parent&&l.setColspan(e.parent,a),e.index=v.columnModel.length+a-1,e.colspan=a,e.quicksort=!1,n[o][i++]=e,l.columns2Arr(e.columns,n,o+1,e);e.rowspan=o,e.index=v.columnModel.length,e.menu=void 0===e.menu||e.menu,e.lock=void 0===e.lock||e.lock,e.hide=void 0!==e.hide&&e.hide,e.edit=void 0===e.edit||e.edit,e.add=void 0===e.add||e.add,e.quicksort=void 0===e.quicksort||e.quicksort,n[o][i++]=e,v.columnModel.push(e)}),n},createTrsByData:function(t,e){var a;v.$tbody||(v.$tbody=j("<tbody></tbody>")),t&&(a=t.list?t.list:t,v.paging.total=a.length,"object"==typeof t&&(t[BJUI.pageInfo.total]&&(v.paging.total=parseInt(t[BJUI.pageInfo.total])),t[BJUI.pageInfo.pageSize]&&(e&&v.paging.pageSize!=t[BJUI.pageInfo.pageSize]&&v.$selectpage.trigger("bjui.datagrid.paging.pageSize",t[BJUI.pageInfo.pageSize]),v.paging.pageSize=parseInt(t[BJUI.pageInfo.pageSize]))),v.paging.pageCount=i.getPageCount(v.paging.pageSize,v.paging.total),v.paging.pageCurrent>v.paging.pageCount&&(v.paging.pageCurrent=v.paging.pageCount),this.initTbody(a,e)),v.init_tbody||v.$tbody.appendTo(v.$element),v.init_thead||v.initThead()},initTbody:function(o,s){var l,r=this,d=v.allData,c=y.dataType||"json",u=v.columnModel,h=v.hiddenFields,p=(v.regional,[]),f=v.attach,g=v.paging,m=0,b=g.pageSize,t=function(){if(c=c.toLowerCase(),o&&(d=v.allData=o),d.length?"local"==y.local?(m=g.pageSize*(g.pageCurrent-1),b=m+g.pageSize,g.total!=d.length&&(g.total=d.length),m>d.length&&(m=g.pageSize*(g.pageCount-1))):d.length>g.pageSize&&(b=g.pageSize):b=0,b>d.length&&(b=d.length),"array"==c&&o&&o.length&&"array"==j.type(o[0])){var n,t=m,e=b,a=[];"local"==y.local&&(t=0,e=d.length);for(var i=t;i<e;i++)l={},n=0,j.each(d[i],function(t,e){var a,i=e;u[n]&&u[n].gridNumber&&n++,u[n]&&u[n].gridCheckbox&&n++,"string"==typeof i&&(i='"'+i+'"'),u[n]&&!u[n].gridEdit?(a='{"'+u[n].name+'":'+i+"}",j.extend(l,JSON.parse(a))):(u[n]&&u[n].gridEdit&&n++,n>=u.length&&h&&h[t-u.length]&&(a='{"'+h[t-u.length]+'":'+i+"}",j.extend(l,JSON.parse(a)))),n++}),a.push(l);d=v.allData=a}for(i=m;i<b;i++)l=j.extend({},v.allData[i],f),p.push(l);r.createTrs(p,s),v.data=p};s&&v.$boxM?v.$boxM.show().trigger("bjui.ajaxEnd").trigger("bjui.ajaxStart",[50,t]):t()},createTrs:function(g,m){var e=v.columnModel,a=v.paging,b=BJUI.doRegional(FRAG.gridEditBtn,v.regional);m&&(j.each(e,function(t,e){e.locked&&(v.colLock(e.th,!1),e.lock_refresh=!0)}),v.$tbody.empty(),v.$lockTableH&&v.$lockTableH.empty(),v.$lockTableB&&v.$lockTableB.empty()),j.each(g,function(u,h){var p,f=j("<tr></tr>"),t=y.linenumberAll?(a.pageCurrent-1)*a.pageSize+(u+1):u+1;j.extend(h,{gridNumber:t,gridIndex:u}),j.each(e,function(t,i){var e,n,o,a=i.name||"datagrid-noname",s=h[a],l="",r="";if(void 0===s&&(s=""),e=s,i.align&&(l=' align="'+i.align+'"'),i.gridCheckbox&&(s='<div><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox" value="true"></div>'),i.gridEdit&&(s=b,r=' class="'+v.classnames.s_edit+'"'),i.calc){i.calc_count||(i.calc_count=g.length);var d=s&&String(s).isNumber()?1*s:0;"sum"==i.calc||"avg"==i.calc?i.calc_sum=(i.calc_sum||0)+d:"max"==i.calc?i.calc_max=i.calc_max?i.calc_max<d?d:i.calc_max:d:"min"==i.calc&&(i.calc_min=i.calc_min?i.calc_min>d?d:i.calc_min:d)}if((p=j("<td"+l+r+"><div>"+s+"</div></td>")).data("val",s).appendTo(f),i.gridNumber&&p.addClass(v.classnames.td_linenumber),i.gridCheckbox&&p.addClass(v.classnames.td_checkbox),m&&i.hidden&&p.css("display","none"),i.items&&!i.render&&(i.render=j.datagrid.renderItem),i.render&&"string"==typeof i.render&&(i.render=i.render.toFunc()),i.render&&"function"==typeof i.render){var c="";if(i.items){"string"==typeof i.items&&(i.render.trim().startsWith("[")?i.render=i.render.toObj():i.render=i.render.toFunc()),i.renderTds||(i.renderTds=[]);"function"==typeof i.items?0==u?(v.delayRender||(v.delayRender=0),v.delayRender++,n=p,o=e,j.when(i.items.call(v)).then(function(a){i.items=a,c=i.render.call(v,o,a),n.html(c),j.each(i.renderTds,function(t,e){c=i.render.call(v,e.text(),a),e.html(c),t==i.renderTds.length-1&&(i.renderTds=null)}),v.delayRender--})):i.renderTds.push(p):(c=i.render.call(v,e,i.items),p.html(c))}else c=i.render.call(v,e),p.html(c)}}),f.appendTo(v.$tbody),m&&f.initui()}),m&&(v.initEvents(),y.editMode&&v.edit(),v.$paging&&v.$paging.trigger("bjui.datagrid.paging.jump"),j.each(e,function(t,e){e.lock_refresh&&(v.colLock(e.th,!0),delete e.lock_refresh)})),v.$boxM&&v.$boxM.trigger("bjui.ajaxStop").hide()},loadData:function(t,a){var i=this,e=y.dataUrl,o=y.dataType||"json";v.columnModel;v.$tbody&&v.$boxM.show().trigger("bjui.ajaxStart",[50]),"array"==(o=o.toLowerCase())&&(o="text"),j.ajax({url:e,data:t||{},type:y.loadType,cache:y.cache||!1,dataType:o,success:function(t){if("xml"==o){var n,e=[];j(t).find("row").each(function(){n={},j(this).find("cell").each(function(t){var e=j(this),a=e.text(),i=e.attr("name");n[i]=a}),e.push(n)}),e&&i.createTrsByData(e,a)}else"json"==o?i.createTrsByData(t,a):i.createTrsByData(t.toObj(),a)}})},appendColumns:function(){v.linenumberColumn={name:"gridNumber",gridNumber:!0,width:30,minWidth:30,label:"No.",align:"center",menu:!1,edit:!1,quicksort:!1},v.checkboxColumn={name:"gridCheckbox",gridCheckbox:!0,width:40,minWidth:40,label:"Checkbox",align:"center",menu:!1,edit:!1,quicksort:!1},v.editBtnsColumn={name:"gridEdit",gridEdit:!0,width:110,minWidth:110,label:"Edit",align:"center",menu:!1,edit:!1,hide:!1,quicksort:!1}},createThead:function(){var n,o,s,l,r,d,c,t=y.columns,u=[];this.appendColumns(),y.showCheckboxcol&&(t.unshift(v.checkboxColumn),"lock"==y.showCheckboxcol&&(v.checkboxColumn.initLock=!0)),y.showLinenumber&&(t.unshift(v.linenumberColumn),"lock"==y.showLinenumber&&(v.linenumberColumn.initLock=!0)),y.showEditbtnscol&&t.push(v.editBtnsColumn),u=this.columns2Arr(t,u),v.columnModel[v.columnModel.length-(y.showEditbtnscol?2:1)].lock=!1,y.hiddenFields&&(v.hiddenFields=y.hiddenFields),v.$thead=j("<thead></thead>"),j.each(u,function(t,e){var a,i=j('<tr style="height:25px;"></tr>');j.each(e,function(t,e){n=e.label||e.name,o=e.align?' align="'+e.align+'"':"",s=e.width?' width="'+e.width+'"':"",l=e.colspan?' colspan="'+e.colspan+'"':"",r=1<u.length-e.rowspan?' rowspan="'+(u.length-e.rowspan)+'"':"",d='<div class="'+v.classnames.th_resizemark+'"></div>',c="",e.gridCheckbox&&(n='<input type="checkbox" data-toggle="icheck">'),e.colspan&&(o=' align="center"'),e.thalign&&(o=' align="'+e.thalign+'"'),e.menu&&y.columnMenu&&(c=' class="'+v.classnames.th_menu+'"'),(a=j("<th"+c+s+o+l+r+'><div><div class="datagrid-space"></div><div class="datagrid-label">'+n+'</div><div class="'+v.classnames.th_cell+'">'+d+"</div></div></th>")).data("index",e.index).appendTo(i),a.find("> div").css("height",1<u.length-e.rowspan?24*(u.length-e.rowspan)+"px":"24px"),r||a.addClass("single-row"),e.gridNumber&&a.addClass(v.classnames.td_linenumber),y.fieldSortable&&e.quicksort&&a.addClass("datagrid-quicksort-th"),e.th=a}),i.appendTo(v.$thead)}),v.$thead.appendTo(v.$element)},createTbody:function(){var t=y.data;v.columnModel;t?("string"==typeof t&&(t=t.trim().startsWith("[")||t.trim().startsWith("{")?t.toObj():t.toFunc()),"function"==typeof t&&(t=t.call()),this.createTrsByData(t)):y.dataUrl&&this.loadData()},setBoxbH:function(t){var e,a=t||y.height,i=0;a<100||(isNaN(a)&&(a=v.$grid.height()),v.$boxT&&(a-=e=v.$boxT.outerHeight(),i+=e),v.$toolbar&&(a-=e=v.$toolbar.outerHeight(),i+=e),v.$box_paging&&(a-=v.$box_paging.outerHeight()),v.$boxF&&(a-=v.$boxF.outerHeight()),i+=v.$tableH.outerHeight(),(a-=v.$boxH.outerHeight())<0&&(a=0),v.$boxB.height(a),v.$boxM.height(a).css({top:i}))},fixedH:function(t){this.setBoxbH(t)},showSubMenu:function(e,a,i){var n,o,s=a.outerWidth(),l=i.data("width")||i.outerWidth(),r=v.$boxH.width(),d=function(t,e,a){n=e.offset().left-v.$grid.offset().left-1,o={left:"50%"},t.removeClass("active"),e.hasClass("position-right")||r-n<s+l?(a.css({left:"auto",right:"100%"}),o={right:"50%"}):a.css({left:"100%",right:"auto"}),o.opacity=.2,a.stop().animate(o,"fast",function(){j(this).hide()})};e.hover(function(){if(i.appendTo(e),e.hasClass(v.classnames.li_filter)&&i.is(":visible"))return!1;var t=e.siblings("."+v.classnames.li_filter);t.length&&t.hasClass("active")&&d(t,a,t.find("> ."+v.classnames.s_filter)),n=a.offset().left-v.$grid.offset().left-1,o={left:"100%"},a.hasClass("position-right")||r-n<s+l?(i.css({left:"auto",right:"50%"}),o={right:"100%"}):i.css({left:"50%",right:"auto"}),o.opacity=1,e.addClass("active"),i.show().stop().animate(o,"fast")},function(){if(e.hasClass(v.classnames.li_filter))return!1;d(e,a,i)}),e.on("bjui.datagrid.th.submenu.hide",function(t,e,a){d(j(this),e,a)})},locking:function(t){var e=t.data("index"),a=v.columnModel[e],i=a.lock,n=a.locked,o=v.$menu,s=o.find("> ul").find("> li."+v.classnames.li_lock),l=s.next();n?(s.addClass("disable"),l.removeClass("disable")):(l.addClass("disable"),s.removeClass("disable")),i?(s.show().off("click").on("click",function(){s.hasClass("disable")||(o.hide().data("bjui.datagrid.menu.btn").removeClass("active"),v.colLock(t,!0))}),l.show().off("click").on("click",function(){l.hasClass("disable")||(o.hide().data("bjui.datagrid.menu.btn").removeClass("active"),v.colLock(t,!1))})):(s.hide().off("click"),l.hide().off("click"))},createShowhide:function(){var n;v.$showhide||(v.col_showhide_count=v.columnModel.length,n=j('<ul class="'+v.classnames.s_showhide+'" role="menu"></ul>'),j.each(v.columnModel,function(t,e){(e.gridNumber||e.gridCheckbox||e.gridEdit)&&v.col_showhide_count--;var a,i=j(FRAG.gridShowhide.replaceAll("#index#",e.index).replaceAll("#label#",e.label||"")).toggleClass("nodisable",!!(e.gridNumber||e.gridCheckbox||e.gridEdit));a=e,i.click(function(){if(j(this).hasClass("disable"))return!1;var t=j(this),e=!t.find("i").hasClass("fa-check-square-o");a.index,t.toggleClass("datagrid-col-check").find("i").attr("class","fa fa"+(e?"-check":"")+"-square-o"),v.showhideColumn(a.th,e),a.gridNumber||a.gridCheckbox||a.gridEdit||(v.col_showhide_count=e?v.col_showhide_count+1:v.col_showhide_count-1),1==v.col_showhide_count?n.find("> li.datagrid-col-check").addClass("disable"):n.find("> li.disable").removeClass("disable"),n.find("> li.nodisable").removeClass("disable")}),i.appendTo(n),e.hide&&i.trigger("click")}),n.appendTo(v.$grid),n.data("width",n.outerWidth()),v.$showhide=n)},showhide:function(t,a){var e=t.index,i=t.th,n=v.$tbody.find("> tr"),o=a?"":"none",s=function(t){var e=t.colspan;a?e++:e--,e?t.th.css("display",""):t.th.css("display","none"),t.th.attr("colspan",e),t.colspan=e,t.parent&&s(t.parent)};void 0===t.hidden&&(t.hidden=!1),t.hidden!=!a&&(t.hidden=!a,i.css("display",o),n.find("> td:eq("+e+")").css("display",o),v.$colgroupH.find("> col").eq(e).css("display",o),v.$colgroupB.find("> col").eq(e).css("display",o),v.$thead.find("> tr.datagrid-filter > th:eq("+e+")").css("display",o),v.$boxF&&(v.$tableF.find("> thead > tr > th:eq("+e+")").css("display",o),v.$colgroupF.find("> col").eq(e).css("display",o)),t.calc&&v.$tfoot&&v.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),t.parent&&s(t.parent))},jumpPage:function(t,e){var a,i=v.allData;t&&(v.paging.pageCurrent=t),e&&(v.paging.pageSize=e,v.paging.pageCount=this.getPageCount(e,v.paging.total),v.paging.pageCurrent>v.paging.pageCount&&(v.paging.pageCurrent=v.paging.pageCount)),"remote"==y.local?(a=this.getRemoteFilterData(!0),this.loadData(a,!0)):this.initTbody(i,!0)},quickSort:function(i){if(v.isDom){if("local"==y.local)return;y.sortAll=!0}if(v.$tbody.find("> tr."+v.classnames.tr_edit).length)v.$tbody.alertmsg("info",BJUI.getRegional("datagrid.editMsg"));else{var t,e,a=i.th,n=v.data,o=v.allData,s=i.name,l=i.type,r=v.$thead.find("> tr > th.datagrid-quicksort-th");s||(s="datagrid-noname");var d=function(t){t.sort(function(t,e){t[s];var a=typeof e[s];return"boolean"==l||"number"==l||"number"==a||"boolean"==a?i.sortAsc?t[s]-e[s]:e[s]-t[s]:i.sortAsc?String(t[s]).localeCompare(e[s]):String(e[s]).localeCompare(t[s])})};r.find("> div > .datagrid-label > i").remove(),i.sortAsc?(e="desc",i.sortAsc=!1):(e="asc",i.sortAsc=!0),a.find("> div > .datagrid-label").prepend('<i class="fa fa-long-arrow-'+(i.sortAsc?"up":"down")+'"></i>'),y.sortAll?"remote"==y.local?((t={})[BJUI.pageInfo.orderField]=s,t[BJUI.pageInfo.orderDirection]=e,t[BJUI.pageInfo.pageSize]=v.paging.pageSize,t[BJUI.pageInfo.pageCurrent]=v.paging.pageCurrent,this.loadData(t,!0)):(d(o),this.initTbody(o,!0)):(d(n),this.createTrs(n,!0))}},quickFilter:function(n,t){if(v.isDom){if("remote"!=y.local)return void BJUI.debug("Datagrid Plugin: Please change the local option is remote!");if(!y.dataUrl)return void BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!")}n.th;var e,a=v.data,i=v.allData,o=n.name,s=function(t,e,a){var i=!1;switch(t){case"=":i=String(e)==String(a);break;case"!=":i=String(e)!=String(a);break;case">":i=parseFloat(a)>parseFloat(e);break;case"<":i=parseFloat(a)<parseFloat(e);break;case"like":i="select"==n.type?String(e)==String(a):0<=String(a).indexOf(String(e))}return i},l=function(t,a){return j.grep(t,function(t,e){return i=t,n=0,j.each(a,function(t,e){var a=e.datas;if(n++,!a)return n--,e.model.isFiltered=!1,e.model.th.trigger("bjui.datagrid.th.filter",[!1]),e.model.quickfilter&&e.model.quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0;e.model.isFiltered=!0,e.model.th.trigger("bjui.datagrid.th.filter",[!0]),a.andor?"and"==a.andor?s(a.operatorA,a.valA,i[t])&&s(a.operatorB,a.valB,i[t])&&n--:"or"==a.andor&&(s(a.operatorA,a.valA,i[t])||s(a.operatorB,a.valB,i[t]))&&n--:a.operatorB?s(a.operatorB,a.valB,i[t])&&n--:s(a.operatorA,a.valA,i[t])&&n--}),!n;var i,n})};v.filterDatas||(v.filterDatas={}),y.filterMult||(v.filterDatas={}),v.filterDatas[o]={datas:t,model:n},"remote"!=y.local&&i&&(v.oldAllData?i=v.oldAllData.concat():v.oldAllData=i.concat()),y.filterAll?"remote"==y.local?this.loadData(this.getRemoteFilterData(),!0):(e=l(i,v.filterDatas),v.paging.pageCurrent=1,v.paging.pageCount=this.getPageCount(v.paging.pageSize,e.length),this.initTbody(e,!0)):v.isDom?this.loadData(this.getRemoteFilterData(),!0):(e=l(a,v.filterDatas),this.createTrs(e,!0))},getRemoteFilterData:function(t){var a=[];return v.filterDatas&&!j.isEmptyObject(v.filterDatas)&&(j.each(v.filterDatas,function(t,e){if(!e.datas)return e.model.isFiltered=!1,e.model.th.trigger("bjui.datagrid.th.filter",[!1]),e.model.quickfilter&&e.model.quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0;e.model.isFiltered=!0,e.model.th.trigger("bjui.datagrid.th.filter",[!0]),y.jsonPrefix&&(t=y.jsonPrefix+"."+t),e.datas.andor&&a.push({name:"andor",value:e.datas.andor}),e.datas.operatorA&&(a.push({name:t,value:e.datas.valA}),a.push({name:t+".operator",value:e.datas.operatorA})),e.datas.operatorB&&(a.push({name:t,value:e.datas.valB}),a.push({name:t+".operator",value:e.datas.operatorB}))}),t||(v.paging.pageCurrent=1)),a.push({name:BJUI.pageInfo.pageSize,value:v.paging.pageSize}),a.push({name:BJUI.pageInfo.pageCurrent,value:v.paging.pageCurrent}),a},setDomData:function(t){var n=v.columnModel,o={},e=t.attr("data-hidden-datas"),a=v.attach;return t.find("> td").each(function(t){var e=j(this),a=n[t],i=e.attr("data-val")||e.text();a.name?o[a.name]=i:o["datagrid-noname"+t]=i}),e&&(e=e.toObj()),j.extend(o,a,{gridNumber:t.index()+1},e),t.data("initData",o),o},initEditInputs:function(){var t=v.columnModel;return v.inputs=[],j.each(t,function(t,e){var a=e.name,i="",n="",o=[],s="";if(e)if(e.attrs&&"object"==typeof e.attrs&&j.each(e.attrs,function(t,e){s+=" "+t+"="+e}),e==v.linenumberColumn||e==v.checkboxColumn||e==v.editBtnsColumn)v.inputs.push("");else if(a)if(e.rule?i=' data-rule="'+e.label+"："+e.rule+'"':"date"==e.type&&(i=' data-rule="pattern('+(e.pattern||"yyyy-MM-dd")+')"'),e.type)switch(e.type){case"date":e.pattern||(e.pattern="yyyy-MM-dd"),n=' data-pattern="'+e.pattern+'"',v.inputs.push('<input type="text" name="'+a+'" data-toggle="datepicker"'+n+i+s+">");break;case"select":if(!e.items)return;j.each(e.items,function(t,e){j.each(e,function(t,e){o.push('<option value="'+t+'">'+e+"</option>")})}),v.inputs.push('<select name="'+a+'" data-toggle="selectpicker"'+i+s+' data-width="100%">'+o.join("")+"</select>");break;case"boolean":v.inputs.push('<input type="checkbox" name="'+a+'" data-toggle="icheck"'+i+s+' value="true">');break;case"lookup":v.inputs.push('<input type="text" name="'+a+'" data-toggle="lookup" data-custom-event="true"'+i+s+">");break;case"spinner":v.inputs.push('<input type="text" name="'+a+'" data-toggle="spinner"'+i+s+">");break;case"textarea":v.inputs.push('<textarea data-toggle="autoheight" rows="1"'+i+s+"></textarea>");break;default:v.inputs.push('<input type="text" name="'+a+'"'+i+s+">")}else v.inputs.push('<input type="text" name="'+a+'"'+i+s+">");else v.inputs.push("")}),v.inputs},contextmenuH:function(){var i=this;v.$tableH.on("contextmenu",function(t){v.$showhide||i.createShowhide();var e=t.pageX,a=t.pageY;j(window).width()<e+v.$showhide.width()&&(e-=v.$showhide.width()),j(window).height()<a+v.$showhide.height()&&(a-=v.$showhide.height()),v.$menu&&v.$grid.trigger("click.bjui.datagrid.filter"),v.$showhide.appendTo("body").css({left:e,top:a,opacity:1,"z-index":9999}).show(),j(document).on("click",function(t){j(t.target).closest("."+v.classnames.s_showhide).length||v.$showhide.css({left:"50%",top:0,opacity:.2,"z-index":""}).hide().appendTo(v.$grid)}),t.preventDefault(),t.stopPropagation()})},contextmenuB:function(t,i){t.contextmenu("show",{exclude:"input, .bootstrap-select",items:[{icon:"refresh",title:BJUI.getRegional("datagrid.refresh"),func:function(t,e){v.refresh()}},{title:"diver"},{icon:"plus",title:BJUI.getRegional("datagrid.add"),func:function(t,e){v.add()}},{icon:"edit",title:BJUI.getRegional("datagrid.edit"),func:function(t,e){var a=t;i&&(a=v.$tbody.find("> tr:eq("+a.index()+")")),v.doEditRow(a)}},{icon:"undo",title:BJUI.getRegional("datagrid.cancel"),func:function(t,e){var a=t;i&&(a=v.$tbody.find("> tr:eq("+a.index()+")")),a.hasClass(v.classnames.tr_edit)||(a=v.$tbody.find("> tr."+v.classnames.tr_edit)),v.doCancelEditRow(a)}},{icon:"remove",title:BJUI.getRegional("datagrid.del"),func:function(t,e){var a=t;i&&(a=v.$tbody.find("> tr:eq("+a.index()+")")),v.delRows(a)}}]})}};return i},u.prototype.createTable=function(){var t=this.options,e=this.tools;t.columns&&e.createThead(),(t.data||t.dataUrl)&&e.createTbody()},u.prototype.setColumnModel=function(){var p=this,f=p.options,t=p.$thead.find("> tr"),g=[],m=[],e=t.length;if(!p.isDom){var a;p.tools.appendColumns();var i=1<e?' rowspan="'+e+'"':"";f.showCheckboxcol&&(p.columnModel.push(p.checkboxColumn),"lock"==f.showCheckboxcol&&(p.checkboxColumn.initLock=!0),(a=j("<th"+i+'><input type="checkbox" data-toggle="icheck"></th>')).prependTo(t.first()),i&&a.data("datagrid.column",p.checkboxColumn)),f.showLinenumber&&(p.columnModel.unshift(p.linenumberColumn),"lock"==f.showLinenumber&&(p.linenumberColumn.initLock=!0),(a=j('<th class="datagrid-linenumber-td"'+i+">No.</th>")).prependTo(t.first()),i&&a.data("datagrid.column",p.linenumberColumn)),f.showEditbtnscol&&(p.columnModel[a.index()]=p.editBtnsColumn,(a=j("<th"+i+">Edit</th>")).appendTo(t.first()),i&&a.data("datagrid.column",p.editBtnsColumn))}t.length&&1==e?(t.height(25),t.find("> th").each(function(t){var e=j(this).addClass("single-row"),a=e.data("options"),i=e.attr("width")||e.outerWidth(),n=e.html();p.columnModel.length&&p.columnModel[t]?a=p.columnModel[t]:(a&&"string"==typeof a&&(a=a.toObj()),"object"!=typeof a&&(a={}),a.index=t,a.label=n,a.width=void 0===a.width?i:a.width,a.menu=void 0===a.menu||a.menu,a.lock=void 0===a.lock||a.lock,a.hide=void 0!==a.hide&&a.hide,a.edit=void 0===a.edit||a.edit,a.add=void 0===a.add||a.add,a.quicksort=void 0===a.quicksort||a.quicksort,p.columnModel[t]=a),(a.th=e).html('<div><div class="datagrid-space"></div><div class="datagrid-label">'+n+'</div><div class="'+p.classnames.th_cell+'"><div class="'+p.classnames.th_resizemark+'"></div></div></div>'),a.menu&&f.columnMenu&&e.addClass(p.classnames.th_menu),f.fieldSortable&&a.quicksort&&e.addClass("datagrid-quicksort-th"),a.align&&e.attr("align",a.align),e.data("index",t).find("> div").css("height","24px")})):t.each(function(t){var d=[],c=[],u=-1,h=0;g.length&&(d=g.concat(),c=m.concat()),g=[],m=[],j(this).height(25).find("> th").each(function(t){var e=j(this),a=e.data("options")||e.data("datagrid.column")||{},i=parseInt(e.attr("colspan")||0),n=parseInt(e.attr("rowspan")||0),o=e.attr("width")||e.outerWidth(),s=e.html();if(a&&"string"==typeof a&&(a=a.toObj()),"object"!=typeof a&&(a={}),-[1]||1!=i||(i=0),a.label=s,a.th=e,a.gridCheckbox&&(a.label="Checkbox"),u++,i){a.colspan=i;for(var l=d.length?d[u]:u,r=l;r<l+i;r++)g[h++]=r,m[h-1]=a;u+=i-1,e.data("index",u),d.length&&(a.parent=c[u])}n&&1!=n||e.addClass("single-row"),i?e.html('<div style="height:'+(n?24*n:24)+'px;"><div class="datagrid-space"></div><div class="datagrid-label">'+s+'</div><div class="'+p.classnames.th_cell+'"><div class="'+p.classnames.th_resizemark+'"></div></div></div>'):(a.width=void 0===a.width?o:a.width,a.menu=void 0===a.menu||a.menu,a.lock=void 0===a.lock||a.lock,a.hide=void 0!==a.hide&&a.hide,a.edit=void 0===a.edit||a.edit,a.add=void 0===a.add||a.add,a.quicksort=void 0===a.quicksort||a.quicksort,e.html('<div style="height:'+(n?24*n:24)+'px;"><div class="datagrid-space"></div><div class="datagrid-label">'+s+'</div><div class="'+p.classnames.th_cell+'"><div class="'+p.classnames.th_resizemark+'"></div></div></div>'),a.menu&&f.columnMenu&&e.addClass(p.classnames.th_menu),f.fieldSortable&&a.quicksort&&e.addClass("datagrid-quicksort-th"),a.align&&e.attr("align",a.align),d.length?(a.index=d[u],a.parent=c[u],p.columnModel[d[u]]=a):(a.index=u,p.columnModel[u]=a),e.data("index",a.index))})})},u.prototype.init=function(){if(this.$element.isTag("table")&&!this.$element.data("bjui.datagrid.init")){var t,e=this,a=e.tools,i=e.$element.parent();e.options.options&&("string"==typeof e.options.options&&(e.options.options=e.options.options.toObj()),j.extend(e.options,"object"==typeof e.options.options&&e.options.options)),e.parentH=i.height(),t=e.options,e.$element.data("bjui.datagrid.init",!0),t.width||i.width(),String(t.width).endsWith("%")&&Math.round(i.width()*parseInt(String(t.width).replace("%",""))/100),t.height=t.height||300,e.isDom=!1,e.columnModel=[],e.inputs=[],e.$grid=j('<div class="bjui-datagrid"></div>').width(t.width).height(t.height),e.$boxH=j('<div class="datagrid-box-h"></div>'),e.$boxB=j('<div class="datagrid-box-b"></div>'),e.$boxM=j('<div class="datagrid-box-m"></div>').appendTo(e.$grid),e.regional=BJUI.regional.datagrid,e.$element.before(e.$grid),"string"==typeof t.paging&&(t.paging=t.paging.toObj()),e.paging=j.extend({},{pageSize:30,selectPageSize:"30,60,90",pageCurrent:1,total:0,showPagenum:5},"object"==typeof t.paging&&t.paging),e.attach={gridNumber:0,gridCheckbox:"#checkbox#",gridEdit:"#edit#"},e.$thead=e.$element.find("> thead"),e.$tbody=e.$element.find("> tbody"),e.$tbody&&e.$tbody.find("> tr").length&&(e.isDom=!0),t.columns?("string"==typeof t.columns&&(t.columns.trim().startsWith("[")?t.columns=t.columns.toObj():t.columns=t.columns.toFunc()),"function"==typeof t.columns&&(t.columns=t.columns.call()),e.$thead=null,a.createThead()):e.$thead&&e.$thead.length&&e.$thead.find("> tr").length&&e.setColumnModel(),e.initTop(),e.$grid.data("bjui.datagrid.table",e.$element.clone()),e.isDom?(a.appendColumns(),e.$tbody.find("> tr > td").each(function(){var t=j(this),e=t.html();t.html("<div>"+e+"</div>")}),e.paging.total?e.paging.pageCount=a.getPageCount(e.paging.pageSize,e.paging.total):(e.paging.total=e.$tbody.find("> tr").length,e.paging.pageCount=1),e.paging.pageCurrent=1,e.initThead()):(e.$tbody=null,(t.data||t.dataUrl)&&a.createTbody())}},u.prototype.refresh=function(){var t=this,e=t.options,a=t.tools,i=(t.isDom,BJUI.pageInfo),n=t.paging,o={};if(!e.dataUrl)return e.data&&e.data.length?void a.initTbody(t.allData,!0):void BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!");o[i.pageSize]=n.pageSize,o[i.pageCurrent]=n.pageCurrent,a.loadData(o,!0),t.filterDatas=null,j.each(t.columnModel,function(t,e){e.th.trigger("bjui.datagrid.th.filter",[!1]),e.isFiltered=!1,e.quickfilter&&e.quickfilter.trigger("bjui.datagrid.thead.clearfilter")}),t.$thead.find("> tr > th.datagrid-quicksort-th").find("> div > .datagrid-label > i").remove()},u.prototype.destroy=function(){var t=this.$grid.data("bjui.datagrid.table");t&&(this.$element.html(t.html()).insertBefore(this.$grid),this.$grid.remove())},u.prototype.initTop=function(){var a,i=this,n=i.options,t=(i.regional,!1),o='<button type="button" class="btn" data-icon=""></button>';if(n.gridTitle&&(i.$boxT=j('<div class="datagrid-title">'+n.gridTitle+"</div>"),i.$boxT.appendTo(i.$grid)),n.showToolbar&&(n.toolbarItem||n.toolbarCustom)){if(i.$toolbar=j('<div class="datagrid-toolbar"></div'),n.toolbarItem&&(t=!0,0<=n.toolbarItem.indexOf("all")&&(n.toolbarItem="add, edit, cancel, save, |, del, |, refresh, |, import, export"),j.each(n.toolbarItem.split(","),function(t,e){if(e=e.trim().toLocaleLowerCase(),(!a||"|"==e)&&(a=j('<div class="btn-group" role="group"></div>').appendTo(i.$toolbar),"|"==e))return!0;"add"==e?i.$toolbar_add=j(o).attr("data-icon","plus").addClass("btn-blue").text(BJUI.getRegional("datagrid.add")).appendTo(a).on("click",function(t){i.add()}):"edit"==e?i.$toolbar_edit=j(o).attr("data-icon","edit").addClass("btn-green").text(BJUI.getRegional("datagrid.edit")).appendTo(a).on("click",function(t){var e=i.$tbody.find("> tr."+i.classnames.tr_selected);e.length?n.inlineEditMult?i.doEditRow(e):i.$lastSelect?i.doEditRow(i.$lastSelect):i.doEditRow(e.first()):j(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"cancel"==e?i.$toolbar_calcel=j(o).attr("data-icon","undo").addClass("btn-orange").text(BJUI.getRegional("datagrid.cancel")).appendTo(a).on("click",function(t){i.doCancelEditRow(i.$tbody.find("> tr."+i.classnames.tr_edit))}):"save"==e?i.$toolbar_save=j(o).attr("data-icon","save").addClass("btn-default").text(BJUI.getRegional("datagrid.save")).appendTo(a).on("click",function(t){i.doSaveEditRow()}):"del"==e?i.$toolbar_del=j(o).attr("data-icon","times").addClass("btn-red").text(BJUI.getRegional("datagrid.del")).appendTo(a).on("click",function(t){var e=i.$tbody.find("> tr."+i.classnames.tr_selected);e.length?i.delRows(e):j(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"refresh"==e?i.$toolbar_refresh=j(o).attr("data-icon","refresh").addClass("btn-green").text(BJUI.getRegional("datagrid.refresh")).appendTo(a).on("click",function(t){i.refresh()}):"import"==e?i.$toolbar_add=j(o).attr("data-icon","sign-in").addClass("btn-blue").text(BJUI.getRegional("datagrid.import")).appendTo(a).on("click",function(t){if(n.importOption){var e=n.importOption;"string"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&("dialog"==e.type?i.$grid.dialog(e.options):"navtab"==e.type?i.$grid.navtab(e.options):i.$grid.bjuiajax("doAjax",e.options))}}):"export"==e&&(i.$toolbar_add=j(o).attr("data-icon","sign-out").addClass("btn-green").text(BJUI.getRegional("datagrid.export")).appendTo(a).on("click",function(t){if(n.exportOption){var e=n.exportOption;"string"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&("dialog"==e.type?i.$grid.dialog(e.options):"navtab"==e.type?i.$grid.navtab(e.options):"file"==e.type?j.fileDownload(e.options.url,{failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),i.$grid.bjuiajax("ajaxDone",t)}}):i.$grid.bjuiajax("doAjax",e.options))}}))})),n.toolbarCustom){var e,s=j('<div style="display:inline-block;"></div>');if("string"==typeof n.toolbarCustom){var l=j(n.toolbarCustom);l&&l.length?e=l:(l=l.toFunc())&&"string"==typeof(e=l.call(i))&&(e=j(e))}else"function"==typeof n.toolbarCustom?"string"==typeof(e=n.toolbarCustom.call(i))&&(e=j(e)):e=n.toolbarCustom;e&&e.length&&"string"!=typeof e&&(t&&s.css("margin-left","5px"),s.appendTo(i.$toolbar),e.appendTo(s))}i.$toolbar.appendTo(i.$grid)}},u.prototype.initThead=function(){var a,n=this,t=n.options,e=n.tools,i=n.columnModel,o=[],s=n.$tbody.find("> tr:first-child > td");n.init_thead=!0,n.$colgroupH=j("<colgroup></colgroup>"),n.$tableH=j('<table class="table table-bordered"></table>').append(n.$thead),n.$trsH=n.$thead.find("> tr"),n.table_width=0,j.each(n.columnModel,function(t,e){a=e.width?e.width:s.eq(t).outerWidth()||50,o.push('<col style="width:'+a+'px;">'),e.width=a,n.table_width+=a}),n.$thead.before(n.$colgroupH.append(o.join(""))),n.$grid.append(n.$boxH.append(j('<div class="datagrid-wrap-h"></div>').append(n.$tableH)));var l=n.$trsH.find("> th");l.filter(".datagrid-quicksort-th").on("click.bjui.datagrid.quicksort",function(t){j(t.target).closest("."+n.classnames.th_cell).length||n.isResize||e.quickSort(i[j(this).data("index")])}),l.filter(".datagrid-column-menu").on("bjui.datagrid.th.filter",function(t,e){var a=j(this),i=a.find("> div > ."+n.classnames.th_cell+"> ."+n.classnames.btn_menu+"> .btn");e?(a.addClass("filter-active"),i.find("> i").attr("class","fa fa-filter")):(a.removeClass("filter-active"),i.find("> i").attr("class","fa fa-bars"))}),t.contextMenuH&&e.contextmenuH(),n.initTbody(),t.columnResize&&n.colResize(),t.columnMenu&&n.colMenu(),t.paging&&n.initPaging(),t.editMode&&n.edit(),n.resizeGrid();var r=function(){t.showTfoot&&n.initTfoot(),n.initLock(),n.$grid.initui(),t.height&&e.fixedH(),setTimeout(function(){n.fixedWidth("init")},500),n.initEvents()};t.filterThead?n.delayRender?n.delayFilterTimeout=setInterval(function(){n.delayRender||(clearInterval(n.delayFilterTimeout),n.filterInThead(),r())},100):(n.filterInThead(),r()):r()},u.prototype.fixedWidth=function(t){var e,a,i,n=this,o=n.options,s=0,l=n.columnModel,r=l.length;if(!t||!n.initFixedW){n.initFixedW=!0;var d=function(){n.$boxH.find("> div").css("width",""),n.$boxB.find("> div").css("width",""),n.$boxF&&n.$boxF.find("> div").css("width",""),n.$pagingCon&&n.$pagingCon.css("width",""),(e=n.$boxB.find("> div").width())&&(n.$boxB.find("> div").width(e),n.$boxH.find("> div").width(e),n.$boxF&&n.$boxF.find("> div").width(e),n.table_width>e?n.$pagingCon&&n.$pagingCon.width(e):n.$pagingCon&&n.$pagingCon.width(n.table_width))};o.fullGrid?(d(),e&&e<n.table_width&&(l[r-1]==n.editBtnsColumn&&(s+=n.editBtnsColumn.width,r--),l[0]==n.linenumberColumn&&(s+=n.linenumberColumn.width,r--),l[0]!=n.checkboxColumn&&l[1]!=n.checkboxColumn||(s+=n.checkboxColumn.width,r--),(a=parseInt((e-n.table_width-s)/r))?a--:a=-1,j.each(l,function(t,e){if(e==n.linenumberColumn||e==n.checkboxColumn||e==n.editBtnsColumn)return!0;(i=e.width+a)<=0&&(i=1),n.$colgroupH.find("> col:eq("+e.index+")").width(i),n.$colgroupB.find("> col:eq("+e.index+")").width(i),n.$colgroupF&&n.$colgroupF.find("> col:eq("+e.index+")").width(i),e.new_width=i}))):d()}},u.prototype.initTbody=function(){var t=this,e=t.options,a=(t.tools,t.$tbody.find("> tr").find("> td"),"0");t.init_tbody=!0,t.$colgroupB=t.$colgroupH.clone(),t.$tableB=t.$element,t.$tableB.removeAttr("data-toggle width").empty().append(t.$tbody),t.$tbody.before(t.$colgroupB),t.$grid.append(t.$boxB.append(j('<div class="datagrid-wrap-b"></div>').append(t.$tableB))),-[1]||(a="auto"),e.fullGrid&&(a="100%"),t.$tableH.width(a),t.$tableB.width(a),t.$tableB.addClass("table table-bordered").removeClass("table-hover"),t.$boxB.scroll(function(){t.$boxH.find("> div").prop("scrollLeft",this.scrollLeft),t.$boxF&&t.$boxF.find("> div").prop("scrollLeft",this.scrollLeft),t.$lockB&&t.$lockB.prop("scrollTop",this.scrollTop)}),t.isDom&&(e.showLinenumber&&t.showLinenumber(e.showLinenumber),e.showCheckboxcol&&t.showCheckboxcol(e.showCheckboxcol),e.showEditbtnscol&&t.showEditCol(e.showEditbtnscol),t.$grid.data(t.datanames.tbody,t.$tbody.clone()))},u.prototype.initEvents=function(t){var l=this,e=l.options,a=l.$tbody.find("> tr");t||(t=a),t.on("click.bjui.datagrid.tr",function(t,e){var a,i=j(this),n=i.index(),o=l.$tbody.find("> tr."+l.classnames.tr_selected),s=l.$lastSelect;l.$lockTbody&&l.$lockTbody.find("> tr");if(e)(a=e.is(":checked"))||(l.$lastSelect=i),l.selectedRows(i,!a);else{if(i.hasClass(l.classnames.tr_edit))return;BJUI.KeyPressed.ctrl||BJUI.KeyPressed.shift?(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),BJUI.KeyPressed.ctrl?(i.hasClass(l.classnames.tr_selected)||(l.$lastSelect=i),l.selectedRows(i)):BJUI.KeyPressed.shift&&(s||(s=l.$lastSelect=i),s.length&&(l.selectedRows(null),s.index()!=n?s.index()>n?l.selectedRows(i.nextUntil(s).add(i).add(s),!0):l.selectedRows(i.prevUntil(s).add(i).add(s),!0):l.selectedRows(n)))):1<o.length&&i.hasClass(l.classnames.tr_selected)?(l.selectedRows(o.not(i)),l.$lastSelect=i):(o.length&&o[0]!=this&&l.selectedRows(null),i.hasClass(l.classnames.tr_selected)||(l.$lastSelect=i),l.selectedRows(i))}}).on("mouseenter.bjui.datagrid",function(t){var e=j(this),a=e.index();e.addClass("datagrid-hover"),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+a+")").addClass("datagrid-hover")}).on("mouseleave.bjui.datagrid",function(t){var e=j(this),a=e.index();e.removeClass("datagrid-hover"),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+a+")").removeClass("datagrid-hover")}).on("bjui.datagrid.tr.delete",function(t){var e,a=j(this),i=a.index(),n=l.data,o=l.allData,s=l.$lockTbody&&l.$lockTbody.find("> tr");l.isDom||(e=n[i].gridIndex,l.data=n.remove(i),l.allData=o.remove(e)),l.columnModel[0]==l.linenumberColumn&&(a.nextAll().each(function(){var t=j(this).find("> td:eq(0)"),e=parseInt(t.text());t.text(e-1)}),s&&s.eq(i).trigger("bjui.datagrid.tr.delete",[i])),a.remove()}),e.contextMenuB&&t.each(function(){l.tools.contextmenuB(j(this))}),t.each(function(){var t=j(this);t.find("> td."+l.classnames.td_checkbox).find("input").on("ifClicked",function(){t.trigger("click.bjui.datagrid.tr",[j(this)])})}),l.checkboxColumn&&l.checkboxColumn.th&&l.checkboxColumn.th.find("input").on("ifChanged",function(){var t=j(this).is(":checked"),e=l.$tbody.find("> tr");l.selectedRows(e,t)})},u.prototype.initTfoot=function(){var t=this,e=t.options,a=t.tools,i=t.columnModel,n=j("<tr></tr>");t.$boxF=j('<div class="datagrid-box-f"></div>'),t.$colgroupF=t.$colgroupH.clone(),t.$tableF=t.$tableH.clone().empty(),t.$tableF.append(t.$colgroupF),t.$boxF.append(j('<div class="datagrid-wrap-h"></div>').append(t.$tableF)),t.$boxF.insertAfter(t.$boxB),t.$tfoot=j("<thead></thead>"),j.each(i,function(t,e){var a=j("<th><div></div></th>");if(e.calc){var i='<div><div class="datagrid-calcbox">#tit#</div>#number#</div>';"avg"==e.calc?a.html(i.replace("#tit#",e.calcTit||"AVG").replace("#number#",(e.calc_sum/e.calc_count).toFixed(e.calcDecimal||2))):"count"==e.calc?a.html(i.replace("#tit#",e.calcTit||"COUNT").replace("#number#",e.calc_count)):"sum"==e.calc?a.html(i.replace("#tit#",e.calcTit||"SUM").replace("#number#",e.calc_sum)):"max"==e.calc?a.html(i.replace("#tit#",e.calcTit||"MAX").replace("#number#",e.calc_max)):"min"==e.calc&&a.html(i.replace("#tit#",e.calcTit||"MIN").replace("#number#",e.calc_min))}e.hidden&&a.css("display","none"),a.appendTo(n)}),t.$tfoot.append(n).appendTo(t.$tableF),t.$tfoot.on("bjui.datagrid.tfoot.resizeH",function(){a.setBoxbH(e.height)})},u.prototype.selectedRows=function(t,a){var i=this,n=i.$lockTbody&&i.$lockTbody.find("> tr"),e=i.$tbody.find("> tr"),o=function(t){void 0===a&&(a=!0),e.eq(t).toggleClass(i.classnames.tr_selected,a).find("> td."+i.classnames.td_checkbox+" input").iCheck(a?"check":"uncheck"),n&&n.eq(t).toggleClass(i.classnames.tr_selected,a).find("> td."+i.classnames.td_checkbox+" input").iCheck(a?"check":"uncheck")};null==t?(e.removeClass(i.classnames.tr_selected).find("> td."+i.classnames.td_checkbox+" input").iCheck("uncheck"),n&&n.removeClass(i.classnames.tr_selected).find("> td."+i.classnames.td_checkbox+" input").iCheck("uncheck")):"object"==typeof t?t.each(function(){var t=j(this),e=t.index();void 0!==a?o(e):(t.toggleClass(i.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("> td."+i.classnames.td_checkbox+" input").iCheck(t.hasClass(i.classnames.tr_selected)?"check":"uncheck"),n&&n.eq(e).toggleClass(i.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("> td."+i.classnames.td_checkbox+" input").iCheck(t.hasClass(i.classnames.tr_selected)?"check":"uncheck"))}):isNaN(t)?j.each(t.split(","),function(t,e){o(parseInt(e.trim()))}):isNaN(t)||o(parseInt(t)),i.$lastSelect&&!i.$lastSelect.hasClass(i.classnames.tr_selected)&&(i.$lastSelect=null),i.$element.data("selectedTrs",i.$tbody.find("> tr."+i.classnames.tr_selected))},u.prototype.initLock=function(){var a=this;a.columnModel;a.col_lock_count=0,j.each(a.columnModel,function(t,e){e.initLock&&a.col_lock_count++}),a.col_lock_count&&a.doLock()},u.prototype.colLock=function(t,e){var a,i,n=this;if("number"==j.type(t)){if((a=parseInt(t))<0||a>n.columnModel.length-1)return;(i=n.columnModel[a]).th}else a=t.data("index"),i=n.columnModel[a];i!=n.editBtnsColumn&&i.index!=n.columnModel.length-1&&(void 0===i.locked&&(i.locked=!1),i.locked!=e&&((i.initLock=e)?n.col_lock_count++:n.col_lock_count--,n.col_lock_count<0&&(n.col_lock_count=0),n.doLock()))},u.prototype.fixedLockItem=function(t){var n=this,o=n.columnModel,i=n.$thead.find("> tr.datagrid-filter > th"),e=n.$lockTbody&&n.$lockTbody.find("> tr");t?(i&&i.length&&n.$lockThead.find("> tr.datagrid-filter > th:visible").each(function(){var t=j(this),e=t.index(),a=i.eq(e);a.clone().html("").insertAfter(a),a.show().insertAfter(t),t.remove()}),e&&e.length&&e.filter("."+n.classnames.tr_edit).each(function(){var t=j(this),i=t.index();t.find("> td."+n.classnames.td_edit+":visible").each(function(){var t,e=j(this),a=e.index();o[a].locked&&((t=n.$tbody.find("> tr:eq("+i+")").find("> td:eq("+a+")")).clone().insertAfter(t),t.show().insertAfter(e),e.remove())})})):(i&&i.length&&n.$lockThead&&n.$lockThead.find("> tr.datagrid-filter > th:visible").each(function(){var t=j(this),e=t.index(),a=i.eq(e);t.clone().insertAfter(t),t.hide().insertAfter(a),a.remove()}),e&&e.length&&e.filter("."+n.classnames.tr_edit).each(function(){var t,e=j(this),a=e.find("> td:eq("+o.lockIndex+")"),i=e.index();a.hasClass(n.classnames.td_edit)&&(t=n.$tbody.find("> tr:eq("+i+")").find("> td:eq("+index+")"),a.clone().insertAfter(a),a.hide().insertAfter(t),t.remove())}))},u.prototype.doLock=function(){var i,n,a=this,o=(a.options,a.tools),t=a.columnModel,s=(a.$tableH.width(),0),l=0,e=a.$boxF&&!0,r=0;a.$lockBox&&a.$lockBox.length?(a.fixedLockItem(),a.$lockTableH.empty(),a.$lockTableB.empty(),a.$lockTableF&&a.$lockTableF.empty()):(a.$lockBox=j('<div class="datagrid-box-l"></div>'),a.$lockH=j('<div class="datagrid-box-h"></div>'),a.$lockB=j('<div class="datagrid-box-b"></div>'),a.$lockF=j('<div class="datagrid-box-f"></div>'),a.$lockTableH=j('<table class="table table-bordered"></table>'),a.$lockTableB=j("<table></table>").addClass(a.$tableB.attr("class")),a.$lockTableF=j('<table class="table table-bordered"></table>'),a.$lockH.append(a.$lockTableH),a.$lockB.append(a.$lockTableB),a.$lockF.append(a.$lockTableF),a.$lockBox.append(a.$lockH).append(a.$lockB).prependTo(a.$grid),e&&(a.$lockBox.append(a.$lockF),a.$lockF.css("margin-top",a.$boxB.outerHeight()-a.$boxB[0].clientHeight).height(a.$boxF.outerHeight()))),a.$boxT&&(r+=a.$boxT.outerHeight()),a.$toolbar&&(r+=a.$toolbar.outerHeight()),r&&a.$lockBox.css({top:r}),j.each(t,function(t,e){e.lockShow=!1,e.lockHide=!1,e.initLock?(e.hidden&&o.showhide(e,!0),e.lockHide=!0,e.locked=!0,e.lockIndex=l++,s+=e.width):(e.lockShow=!0,e.hidden?e.lockShow=!1:o.showhide(e,!1),e.locked&&(e.lockShow=!0),e.locked=!1)}),a.$lockThead=a.$thead.clone(!0),a.$lockTbody=a.$tbody.clone(),a.$lockColgroupH=a.$colgroupH.clone(),a.$lockColgroupB=a.$colgroupB.clone(),a.$lockTableH.append(a.$lockColgroupH).append(a.$lockThead).css("width",s),a.$lockTableB.append(a.$lockColgroupB).append(a.$lockTbody).css("width",s),e&&(a.$lockTfoot=a.$tableF.find("> thead").clone(),a.$lockColgroupF=a.$colgroupF.clone(),a.$lockTableF.append(a.$lockColgroupF).append(a.$lockTfoot).css("width",s)),j.each(a.columnModel,function(t,e){e.lockShow&&o.showhide(e,!0),e.lockHide&&o.showhide(e,!1)}),a.$boxH.find("> div").css("width",""),a.$boxB.find("> div").css("width",""),a.$boxF&&a.$boxF.find("> div").css("width",""),setTimeout(function(){var t=a.$boxB.find("> div").width();a.$boxB.find("> div").width(t),a.$boxH.find("> div").width(t),a.$boxF&&a.$boxF.find("> div").width(t)},50),0==a.col_lock_count?a.$lockBox.hide():a.$lockBox.show(),1<s&&(s-=1),a.$boxH.css("margin-left",s),a.$boxB.css("margin-left",s),e&&a.$boxF.css("margin-left",s),a.$lockB.height(a.$boxB[0].clientHeight),a.$lockB.prop("scrollTop",a.$boxB[0].scrollTop);var d=a.$lockTableH.height(),c=a.$thead.height(),u=a.$lockTableF&&a.$lockTableF.height(),h=a.$tableF&&a.$tableF.height();d!=c&&(d<c?a.$lockTableH.height(c):a.$tableH.height(d)),u&&h&&u!=h&&(u<h?a.$lockTableF.find("> thead > tr:first-child > th:visible:first").height(h):a.$tableF.find("> thead > tr:first-child > th:visible:first").height(u)),n=a.$lockTbody.find("> tr"),i=a.$tbody.find("> tr"),setTimeout(function(){var t=a.$lockTableB.height(),e=a.$tableB.height();t!=e&&(e<t?n.each(function(t){var e=j(this),a=e.find("> td:visible:first").outerHeight();30<a&&(e.height(a),i.eq(t).height(a))}):i.each(function(t){var e=j(this),a=e.find("> td:visible:first").outerHeight();30<a&&(e.height(a),n.eq(t).height(a))}))},20),a.fixedLockItem(1),n.find("> td:hidden").remove(),a.initLockEvents(n)},u.prototype.initLockEvents=function(t){if(this.$lockTbody){var i=this,e=i.options;t||(t=i.$lockTbody.find("> tr")),t.on("click.bjui.datagrid.tr",function(){var t=j(this).index();i.$tbody.find("> tr:eq("+t+")").trigger("click.bjui.datagrid.tr")}).on("bjui.datagrid.tr.delete",function(t,e){var a=j(this);i.linenumberColumn&&i.linenumberColumn.locked&&a.nextAll().each(function(){var t=j(this).find("> td:eq(0)"),e=parseInt(t.text());t.text(e-1)}),a.remove()}).find("> td."+i.classnames.td_checkbox+" input").on("ifChanged",function(){var t=j(this),e=t.closest("tr"),a=e.index();t.is(":checked")?(e.addClass(i.classnames.tr_selected),$trs.eq(a).addClass(i.classnames.tr_selected)):(e.removeClass(i.classnames.tr_selected),$trs.eq(a).removeClass(i.classnames.tr_selected))}),e.contextMenuB&&t.each(function(){i.tools.contextmenuB(j(this),!0)})}},u.prototype.filterInThead=function(){var r=this,a=(r.options,r.tools),d=r.regional,t=r.columnModel,c=j('<tr class="datagrid-filter"></tr>'),u=function(t,e){a.quickFilter(t,e?{operatorA:"like",valA:e}:null)};r.inputs&&r.inputs.length||a.initEditInputs(),j.each(t,function(t,e){var i,n,a,o,s=j(r.inputs[t]),l=j("<th></th>");"spinner"==e.type?s=j('<input type="text" name="'+e.name+'">'):"boolean"==e.type?s=j(BJUI.doRegional('<select name="'+e.name+'" data-toggle="selectpicker"><option value="">#all#</option><option value="true">#true#</option><option value="false">#false#</option></select>',d)):"select"==e.type&&s.find("> option:first-child").val()&&(s=j('<select name="'+e.name+'" data-toggle="selectpicker"></select>').append(BJUI.doRegional('<option value="">#all#</option>',d)).append(s.html())),l.append(s),e.hidden&&l.hide(),"boolean"==e.type&&l.attr("align","center"),l.appendTo(c),s.data("clearFilter",!1),i=s,a=l,"date"==(o=(n=e).type)?i.on("afterchange.bjui.datepicker",function(t,e){u(n,i.val())}).change(function(){u(n,i.val())}):("lookup"==o&&a.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var a in e)n.name==a&&(i.val(e[a]),u(n,e[a]))}),i.change(function(){u(n,i.val())})),s.on("bjui.datagrid.thead.clearfilter",function(){s.val(""),"boolean"!=e.type&&"select"!=e.type||s.selectpicker("refresh")}),e.quickfilter=s}),c.appendTo(r.$thead).initui()},u.prototype.showLinenumber=function(t){var e=this,a=e.options,i=e.columnModel,n=i[0];e.data;if(n==e.linenumberColumn)"string"!=typeof t||"lock"!=t&&"unlock"!=t?e.showhideColumn(n.th,!!t):e.colLock(n.th,"lock"==t);else if(t){var o,s=e.$thead.find("> tr"),l='<col style="width:30px;">',r=s.filter(".datagrid-filter"),d=s.length-r.length;n=e.linenumberColumn,i.unshift(n),e.$colgroupH.prepend(l),e.$colgroupB.prepend(l),e.$colgroupF&&e.$colgroupF.prepend(l),o=j('<th align="center" rowspan="'+d+'" class="'+e.classnames.td_linenumber+'">'+e.linenumberColumn.label+"</th>"),s.first().prepend(o),r.length&&r.prepend("<th></th>"),n.th=o,n.index=0,n.width=30,e.$tbody.find("> tr").each(function(t){j(this).prepend('<td align="center" class="'+e.classnames.td_linenumber+'">'+(t+1)+"</td>")}),e.$tableF&&e.$tableF.find("> thead > tr").prepend("<th></th>"),j.each(i,function(t,e){e.index=t,e.th&&e.th.data("index",t)}),"lock"==t&&e.colLock(o,!0),e.$showhide&&(e.$showhide.remove(),e.colShowhide(a.columnShowhide))}},u.prototype.showCheckboxcol=function(t){var e,a=this,i=a.options,n=a.columnModel,o=n[0],s=a.data;if(n[0]==a.checkboxColumn&&(e=n[0]),n[1]==a.checkboxColumn&&(e=n[1]),e)"string"!=typeof t||"lock"!=t&&"unlock"!=t?a.showhideColumn(e.th,t):a.colLock(e.th,"lock"==t);else if(t){var l,r,d=a.$thead.find("> tr"),c='<col style="width:26px;">',u=d.filter(".datagrid-filter"),h=d.length-u.length;e=a.checkboxColumn,l=j('<th align="center" rowspan="'+h+'" class="'+a.classnames.td_checkbox+'"><div><input type="checkbox" data-toggle="icheck"></div></th>'),o==a.linenumberColumn?(n.splice(1,0,e),s&&s.splice(1,0,{name:e.name}),e.index=1,a.$colgroupH.find("> col:first").after(c),a.$colgroupB.find("> col:first").after(c),a.$colgroupF&&a.$colgroupF.find("> col:first").after(c),u.length&&u.find("> th:first").after("<th></th>"),d.first().find("> th:first").after(l),a.$tableF&&a.$tableF.find("> thead > tr > th:first").after("<th></th>")):(n.unshift(e),s&&s.unshift({name:e.name}),e.index=0,a.$colgroupH.prepend(c),a.$colgroupB.prepend(c),a.$colgroupF&&a.$colgroupF.prepend(c),u.length&&u.prepend("<th></th>"),d.first().prepend(l),a.$tableF&&a.$tableF.find("> thead > tr").prepend("<th></th>")),l.initui(),e.th=l,e.width=26,a.$tbody.find("> tr").each(function(t){r=j('<td align="center" class="'+a.classnames.td_checkbox+'"><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox"></td>'),0==e.index?j(this).prepend(r):j(this).find("> td:first").after(r),r.initui()}),j.each(n,function(t,e){e.index=t,e.th&&e.th.data("index",t)}),"lock"==t&&a.colLock(l,!0),a.$showhide&&(a.$showhide.remove(),a.colShowhide(i.columnShowhide))}},u.prototype.showEditCol=function(t){var e=this,a=e.options,i=e.columnModel,n=i[i.length-1];e.data;if(n==e.editBtnsColumn)e.showhideColumn(n.th,!!t);else if(t){var o,s,l=e.$thead.find("> tr"),r='<col style="width:110px;">',d=l.filter(".datagrid-filter"),c=l.length-d.length;n=e.editBtnsColumn,i.push(n),e.$colgroupH.append(r),e.$colgroupB.append(r),e.$colgroupF&&e.$colgroupF.append(r),o=j('<th align="center" rowspan="'+c+'">Edit</th>'),l.first().append(o),d.length&&d.append("<th></th>"),o.initui().data("index",i.length-1),n.th=o,n.width=110,n.index=i.length-1,e.$tbody.find("> tr").each(function(t){s=j('<td align="center" class="'+e.classnames.s_edit+'">'+BJUI.doRegional(FRAG.gridEditBtn,e.regional)+"</td>"),j(this).append(s),s.initui()}),e.edit(e.$tbody.find("> tr")),e.$tableF&&e.$tableF.find("> thead > tr").append("<th></th>"),e.$showhide&&(e.$showhide.remove(),e.colShowhide(a.columnShowhide))}},u.prototype.colResize=function(){var g=this,n=g.tools,m=g.columnModel,t=g.$thead,b=g.$grid.find("> .resizeProxy");b.length||(b=j('<div class="resizeProxy" style="left:0; display:none;"></div>')).appendTo(g.$grid),t.find("> tr > th").each(function(t){var i=j(this);i.find("> div > ."+g.classnames.th_cell+"> ."+g.classnames.th_resizemark).on("mousedown.bjui.datagrid.resize",function(t){var o,s,e=g.$boxH.scrollLeft(),a=parseInt(g.$boxH.css("marginLeft")||0),l=n.getRight(i)-e+a,r=i.data("index"),d=m[r],c=d.th.width(),u=g.$tbody.find("> tr"),h=g.$lockTbody&&g.$lockTbody.find("> tr"),p=g.$lockTableB&&g.$lockTableB.height(),f=g.$tableB.height();g.isResize=!0,d.locked&&(l=n.getRight4Lock(d.lockIndex),d.lockWidth&&(c=d.lockWidth)),b.show().css({left:l,bottom:g.$box_paging?g.$box_paging.outerHeight():0,cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:b,move:"horizontal",event:t,stop:function(){var t=b.position().left-l,e=t+c,a=g.$tableH.width()+t,i=g.$lockTableH&&g.$lockTableH.width()+t;if(e<5&&(e=20),d.minWidth&&e<d.minWidth&&(e=d.minWidth),e!=c+t&&(a=a-t+(e-c),i=i-t+(e-c)),d.width=e,d.locked){if(i<.75*g.$grid.width()){d.lockWidth=e,g.$lockColgroupH.find("> col:eq("+r+")").width(e),g.$lockColgroupB.find("> col:eq("+r+")").width(e),g.$lockColgroupF&&g.$lockColgroupF.find("> col:eq("+r+")").width(e),g.$lockTableH.width(i),g.$lockTableB.width(i),g.$lockTableF&&g.$lockTableF.width(i);var n=g.$lockBox.width();g.$boxH.css("margin-left",n-1),g.$boxB.css("margin-left",n-1),g.$boxF&&g.$boxF.css("margin-left",n-1),g.$colgroupH.find("> col:eq("+r+")").width(e),g.$colgroupB.find("> col:eq("+r+")").width(e),g.$colgroupF&&g.$colgroupF.find("> col:eq("+r+")").width(e)}}else setTimeout(function(){g.$colgroupH.find("> col:eq("+r+")").width(e),g.$colgroupB.find("> col:eq("+r+")").width(e),g.$colgroupF&&g.$colgroupF.find("> col:eq("+r+")").width(e)},1);setTimeout(function(){u.css("height",""),s=g.$tableB.height(),g.$lockTbody&&(h.css("height",""),(o=g.$lockTableB.height())==p&&s==f||(s<o?h.each(function(t){var e=j(this),a=e.find("> td:eq("+d.lockIndex+")").outerHeight();30<a&&(e.height(a),u.eq(t).height(a))}):u.each(function(t){var e=j(this),a=e.find("> td:eq("+r+")").outerHeight();30<a&&(e.height(a),h.eq(t).height(a))})),g.$lockB.height(g.$boxB[0].clientHeight)),d.calc&&g.$tfoot&&g.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),g.isResize=!1},10),b.hide(),g.resizeFlag=!0}})})})},u.prototype.colMenu=function(){var p=this,t=p.options,f=p.tools,e=p.regional,a=p.$trsH.find("> th."+p.classnames.th_menu),g=p.$grid.find("> ."+p.classnames.s_menu);g.legnth||((g=j(BJUI.doRegional(FRAG.gridMenu,e))).hide().appendTo(p.$grid),p.$menu=g),p.colShowhide(t.columnShowhide),a.each(function(){var c,u=j(this),t=u.data("index"),h=p.columnModel[t],e=u.find("> div > ."+p.classnames.th_cell),a=e.find("> ."+p.classnames.btn_menu);a.length||(c=j('<button class="btn btn-default"><i class="fa fa-bars"></button>'),(a=j('<div class="'+p.classnames.btn_menu+'"></div>').append(c)).appendTo(e),c.click(function(){u.closest("tr");var e,t=parseInt(u.attr("rowspan")||1),a=j(this).offset().left-p.$grid.offset().left-1,i=25*(p.$trsH.length-t)+13*t+11,n=g.find("> ul > li.datagrid-li-showhide"),o=g.data("bjui.datagrid.menu.btn");o&&o.length&&o.removeClass("active"),j(this).addClass("active"),n.length&&p.$showhide&&(p.$showhide.appendTo(n),p.$showhide.data("width")),g.css({position:"absolute",top:i,left:a}).show().data("bjui.datagrid.menu.btn",c).siblings("."+p.classnames.s_menu).hide(),e=g.outerWidth();var s,l=function(t){p.$boxH.width()-t<e?g.css({left:t-e+18}).addClass("position-right"):g.css({left:t}).removeClass("position-right")};l(a),s=c,p.$boxB.scroll(function(){var t=s.offset().left-p.$grid.offset().left-1;l(t)}),p.colFilter(u,!0),f.locking(u);var r=g.find("> ul > li."+p.classnames.li_asc),d=r.next();r.click(function(){h.sortAsc=!1,f.quickSort(h)}),d.click(function(){h.sortAsc=!0,f.quickSort(h)}),g.on("bjui.datagrid.th.sort",function(t,e){r.toggleClass("sort-active",e),d.toggleClass("sort-active",!e)})}))}),p.$grid.on("click.bjui.datagrid.filter",function(t){var e=j(t.target),a=p.$grid.find("."+p.classnames.s_menu+":visible");a.length&&!e.closest("."+p.classnames.btn_menu).length&&(e.closest("."+p.classnames.s_menu).length||a.hide().data("bjui.datagrid.menu.btn").removeClass("active"))})},u.prototype.colShowhide=function(t){var e=this,a=(e.options,e.tools),i=e.$menu,n=i.find("> ul").find("> li."+e.classnames.li_showhide);t?e.$showhide||(a.createShowhide(),a.showSubMenu(n,i,e.$showhide)):n.hide()},u.prototype.showhideColumn=function(t,e){var a,i,n=this.tools;if("number"==j.type(t)){if((a=parseInt(t))<0)return}else a=t.data("index");if(i=this.columnModel[a]){if(i.locked){if(e)return;this.colLock(i.th,e)}n.showhide(i,e)}},u.prototype.colFilter=function(s,t){var l=this,r=(l.options,l.tools),e=l.regional,d=s.data("bjui.datagrid.filter"),c=l.$menu,u=c.find("> ul > li."+l.classnames.li_filter);if(l.inputs&&l.inputs.length||r.initEditInputs(),t){if(u.find("."+l.classnames.s_filter).addClass("hide"),!d||!d.length){d=j(BJUI.doRegional(FRAG.gridFilter.replaceAll("#label#",s.text()),e)).hide().appendTo(l.$grid);var h,p,a=s.data("index"),i=l.columnModel[a],n=i.type||"string",o=i.operator||[],f=d.find("span.filter-a"),g=d.find("span.filter-b"),m=j('<select data-toggle="selectpicker" data-container="true"></select>'),b=j(l.inputs[a]);b.removeAttr("data-rule").attr("size",10).addClass("filter-input"),"string"==n||"lookup"==n?o.length||(o=["=","!=","like"]):"number"==n||"int"==n||"spinner"==n?("spinner"==n&&b.removeAttr("data-toggle"),o.length||(o=["=","!=",">","<",">=","<="])):"date"==n?o.length||(o=["=","!="]):"boolean"==n?(o.length||(o=["=","!="]),b=j(BJUI.doRegional('<select name="'+i.name+'" data-toggle="selectpicker"><option value="">#all#</option><option value="true">#true#</option><option value="false">#false#</option></select>',e))):"select"==n&&(o.length||(o=["=","!="]),b.attr("data-width","80"),b.find("> option:first-child").val()&&(b=j('<select name="'+i.name+'" data-toggle="selectpicker" data-width="80"></select>').append(BJUI.doRegional('<option value="">#all#</option>',e)).append(b.html())));for(var v=0;v<o.length;v++)m.append('<option value="'+o[v]+'">'+o[v]+"</option>");p=(h=b).clone(),f.append(m).append(b),g.append(m.clone()).append(p),s.data("bjui.datagrid.filter",d),d.appendTo(u),d.data("width",d.outerWidth()).hide().initui(),d.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var a in e)i.name==a&&b.val(e[a])});var y=d.find("button.ok"),k=d.find("button.clear"),x=d.find("select"),C=x.first(),w=x.last(),$=x.eq(1);y.click(function(){var t=C.val(),e=h.val().trim(),a=w.val(),i=p.val().trim(),n=$.val(),o={};e.length&&j.extend(o,{operatorA:t,valA:e}),i.length&&(e.length&&j.extend(o,{andor:n}),j.extend(o,{operatorB:a,valB:i})),j.isEmptyObject(o)||(r.quickFilter(l.columnModel[s.data("index")],o),l.$grid.trigger("click"),u.trigger("bjui.datagrid.th.submenu.hide",[c,d]))}),k.click(function(){var t=l.columnModel[s.data("index")];x.find("> option:first").prop("selected",!0),x.selectpicker("refresh"),h.val(""),p.val(""),t.isFiltered&&(r.quickFilter(t,null),l.$grid.trigger("click"),u.trigger("bjui.datagrid.th.submenu.hide",[c,d]))})}r.showSubMenu(u,c,d.removeClass("hide")),c.find('> ul > li:not(".'+l.classnames.li_filter+'")').on("mouseover",function(){u.hasClass("active")&&u.trigger("bjui.datagrid.th.submenu.hide",[c,d])})}else u.hide()},u.prototype.initPaging=function(){var t,o=this,s=o.tools,l=(o.options,o.paging),i=BJUI.regional.pagination,e=FRAG.gridPaging,a=[],n=l.pageCount,r=[];if(0!=l.total){for(var d=(t=s.getPageInterval(n,l.pageCurrent,l.showPagenum)).start;d<t.end;d++)a.push(FRAG.gridPageNum.replace("#num#",d).replace("#active#",l.pageCurrent==d?" active":""));e=BJUI.doRegional(e.replaceAll("#pageCurrent#",l.pageCurrent).replaceAll("#count#",l.total+"/"+parseInt(n||0)),i),o.$box_paging=j('<div class="datagrid-paging-box"></div>'),o.$pagingCon=j('<div class="paging-content"></div>').width(o.$boxB.width()),o.$refreshBtn=j('<button class="btn-default btn-refresh" title="'+i.refresh+'" data-icon="refresh"></button>'),o.$paging=j('<div class="datagrid-paging"></div>'),o.$btnpaging=j(e),o.$pagenum=j(a.join("")),o.$pagesize=j('<div class="datagrid-pagesize"><span></span></div>'),o.$selectpage=j('<select data-toggle="selectpicker"></select>'),o.$pagingCon.appendTo(o.$box_paging),o.$box_paging.appendTo(o.$grid),o.$pagesize.appendTo(o.$pagingCon),o.$refreshBtn.appendTo(o.$pagesize),o.$selectpage.appendTo(o.$pagesize),o.$paging.appendTo(o.$pagingCon),o.$btnpaging.appendTo(o.$paging),o.$pagenum.insertAfter(o.$btnpaging.find("> li.page-prev")),o.$box_paging.initui();var c=o.$btnpaging.find("> li.page-jumpto"),u=c.next(),h=u.next(),p=o.$btnpaging.find("> li.page-next"),f=p.next(),g=function(){u.addClass("disabled"),h.addClass("disabled")},m=function(){u.removeClass("disabled"),h.removeClass("disabled")},b=function(){p.addClass("disabled"),f.addClass("disabled")},v=function(){p.removeClass("disabled"),f.removeClass("disabled")},y=function(){g(),v()},k=function(){m(),b()},x=function(t){o.$selectpage.empty(),t||(t=o.paging.pageSize),(r=l.selectPageSize.split(",")).push(String(t)),j.unique(r).sort(function(t,e){return t-e}),j.each(r,function(t,e){var a=j('<option value="'+e+'">'+e+"/"+i.page+"</option>");e==l.pageSize&&a.prop("selected",!0),o.$selectpage.append(a)}),o.$selectpage.selectpicker("refresh")};1==l.pageCurrent&&y(),l.pageCurrent==l.pageCount&&(k(),1==l.pageCurrent&&g()),x(),o.$paging.on("click",".page-num",function(t){var e=j(this);e.hasClass("active")||o.jumpPage(e.text()),t.preventDefault()}).on("bjui.datagrid.paging.jump",function(t){for(var e=o.paging.pageCurrent,a=s.getPageInterval(o.paging.pageCount,e,l.showPagenum),i=[],n=a.start;n<a.end;n++)i.push(FRAG.gridPageNum.replace("#num#",n).replace("#active#",e==n?" active":""));o.$pagenum.empty(),o.$pagenum=j(i.join("")),o.$pagenum.insertAfter(h),1==e?(y(),e==o.paging.pageCount&&b()):e==o.paging.pageCount?k():(m(),v()),c.find("input").val(e),o.$btnpaging.find("> li.page-total > span").html(o.paging.total+"/"+o.paging.pageCount)}),o.$selectpage.on("bjui.datagrid.paging.pageSize",function(t,e){x(e)}),c.find("input").on("keyup",function(t){if(t.which==BJUI.keyCode.ENTER){var e=j(this).val();e&&o.jumpPage(e)}}),u.on("click",function(){1<o.paging.pageCurrent&&o.jumpPage(1)}),h.on("click",function(){1<o.paging.pageCurrent&&o.jumpPage(o.paging.pageCurrent-1)}),p.on("click",function(){o.paging.pageCurrent<o.paging.pageCount&&o.jumpPage(o.paging.pageCurrent+1)}),f.on("click",function(){o.paging.pageCurrent<o.paging.pageCount&&o.jumpPage(o.paging.pageCount)}),o.$refreshBtn.on("click",function(){o.refresh()}),o.$selectpage.on("change",function(){var t=j(this).val();o.jumpPage(null,t)})}},u.prototype.jumpPage=function(t,e){var a=this.paging,i=a.pageCount;t&&isNaN(t)||e&&isNaN(e)||t&&((t=parseInt(t))<1&&(t=1),i<t&&(t=i),t==a.pageCurrent)||e&&(e=parseInt(e))>a.total||this.tools.jumpPage(t,e)},u.prototype.add=function(t){if(this.tools.beforeEdit())if(this.options.editUrl){if(this.options.editMode){this.options.inlineEditMult||this.doCancelEditRow(this.$tbody.find("> tr."+this.classnames.tr_edit));var e,a,o=this,i=o.options,n=(o.tools,o.paging),s={},l=(n.pageCurrent-1)*n.pageSize,r=function(t){var i=j("<tr></tr>").addClass(o.classnames.tr_add),n=i.clone();return j.each(o.columnModel,function(t,e){var a=j("<td></td>");e.gridNumber?a.addClass(o.classnames.td_linenumber).text(0):e.gridCheckbox?a.addClass(o.classnames.td_checkbox).html('<div><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox" value="true"></div>'):e.gridEdit?a.addClass(o.classnames.s_edit).data("isAdd",!0).html(BJUI.doRegional(FRAG.gridEditBtn,o.regional)):a.text(""),e.hidden&&a.css("display","none"),e.align&&a.attr("align",e.align),s[e.name]="",e.locked?(a.clone().show().appendTo(n),a.hide().appendTo(i)):a.appendTo(i)}),s=j.extend({},o.attach,s),o.emptyData||(o.emptyData=s),{tr:i,lockTr:n.find("> td").length?n:null}};t||(t=i.addLocation||"first"),o.$lastSelect||("prev"==t?t="first":"next"==t&&(t="last")),"first"==t?(a=0,(e=r()).tr.prependTo(o.$tbody),e.lockTr&&e.lockTr.prependTo(o.$lockTbody)):"last"==t?(a=o.data?o.data.length:0,(e=r()).tr.appendTo(o.$tbody),e.lockTr&&e.lockTr.appendTo(o.$lockTbody)):"prev"==t?(a=o.$lastSelect.index(),(e=r()).tr.insertBefore(o.$lastSelect),e.lockTr&&e.lockTr.insertBefore(o.$lockTbody.find("> tr:eq("+o.$lastSelect.index()+")"))):"next"==t&&(a=o.$lastSelect.index()+1,(e=r()).tr.insertAfter(o.$lastSelect),e.lockTr&&e.lockTr.insertAfter(o.$lockTbody.find("> tr:eq("+o.$lastSelect.index()+")")));var d=j.extend({},o.emptyData,{addFlag:!0});o.data||(o.data=[]),o.allData||(o.allData=[]),o.allData.length?o.allData.splice(a+l,0,d):o.allData.push(d),o.data.length?o.data.splice(a,0,d):o.data.push(d),j.each(o.data,function(t,e){var a=i.linenumberAll?l+(t+1):t+1;j.extend(e,{gridNumber:a,gridIndex:t})}),e.tr.initui(),setTimeout(function(){o.initEvents(e.tr)},20),e.lockTr&&o.initLockEvents(e.lockTr),o.edit(e.tr),"dialog"!=i.editMode?o.doEditRow(e.tr,"inline",!0):o.dialogEdit(e.tr,!0)}}else BJUI.debug("Datagrid Plugin: Edit url is not set!")},u.prototype.edit=function(t){var d=this,e=d.options,c=d.tools,u=e.editMode;d.columnModel;"dialog"!=u&&(u="inline"),t||(t=d.$tbody.find("> tr")),t.find("> td."+d.classnames.s_edit).each(function(){var n=j(this),o=n.find("button"),a=o.first(),s=a.next(),l=s.next(),r=l.next(),i=r.next();a.on("click",function(t,e){var a=j(this).closest("tr"),i=n.data("isAdd");if(e||(e=d.isDom?a.data("initData")||c.setDomData(a):d.data[a.index()]),!c.beforeEdit(a,e))return!1;"dialog"!=u?(d.inlineEdit(a,i),o.hide(),s.show(),r.show(),i&&(s.hide(),l.show())):d.dialogEdit(a,i),t.stopPropagation()}),l.on("click",function(t){var e=j(this),a=e.closest("tr");d.updateEdit(a,e),t.stopPropagation()}).on("bjui.datagrid.update.tr",function(){o.hide(),a.show(),i.show()}),s.on("click",function(t){var e=j(this),a=e.closest("tr");d.updateEdit(a,e),t.stopPropagation()}).on("bjui.datagrid.update.tr",function(){o.hide(),a.show(),i.show()}),r.on("click",function(t){var e=j(this).closest("tr");d.cancelEdit(e),o.hide(),a.show(),i.show(),t.stopPropagation()}),i.on("click",function(t){var e=j(this).closest("tr");d.delRows(e),t.stopPropagation()})})},u.prototype.doEditRow=function(t,a,i){var e,n,o=this,s=[];if(a=a||o.options.editMode,"object"==typeof t)e=t;else if(isNaN(t)){var l,r=o.$tbody.find("> tr");(t=(t=t.split(",")).unique()).sort(function(t,e){return t.trim()-e.trim()}),j.each(t,function(t,e){var a=r.eq(parseInt(e.trim()));a&&a.length&&(l=l?l.add(a):a)}),e=l}else isNaN(t)||(e=o.$tbody.find("> tr").eq(t));e.length&&(e.each(function(){var t,e=j(this),a=e.index();t=o.isDom?e.data("initData")||tools.setDomData(e):o.data[a],s.push(t)}),o.tools.beforeEdit(e,s)&&(o.options.editUrl?e.each(function(t){var e=j(this);n=e.find("> td."+o.classnames.s_edit+" > button.edit"),"dialog"!=a?n.length?n.trigger("click",[s[t]]):o.inlineEdit(e,i,s[t]):o.dialogEdit(e,i,s[t])}):BJUI.debug("Datagrid Plugin: Edit url is not set!")))},u.prototype.doCancelEditRow=function(t){var a=this;("number"==j.type(t)?this.$tbody.find("> tr").eq(t):t).each(function(){var t=j(this),e=t.find("> td."+a.classnames.s_edit+" > button.cancel");e.length?e.trigger("click"):a.cancelEdit(t)})},u.prototype.doSaveEditRow=function(t){var e,a=this,i=a.options;(e="number"==j.type(t)?this.$tbody.find("> tr").eq(t):t||a.$tbody.find("> tr."+a.classnames.tr_edit)).length||a.$grid.alertmsg("info",BJUI.getRegional("datagrid.saveMsg")),1==e.length?e.hasClass(a.classnames.tr_edit)&&this.updateEdit(e):i.saveAll?a.saveAll(e):e.each(function(){a.updateEdit(j(this))})},u.prototype.delRows=function(t){var a,o=this,s=o.options,e=s.beforeDelete,i=s.delConfirm;if(!e||("string"==typeof e&&(e=e.toFunc()),"function"!=typeof e||e.call(this))){if("object"==typeof t)a=t;else if(isNaN(t)){var n,l=o.$tbody.find("> tr");(t=(t=t.split(",")).unique()).sort(function(t,e){return t.trim()-e.trim()}),j.each(t,function(t,e){var a=l.eq(parseInt(e.trim()));a&&a.length&&(n=n?n.add(a):a)}),a=n}else isNaN(t)||(a=this.$tbody.find("> tr").eq(t));if(a&&a.length){var r=function(){a.each(function(){j(this).trigger("bjui.datagrid.tr.delete")}),o.tools.afterDelete()},d=function(){var t=a.filter("."+o.classnames.tr_add);if(!t.length||(t.remove(),t.length!=a.length))if(s.delUrl){var n=[],e=s.delCallback;a.each(function(){var t,a,e=j(this),i=e.index();t=o.isDom?e.data("initData")||tools.setDomData(e):o.data[i],s.delPK?n.push(t[s.delPK]):(s.jsonPrefix?(a={},j.each(t,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;a[s.jsonPrefix+"."+t]=e})):(delete(a=j.extend({},t)).gridCheckbox,delete a.gridEdit),n.push(a))}),"string"==typeof e&&(e=e.toFunc()),o.$grid.bjuiajax("doAjax",{url:s.delUrl,data:s.delPK?[{name:s.delPK,value:n.join(",")}]:{json:JSON.stringify(n)},type:s.delType,callback:e||function(t){t[BJUI.keys.statusCode]==BJUI.statusCode.ok?r():o.$grid.bjuiajax("ajaxDone",t)}})}else r()};i?("string"!=typeof i&&(i=1==a.length?BJUI.getRegional("datagrid.delMsg"):BJUI.getRegional("datagrid.delMsgM")),o.$grid.alertmsg("confirm",i,{okCall:function(){d()}})):d()}}},u.prototype.inlineEdit=function(r,d,c){if(!this.tools.beforeEdit(r,c))return!1;var u=this,t=u.options,e=u.tools,h=u.columnModel,a=r.find("> td"),p=a.length,f=r.index();if(c||(c=u.isDom?r.data("initData")||e.setDomData(r):u.data[f]),r.hasClass(u.classnames.tr_edit))return!1;u.inputs&&u.inputs.length||e.initEditInputs(),r.addClass(u.classnames.tr_edit).data(u.datanames.changeData,{}),r.data("validator")&&r.validator("destroy"),t.inlineEditMult||u.doCancelEditRow(r.siblings("."+u.classnames.tr_edit)),u.$lastEditTr=r,a.each(function(t){var a,e=j(this),s=h[t],i=s&&s.name&&c[s.name],n=e.html(),o=u.inputs[t];if(e.data(u.datanames.td_html,n),d?s.add||(o=""):s.edit||(o=""),o&&(a=j(o),"boolean"==s.type?a.prop("checked",i):(i&&"null"!=i||(i=""),a.val(String(i))),d?s.addAttrs&&"object"==typeof s.addAttrs&&j.each(s.addAttrs,function(t,e){a.attr(t,e)}):s.editAttrs&&"object"==typeof s.editAttrs&&j.each(s.editAttrs,function(t,e){a.attr(t,e)}),e.empty().append(a).addClass(u.classnames.td_edit),function(i,n,a){var o=r.data(u.datanames.changeData);switch(s.type){case"date":i.on("afterchange.bjui.datepicker",function(t,e){n.addClass(u.classnames.td_changed),i.val()==a&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()}).change(function(){n.addClass(u.classnames.td_changed),i.val()==a&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()});break;case"select":i.change(function(){n.addClass(u.classnames.td_changed),i.val()==String(a)&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()});break;case"boolean":i.on("ifChanged",function(){n.toggleClass(u.classnames.td_changed);var t=!!j(this).is(":checked");t==a&&n.removeClass(u.classnames.td_changed),o[s.name]=t});break;case"lookup":n.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var a in n.toggleClass(u.classnames.td_changed),e)void 0!==c[a]&&(o[a]=e[a]),s.name==a&&(i.val()==e[a]?n.removeClass(u.classnames.td_changed):i.val(e[a]))}),i.change(function(){n.addClass(u.classnames.td_changed),i.val()==a&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()});break;case"spinner":i.on("afterchange.bjui.spinner",function(t,e){n.addClass(u.classnames.td_changed),i.val()==a&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()}).change(function(){n.addClass(u.classnames.td_changed),i.val()==a&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()});break;default:i.change(function(){n.addClass(u.classnames.td_changed),i.val()==a&&n.removeClass(u.classnames.td_changed),o[s.name]=i.val()})}}(a,e,i),s.locked)){var l=u.$lockTbody.find("tr:eq("+f+")").find("> td:eq("+s.lockIndex+")");e.clone().html(n).insertAfter(e),e.show().insertAfter(l).initui(),l.remove()}--p||r.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})})},u.prototype.saveAll=function(a){var e,i,n,o,s=this,l=s.options,t=l.editCallback,r=[],d=a&&a.length;a&&!a.length||(a=s.$tbody.find("> tr."+s.classnames.tr_edit),d=a.length),a.each(function(){e=j(this),i=s.isDom?e.data("initData"):s.data[e.index()],e.isValid(function(t){if(!t)return!(r=[]);n=e.data(s.datanames.changeData),j.extend(i,n),l.jsonPrefix?(o={},j.each(i,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;o[l.jsonPrefix+"."+t]=e})):(delete(o=j.extend({},i)).gridCheckbox,delete o.gridEdit),d--,r.push(o)})}),d||(t=t?t.toFunc():function(t){var e=!1,i=[];"array"==j.type(t)?(e=!0,i=t):"object"==j.type(t)&&(t[BJUI.keys.statusCode]?t[BJUI.keys.statusCode]==BJUI.statusCode.ok?e=!0:s.$grid.bjuiajax("ajaxDone",t):(e=!0,i.push(t))),e&&(a.each(function(t){var e=j(this),a=s.isDom?e.data("initData"):s.data[e.index()];j.extend(a,"object"==typeof i[t]&&i[t]),s.inlineEditComplete(e,a)}),s.tools.afterSave(a,r))},s.$grid.bjuiajax("doAjax",{url:l.editUrl,data:{json:JSON.stringify(r)},type:"POST",callback:t}))},u.prototype.updateEdit=function(i,n){var o,e,a,s=this,l=s.options,r=l.editCallback,d=[];o=s.isDom?i.data("initData"):s.data[i.index()],i.hasClass(s.classnames.tr_edit)&&i.isValid(function(t){t&&(e=i.data(s.datanames.changeData),j.extend(o,e),l.jsonPrefix?(a={},j.each(o,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;a[l.jsonPrefix+"."+t]=e})):(delete(a=j.extend({},o)).gridCheckbox,delete a.gridEdit),r=r?r.toFunc():function(t){var e,a=!1;"array"==j.type(t)?(a=!0,e=t[0]):"object"==j.type(t)&&(t[BJUI.keys.statusCode]?t[BJUI.keys.statusCode]==BJUI.statusCode.ok?a=!0:s.$grid.bjuiajax("ajaxDone",t):(a=!0,e=t)),a&&(j.extend(o,"object"==typeof e&&e),s.inlineEditComplete(i,o,n),s.tools.afterSave(i,o))},i.bjuiajax("doAjax",{url:l.editUrl,data:{json:JSON.stringify(d.push(a)&&d)},type:"POST",callback:r}))})},u.prototype.cancelEdit=function(t){var l=this,r=l.columnModel;t.each(function(){var t=j(this),s=t.index();if(t.hasClass(l.classnames.tr_edit)&&t.removeClass(l.classnames.tr_edit).find("> td."+l.classnames.td_edit).each(function(){var t=j(this),e=t.index(),a=r[e],i=t.data(l.datanames.td_html);if(t.removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed).html(i),a.locked){var n=l.$lockTbody.find("tr:eq("+s+")"),o=n.find("> td:eq("+a.lockIndex+")");i=o.data(l.datanames.td_html),n.removeClass(l.classnames.tr_edit),o.removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed).html(i)}}),t.hasClass(l.classnames.tr_add)){var e=!1,a=t.data(l.datanames.changeData);if(j.isEmptyObject(a))e=!0;else{for(var i in a)a[i]||delete a[i];j.isEmptyObject(a)&&(e=!0)}if(e){var n=t.index();l.data=l.data.remove(n),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+n+")").remove(),t.remove()}}})},u.prototype.inlineEditComplete=function(t,o,e){var s=this,a=s.columnModel,l=t.index(),r=t.find("> td"),d=!1,i=s.$tbody.find("> tr"),n=i.filter("."+s.classnames.tr_add);j.each(a,function(t,e){if(e.gridNumber&&(d=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var a,i=o[e.name],n=r.eq(e.index);if(void 0===i&&(i=""),n.text(i).removeClass(s.classnames.td_edit).removeClass(s.classnames.td_changed),e.render&&"function"==typeof e.render?(a=e.items?e.render.call(s,i,e.items):e.render.call(s,i),n.html(a)):e.items&&(a=u.renderItem.call(s,i,e.items),n.html(a)),e.locked)s.$lockTbody.find("> tr:eq("+l+")").find("> td:eq("+e.lockIndex+")").removeClass(s.classnames.td_changed).html(n.html())}}),t.removeClass(s.classnames.tr_edit),e||(e=r.filter("."+s.classnames.s_edit).find("button.update")),e&&e.length&&e.trigger("bjui.datagrid.update.tr"),d&&n.length&&(n.removeClass(s.classnames.tr_add),i.each(function(t){j(this).find("> td."+s.classnames.td_linenumber).text(t+1),s.$lockTbody&&s.$lockTbody.find("> tr:eq("+t+")").find("> td."+s.classnames.td_linenumber).text(t+1)}))},u.prototype.dialogEdit=function(r,t,d){if(!this.tools.beforeEdit(r,d))return!1;var e,a,i,c=this,u=c.options,h=c.tools,p=c.columnModel,n=r.index();d||(d=c.isDom?r.data("initData")||h.setDomData(r):c.data[n]),c.inputs&&c.inputs.length||h.initEditInputs(),i=u.gridTitle||"datagrid",i+=t?" - "+BJUI.getRegional("datagrid.add"):" - "+BJUI.getRegional("datagrid.edit"),e=j('<div><div class="bjui-pageContent"></div><div class="bjui-pageFooter"></div></div>'),a=j('<form class="datagrid-dialog-edit-form"></form>');e.find("> div:first").append(a).next().append(BJUI.doRegional(FRAG.gridDialogEditBtns,c.regional));var o=j.extend({},{id:"datagrid-dialog-edit",fresh:!0,target:e[0],width:520,height:400,mask:!0,title:i,onLoad:function(t){var o=t.find("form.datagrid-dialog-edit-form"),e=t.find("div.bjui-pageFooter button"),a=e.first(),i=e.eq(1),n=e.eq(2),s=e.last(),l=function(o,s,l){s.empty(),l.data(c.datanames.changeData)||l.data(c.datanames.changeData,{}),s.data("validator")&&s.validator("destroy"),j.each(p,function(t,e){if(e==c.linenumberColumn||e==c.checkboxColumn||e==c.editBtnsColumn)return!0;var a=j(c.inputs[t]),i=j("<p></p>"),n="datagrid-dialog-edit-column-"+t;a.isTag("select")?a.attr("data-width","auto"):a.isTag("checkbox")||a.attr("size",30),"boolean"==e.type?a.attr("checked",o[e.name]):"textarea"==e.type?a.html(o[e.name]):a.attr("value",o[e.name]),i.append('<label class="control-label x120" for="'+n+'">'+e.label+"：</label>").append(j('<span class="datagrid-dialog-column-span"></span>').append(a.attr("id",n))).appendTo(s),function(t,e,i,n){var o=t.data(c.datanames.changeData);switch(n.type){case"date":i.on("afterchange.bjui.datepicker",function(t,e){o[n.name]=i.val()}).change(function(){o[n.name]=i.val()});break;case"select":i.change(function(){o[n.name]=i.val()});break;case"boolean":i.on("ifChanged",function(){var t=!!j(this).is(":checked");o[n.name]=t});break;case"lookup":e.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var a in e)void 0!==d[a]&&(o[a]=e[a]),n.name==a&&i.val(e[a])}),i.change(function(){o[n.name]=i.val()});break;case"spinner":i.on("afterchange.bjui.spinner",function(t,e){o[n.name]=i.val()}).change(function(){o[n.name]=i.val()});break;default:i.change(function(){o[n.name]=i.val()})}}(l,s,a,e)}),s.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})};o.is(":empty")&&l(d,o,r),0==r.index()&&a.addClass("disabled"),r.index()==c.data.length-1&&i.addClass("disabled"),a.click(function(){var t,e=r.prev();e.length?(t=c.isDom?e.data("initData")||h.setDomData(e):c.data[e.index()],l(t,o,r=e),i.removeClass("disabled"),e.prev().length||a.addClass("disabled")):a.addClass("disabled")}),i.click(function(){var t,e=r.next();e.length?(t=c.isDom?e.data("initData")||h.setDomData(e):c.data[e.index()],l(t,o,r=e),o.initui(),a.removeClass("disabled"),e.next().length||i.addClass("disabled")):i.addClass("disabled")}),s.click(function(){var e,i,a,n=u.editCallback;i=c.isDom?r.data("initData"):c.data[r.index()],o.isValid(function(t){t&&(e=r.data(c.datanames.changeData),j.extend(i,e),u.jsonPrefix?(a={},j.each(i,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;a[u.jsonPrefix+"."+t]=e})):(delete(a=j.extend({},i)).gridCheckbox,delete a.gridEdit),n=n?n.toFunc():function(t){var e,a=!1;"array"==j.type(t)?(a=!0,e=t[0]):"object"==j.type(t)&&(t[BJUI.keys.statusCode]?t[BJUI.keys.statusCode]==BJUI.statusCode.ok?a=!0:c.$grid.bjuiajax("ajaxDone",t):(a=!0,e=t)),a&&(j.extend(i,"object"==typeof e&&e),c.dialogEditComplete(r,i),c.$grid.dialog("close","datagrid-dialog-edit"),c.tools.afterSave(r,i))},r.bjuiajax("doAjax",{url:u.editUrl,data:{json:JSON.stringify(a)},type:"POST",callback:n}))})}),n.click(function(){c.$grid.dialog("close","datagrid-dialog-edit")})},onClose:function(){c.$tbody.find("> tr."+c.classnames.tr_add).each(function(){var t=!1,e=j(this),a=e.data(c.datanames.changeData);if(j.isEmptyObject(a))t=!0;else{for(var i in a)a[i]||delete a[i];j.isEmptyObject(a)&&(t=!0)}if(t){var n=e.index();c.data=c.data.remove(n),c.$lockTbody&&c.$lockTbody.find("> tr:eq("+n+")").remove(),e.remove()}})}},"object"==typeof u.editDialogOp&&u.editDialogOp);c.$grid.dialog(o)},u.prototype.dialogEditComplete=function(t,s){var l=this,e=l.columnModel,r=t.index(),d=t.find("> td"),c=!1,a=l.$tbody.find("> tr"),i=a.filter("."+l.classnames.tr_add);j.each(e,function(t,e){if(e.gridNumber&&(c=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var a,i=s[e.name],n=d.eq(e.index);if(void 0===i&&(i=""),n.text(i).removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed),e.render&&"function"==typeof e.render?(a=e.items?e.render.call(l,i,e.items):e.render.call(l,i),n.html(a)):e.items&&(a=u.renderItem.call(l,i,e.items),n.html(a)),e.locked){var o=l.$lockTbody.find("> tr:eq("+r+")");o.find("> td:eq("+e.lockIndex+")").removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed).html(n.html()),o.removeClass(l.classnames.tr_edit)}}}),c&&i.length&&(i.removeClass(l.classnames.tr_add),a.each(function(t){j(this).find("> td."+l.classnames.td_linenumber).text(t+1),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+t+")").find("> td."+l.classnames.td_linenumber).text(t+1)}))},u.prototype.resizeGrid=function(){var t,e=this,a=e.$grid.getPageTarget();a.on("bjui.navtab.switch",j.proxy(function(){e.$grid.data("need.fixedH")&&((t=e.$grid.parent().height())&&e.tools.fixedH(t),e.$grid.removeData("need.fixedH")),e.$grid.data("need.fixedW")&&(e.fixedWidth(),e.$grid.removeData("need.fixedW"))},e)),j(window).on(BJUI.eventType.resizeGrid,j.proxy(function(){e.initFixedW&&String(e.options.width).endsWith("%")&&(e.$grid.parent().width(),a.is(":hidden")&&a.hasClass("navtabPage")?e.$grid.data("need.fixedW",!0):e.fixedWidth()),String(e.options.height).endsWith("%")&&(t=e.$grid.parent().height(),a.is(":hidden")&&a.hasClass("navtabPage")?a.hasClass("navtabPage")&&e.$grid.data("need.fixedH",!0):t&&t!=e.parentH&&e.tools.fixedH(t))},e))};var t=j.fn.datagrid;j.fn.datagrid=a,j.datagrid=u,j.fn.datagrid.noConflict=function(){return j.fn.datagrid=t,this},j(document).on(BJUI.eventType.initUI,function(t){var e=j(t.target).find('table[data-toggle="datagrid"]');e.length&&a.call(e)})}(jQuery),function(p){"use strict";var f=function(t,e){this.$element=p(t),this.options=e,this.tools=this.TOOLS()};function a(i){var n=arguments,o=i;return this.each(function(){var t=p(this),e=p.extend({},f.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.tablefixed");a||t.data("bjui.tablefixed",a=new f(this,e)),"string"==typeof o&&p.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}f.SCROLLW=18,f.DEFAULTS={width:"100%"},f.prototype.TOOLS=function(){return{getLeft:function(t){var e=0;return t.prevAll().each(function(){e+=p(this).outerWidth()}),e},getRight:function(t){var e=0;return t.prevAll().andSelf().each(function(){e+=p(this).outerWidth()}),e-1},getCellNum:function(t){return t.prevAll().andSelf().size()},getColspan:function(t){return t.attr("colspan")||1},getStart:function(t){var e=1;return t.prevAll().each(function(){e+=parseInt(p(this).attr("colspan")||1)}),e},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(t,e){if(!p.support.leadingWhitespace){var a=t.offset(),i=e.pageX||e.screenX,n=e.pageY||e.screenY;return{offsetX:i-a.left,offsetY:n-a.top}}var o=e.target;void 0===o.offsetLeft&&(o=o.parentNode);var s=this.getPageCoord(o),l=window.pageXOffset+e.clientX,r=window.pageYOffset+e.clientY;return{offsetX:l-s.x,offsetY:r-s.y}}}},f.prototype.resetWidth=function(){var t=this.$element,e=t.width(),a=t.find("table"),i=a&&a.width(),n=a.eq(0)&&a.eq(0).find("tr:first-child > th"),o=a.eq(1)&&a.eq(1).find("tr:first-child > td");if(a&&e-i<f.SCROLLW){var s=parseInt((e-i)/n.length);a.width(e-f.SCROLLW),n.each(function(t){var e=parseInt(p(this).css("width"));p(this).width(e+s),o.eq(t)&&o.eq(t).width(e+s)})}},f.prototype.init=function(){if(this.$element.isTag("table")){this.$container=this.$element.parent().addClass("bjui-resizeGrid"),this.$fixed=void 0;var t=this.$container.width(),e=this.options.height;this.$container.hasClass("tab-pane")&&(t=this.$container.parent().width()-20),"string"==typeof this.options.width&&this.options.width.indexOf("%")?this.options.newWidth=t*(this.options.width.replace("%","")/100):this.options.newWidth=parseInt(this.options.width),this.options.styles=[],this.$element.wrap('<div class="bjui-tablefixed clearfix"></div>'),this.$fixed=this.$element.parent(),this.initHead(),this.initBody(),this.resizeCol(),this.resizeGrid(),e&&!this.$fixed.closest(".tab-content").length&&this.$fixed.height(e).addClass("fixedH")}},f.prototype.initHead=function(){var n=this.options.styles=[],t=this.$element.find("thead > tr"),d=t.eq(0).find("> th"),o=0,l=[],r=[],c=-1;d.each(function(t){for(var e=p(this),a=parseInt(e.attr("colspan")||1),i=e.attr("width"),n=e.attr("align"),o="",s=0;s<a;s++)1===a&&i&&(o=' width="'+i+'"'),n&&e.removeAttr("align").addClass(n),l.push("<th"+o+"></th>");e.attr("colsNum",c+=a),r[t]=a});var e=l.length,u=p('<tr class="resize-head">'+l.join("")+"</tr>");if(1<t.length){c=0;var h=t.eq(1).find("> th");p.each(r,function(t,e){if(1<(e=parseInt(e)))for(var a=parseInt(d.eq(t).attr("colsnum")),i=e-1;0<=i;i--){var n=h.eq(c++),o=a-i,s=n.attr("width"),l=n.attr("align"),r=u.find("> th").eq(o);n&&n.length&&n.attr("colsnum",o),s&&r.attr("width",s),l&&n.addClass(l).removeAttr("align")}})}this.$fixed.html(this.$element.html());var a=this.$fixed.find("thead");a.prepend(u),u.find("> th").each(function(t){var e=[],a=p(this).innerWidth();e[0]=parseInt(a),o+=e[0],n[n.length]=e}),o=parseInt((this.options.newWidth-f.SCROLLW-o)/e);var i=a.find("> tr:eq(0) > th");(this.options.$ths=i).each(function(t){var e=p(this),a=n[t],i=e.attr("width");e.removeAttr("align").width(a[0]+o),a[0]=a[0]+o,i&&(a[0]=parseInt(i),e.width(i).removeAttr("width"))}),a.find("> tr:gt(0) > th").each(function(){var t=p(this);t.html('<div class="fixedtableCol">'+t.html()+"</div>")}),a.wrap('<div class="fixedtableHeader" style="width:'+(this.options.newWidth-f.SCROLLW)+'px;overflow:hidden;"><div class="fixedtableThead"><table class="table table-bordered" style="width:'+(this.options.newWidth-f.SCROLLW)+"px; max-width:"+(this.options.newWidth-f.SCROLLW)+'px;"></table></div></div>'),this.$fixed.append('<div class="resizeMarker" style="display:none; height:300px; left:57px;"></div><div class="resizeProxy" style="left:377px; display:none; height:300px;"></div>')},f.prototype.initBody=function(){var t,e,a=this,i=this.$fixed.find("> tbody");if(this.options.height)e=this.options.height-this.$fixed.find(".fixedtableHeader").height()+"px";else{e="100%";p(document).one(BJUI.eventType.afterInitUI,function(t){var e;e=a.$fixed.parent().height(),a.$fixed.parent().css("overflow","hidden"),a.$fixed.height(e).find(".fixedtableScroller").height(e-a.$fixed.find(".fixedtableHeader").height())})}t='style="height:'+e+'; overflow-y:auto;"',i.wrap('<div class="fixedtableScroller"'+t+' style="width:'+this.options.newWidth+'px;"><div class="fixedtableTbody"><table style="width:'+(this.options.newWidth-f.SCROLLW)+"px; max-width:"+(this.options.newWidth-f.SCROLLW)+'px;"></table></div></div>'),this.$element.attr("class")?i.parent().addClass(this.$element.attr("class")):i.parent().addClass("table table-striped table-bordered table-hover"),void 0!==this.$element.attr("data-selected-multi")&&i.parent().attr("data-selected-multi",this.$element.attr("data-selected-multi")),i.before('<thead><tr class="resize-head">'+this.$fixed.find("thead > tr").html()+"</tr></thead>"),this.options.$tds=i.prev().find("> tr:first-child > th"),this.options.nowrap&&i.parent().addClass("nowrap"),i.closest(".fixedtableScroller").scroll(function(t){var e=p(this),a=e.scrollLeft();return e.prev().find("> .fixedtableThead").css({position:"relative",left:-a}),!1})},f.prototype.resizeCol=function(){var s=this,l=this.$fixed,n=this.options.$ths,r=this.options.$tds,d=this.tools;l.find("thead > tr:gt(0) > th").each(function(t){var i=p(this);i.mouseover(function(t){var e=parseInt(l.find(".fixedtableThead").css("left"))||0,a=d.getOffset(i,t).offsetX,o=n.eq(i.attr("colsnum"));return i.outerWidth()-a<5?i.css("cursor","col-resize").off("mousedown.bjui.tablefixed.resize").on("mousedown.bjui.tablefixed.resize",function(t){l.find("> .resizeProxy").show().css({left:d.getRight(o)+e+l.position().left,top:l.position().top,height:l.height(),cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:l.find(".resizeMarker"),move:"horizontal",event:t,stop:function(){var t=l.find(".resizeProxy").position().left-l.find(".resizeMarker").position().left-o.outerWidth()-9,e=d.getCellNum(o),a=o.width()+t,i=r.eq(e-1),n=l.find("> .fixedtableHeader .table").width();o.width(a),i.width(a),l.find(".table").width(n+t),l.find(".resizeMarker, .resizeProxy").hide(),n+t+f.SCROLLW<s.options.newWidth?l.find(".fixedtableScroller").width(n+t+f.SCROLLW):(a=l.closest(".bjui-resizeGrid").innerWidth(),n+t+f.SCROLLW<a&&(a=n+t+f.SCROLLW),l.find(".fixedtableHeader").width(a-f.SCROLLW),l.find(".fixedtableScroller").width(a),l.width(a)),l.data("resizeGrid",!0)}}),l.find("> .resizeMarker").show().css({left:d.getLeft(o)+e+l.position().left,top:l.position().top,height:l.height()})}):i.css("cursor","default").off("mousedown.bjui.tablefixed.resize"),!1})})},f.prototype.setOrderBy=function(t){var e=this.$element,a=e.find(".fixedtableCol"),i=p(FRAG.orderby.replace("#asc#",BJUI.regional.orderby.asc).replace("#desc#",BJUI.regional.orderby.desc));t=t||this.options,e.addClass("orderby"),t.orderDirection&&(BJUI.ui.clientPaging||e.addClass(t.orderDirection),e.pagination("setClientOrder",{orderField:t.orderField,orderDirection:t.orderDirection})),a.length||(a=p('<div class="fixedtableCol">'+e.html()+"</div>").appendTo(e.empty())),i.data("orderField",t.orderField).appendTo(a).pagination("orderBy")},f.prototype.resizeGrid=function(){var r=this;p(window).on(BJUI.eventType.resizeGrid,function(){p("div.bjui-resizeGrid").each(function(){var e,t=p(this),a=t.closest(".navtabPage"),i=t.width(),n=t.height(),o=t.find(".bjui-tablefixed"),s=o.find(".fixedtableThead").height(),l=r.options.newWidth;t.length&&t.is(":hidden")&&(t.hasClass("tab-pane")||(a.show(),i=t.innerWidth(),n=t.height(),s=o.find(".fixedtableHeader").height(),a.hide())),i&&t.find(".bjui-tablefixed").each(function(){var t=p(this);e=t.data("resizeGrid")?l:i,t.width(e),t.find(".table").width(e-f.SCROLLW),t.find(".fixedtableHeader").width(e-f.SCROLLW),t.find(".fixedtableScroller").width(e)}),t.css("overflow","hidden"),o.height(n).find(".fixedtableScroller").height(n-s)})})};var t=p.fn.tablefixed;p.fn.tablefixed=a,p.fn.tablefixed.Constructor=f,p.fn.tablefixed.noConflict=function(){return p.fn.tablefixed=t,this},p(document).on(BJUI.eventType.initUI,function(t){var e=p(t.target).find('table[data-toggle="tablefixed"]');e.length&&a.call(e)}),p(document).on(BJUI.eventType.afterInitUI,function(t){var e=p(t.target).find("th[data-order-field]");e.length&&a.call(e,"setOrderBy")}),p(document).on("click.bjui.tr.data-api","tr[data-id]",function(t){var e=p(this),a=e.closest("table"),i=a.data("selectedMulti"),n=e.attr("data-id"),o="selected",s=a.closest(".unitBox").find("#bjui-selected");e.toggleClass(o),i?(n=[],e.siblings("."+o).add(e.hasClass(o)?e:"").each(function(){n.push(p(this).attr("data-id"))}),n=n.join(",")):(e.siblings().removeClass(o),e.hasClass(o)||(n="")),s&&s.length?s.val(n):(s=p('<input type="hidden" id="bjui-selected" value="'+n+'">')).appendTo(a.closest(".unitBox"))})}(jQuery),function(c){"use strict";var s=function(t,e){this.$element=c(t),this.options=e,this.tools=this.TOOLS(),this.$tbody=this.$element.find("> tbody"),this.$tbody.length||(this.$tbody=c("<tbody></tbody>"),this.$element.append(this.$tbody)),this.$numAdd=this.$btnAdd=null};function n(i){var n=arguments,o=i;return this.each(function(){var t=c(this),e=c.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.tabledit");a||t.data("bjui.tabledit",a=new s(this,e)),"string"==typeof o&&c.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}s.DEFAULTS={singleNoindex:!0},s.EVENTS={afterDelete:"afterdelete.bjui.tabledit"},s.prototype.TOOLS=function(){var d=this;return{initSuffix:function(t){t.find("> tr").each(function(d){c(this).find(":input, :file, a, label, div").each(function(){var t=c(this),e=t.attr("name"),a=t.val(),i=t.attr("for"),n=t.attr("id"),o=t.attr("href"),s=t.attr("data-group"),l=t.attr("data-suffix");if(e&&t.attr("name",e.replaceSuffix(d)),i&&t.attr("for",i.replaceSuffix(d)),n&&t.attr("id",n.replaceSuffix(d).replaceSuffix2(d)),o&&t.attr("href",o.replaceSuffix(d)),s&&t.attr("data-group",s.replaceSuffix(d)),l&&t.attr("data-suffix",l.replaceSuffix(d)),a&&0<=a.indexOf("#index#")&&t.val(a.replace("#index#",d+1)),t.hasClass("no")){var r=t.data("prefix")?t.data("prefix"):"";t.val(r+(d+1))}})})},initEnter:function(t){var i=t.find(":text");i.each(function(a){c(this).bind("keydown",function(t){if(t.which===BJUI.keyCode.ENTER){var e=a+1;i.eq(e)&&i.eq(e).focus(),t.preventDefault()}})}),this.initInput(t)},initInput:function(t){t.find("> tr > td").each(function(){var e=c(this).find(".input-hold");e.length||(e=c('<span class="input-hold" style="display:block; padding:0 4px; height:0; font-size:12px; visibility: hidden;"></span>'),c(this).append(e)),c.support.leadingWhitespace?c(this).on("input",":text",function(t){e.text(c(this).val())}):c(this).on("propertychange",":text",function(t){e.text(c(this).val())})})},initTbody:function(){var l=d.$element,a=d.$tbody;function i(t){t.removeClass("readonly").find("> td *").each(function(){var t=c(this),e=t.closest("td"),a=e.data("val"),i=t.attr("data-toggle-old"),n=e.data("readonly");if(void 0===a&&(a=e.html()),e.data("notread"))return!0;if(t.isTag("select")&&(e.find(".tabledit-select-text").first().hide(),t.val(e.attr("data-val")),t.removeClass("readonly disabled").selectpicker("show")),t.is(":checkbox")&&(t.closest(".icheckbox_minimal-purple").removeClass("disabled"),t.closest(".icheckbox_minimal-purple").find("ins").removeClass("readonly")),t.is(":radio")&&(t.closest(".iradio_minimal-purple").removeClass("disabled"),t.closest(".iradio_minimal-purple").find("ins").removeClass("readonly")),i){if("dosave"===i)return!0;t.removeAttr("data-toggle-old").attr("data-toggle",i),"spinner"===i&&t.spinner("destroy").spinner(),"kindeditor"===i&&e.initui()}(t.is(":text")||t.is("textarea"))&&(t.off("keydown.readonly"),n&&t.prop("readonly",!0))}),t.find(".bjui-lookup, .bjui-spinner, .bjui-upload").show(),t.find('[data-toggle="doedit"]').attr("data-toggle","dosave").text("完成")}function r(t){t.addClass("readonly").find("> td *").each(function(){var t=c(this),e=t.closest("td"),a=t.attr("data-toggle");if(e.data("notread"))return!0;if(t.isTag("select")){t.addClass("readonly disabled").selectpicker("hide");var i=t.children("option").filter(":selected").text(),n=e.find(".tabledit-select-text").first();n.length?n.text(i).show():e.append('<span style="padding: 0 2px" class="tabledit-select-text">'+i+"</span>")}if(t.is(":checkbox")&&(t.closest(".icheckbox_minimal-purple").addClass("disabled"),t.closest(".icheckbox_minimal-purple").find("ins").addClass("readonly")),t.is(":radio")&&(t.closest(".iradio_minimal-purple").addClass("disabled"),t.closest(".iradio_minimal-purple").find("ins").addClass("readonly")),a){if("doedit"===a||"dosave"===a)return!0;t.removeAttr("data-toggle").attr("data-toggle-old",a),"kindeditor"===a&&KindEditor.remove(t)}(t.is(":text")||t.is("textarea"))&&t.on("keydown.readonly",function(t){t.preventDefault()})}),t.find(".bjui-lookup, .bjui-spinner, .bjui-upload").hide(),t.find('[data-toggle="dosave"]').attr("data-toggle","doedit").text("编辑")}a.find("> tr").each(function(){var e=c(this),s=e.find("> td"),t=l.data("bjui.tabledit.tr").clone().find("> th");e.data("bjui.tabledit.oldTds",e.html()),t.each(function(t){var e=s.eq(t),a=e.data("val"),i=c(this),n=i.children(),o=i.find(".pic-box");void 0===a&&(a=e.html()),e.data("noedit")||n.length&&(n.is("input:checkbox")||n.is("input:radio")?n.filter('[value="'+a+'"]').attr("checked","checked"):n.isTag("select")?n.find('option[value="'+e.data("val")+'"]').attr("selected","selected"):o.length?(e.data("val")&&i.find(".pic-name").val(e.data("val")),o.html(e.html())):n.hasClass("wrap_bjui_btn_box")?n.find("input[data-toggle]").attr("value",a+""):n.is("textarea")?(n.html(a),"kindeditor"===n.attr("data-toggle")&&n.attr("data-toggle-old","kindeditor").removeAttr("data-toggle")):n.attr("value",a+""),e.html(i.html()))}),e.on("dblclick",c.proxy(function(t){i(e)},d)).initui(),d.tools.initSuffix(a),r(e)}),a.on("click.bjui.tabledit.readonly",'[data-toggle="doedit"]',function(t){i(c(this).closest("tr"))}).on("click.bjui.tabledit.readonly",'[data-toggle="dosave"]',function(t){var e=c(this).closest("tr"),a=e.index(),i=d.options.callback;if(d.options.action){if(e.wrap('<form action="" method="POST"></form>'),e.attr("data-id")){var n=l.find("> thead > tr:eq(0)").data("idname")||"id";e.before('<input type="hidden" name="'+n.replaceSuffix(a)+'" value="'+e.attr("data-id")+'">')}var o=e.parent().serializeArray();d.options.singleNoindex&&c.each(o,function(t,e){c.extend(e,{name:e.name.replaceSuffix(0)})}),e.prev("input").remove(),e.unwrap().isValid(function(t){t&&(i=i?i.toFunc():function(t){t[BJUI.keys.statusCode]===BJUI.statusCode.ok?r(e):e.bjuiajax("ajaxDone",t)},e.bjuiajax("doAjax",{url:d.options.action,data:o,type:d.options.type||"POST",callback:i}))})}else r(e)}),d.tools.initEnter(a)},doAdd:function(){var a=d.$element;d.$numAdd&&d.$btnAdd&&a.on("keydown.bjui.tabledit.add","thead .num-add",function(t){t.which===BJUI.keyCode.ENTER&&(d.$btnAdd.trigger("click.bjui.tabledit.add"),t.preventDefault())}).on("click.bjui.tabledit.add","thead .row-add",function(t){var e=1;isNaN(d.$numAdd.val())||(e=parseInt(d.$numAdd.val())),d.add(a,e),t.preventDefault()})},doDel:function(t){var a=this,e="click.bjui.tabledit.del";t.off(e).on(e,".row-del",function(t){var e=c(this);e.data("confirmMsg")?e.alertmsg("confirm",e.data("confirmMsg"),{okCall:function(){a.delData(e)}}):a.delData(e),t.preventDefault()})},delData:function(e){var a=this,i=e.closest("tbody"),n=e.data(),t=function(t){e.closest("tr").remove(),a.initSuffix(i),a.afterDelete(i),n.callback&&n.callback.toFunc().apply(d,[t])};e.is("[href^=javascript:]")||e.is('[href^="#"]')?t():e.bjuiajax("doAjax",{url:e.attr("href"),data:n.data,callback:t})},afterDelete:function(t){var e=c.Event(s.EVENTS.afterDelete,{relatedTarget:t[0]});d.$element.trigger(e)}}},s.prototype.init=function(){var n=this,t=this.tools,e=this.$element.addClass("bjui-tabledit"),a=e.find("> thead > tr:first"),i=this.$tbody,o=e.find("> thead > tr:first").html();a.find("> th").each(function(){var t=c(this),e=t.attr("title"),a=t.data("addtool");if(e&&t.html(e),a){var i=c('<span style="position:relative;"></span>');t.empty(),n.$numAdd=c('<input type="text" value="1" class="form-control num-add" size="2" title="待添加的行数">'),n.$btnAdd=c('<a href="javascript:;" class="row-add" title="添加行"><i class="fa fa-plus-square"></i></a>'),i.append(n.$numAdd).append(n.$btnAdd).appendTo(t)}}),e.data("bjui.tabledit.tr",c("<tr>"+o+"</tr>")),t.initTbody(),t.doAdd(),t.doDel(i)},s.prototype.add=function(t,e){for(var a,i=this.tools,n=t.find("> tbody"),o=t.data("bjui.tabledit.tr"),s=0;s<e;s++){o.find("> th").each(function(){c(this).replaceWith("<td>"+c(this).html()+"</td>")});var l=o.clone();0===s&&(a=l),l.hide().appendTo(n),i.initSuffix(n),i.initEnter(n),l.show().css("display","").initui()}a&&a.length&&a.find(":text").each(function(){var t=c(this);if(!t.prop("readonly"))return t.focus(),!1})};var t=c.fn.tabledit;c.fn.tabledit=n,c.fn.tabledit.Constructor=s,c.fn.tabledit.noConflict=function(){return c.fn.tabledit=t,this},c(document).on(BJUI.eventType.initUI,function(t){var e=c(t.target).find('table[data-toggle="tabledit"]');e.length&&n.call(e)}),c(document).on(BJUI.eventType.afterInitUI,function(t){c(t.target).find('table[data-toggle="tabledit"]').each(function(){if(c(this).is("[data-initnum]")){var t=c(this).data("initnum");0<t&&n.call(c(this),"add",c(this),t)}})}),c(document).on("click.bjui.tabledit.data-api",'[data-toggle="tableditadd"]',function(t){var e=c(this),a=e.data("num")||1,i=e.data("target");i&&c(i).length&&c(i).isTag("table")&&(n.call(e,"add",c(i),a),t.preventDefault())})}(jQuery),function(s){"use strict";var r=function(t,e){this.$element=s(t),this.options=e,this.tools=this.TOOLS(),this.$spinner=null,this.height=this.$element.addClass("form-control").innerHeight(),this.ivalue=Number(this.$element.val())||0};function a(i){var n=arguments,o=i;return this.each(function(){var t=s(this),e=s.extend({},r.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.spinner");a||t.data("bjui.spinner",a=new r(this,e)),"string"==typeof o&&s.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}r.DEFAULTS={min:0,max:100,step:1,decimalPlace:0},r.EVENTS={afterChange:"afterchange.bjui.spinner"},r.prototype.TOOLS=function(){var l=this;return{changeVal:function(t){var e=l.$element,a=Number(e.val())||Number(l.ivalue),i=t.data("add")||-1,n=l.options.min,o=l.options.max,s=l.options.step;1===i?a<=o-s&&(a+=s):-1===i?n+s<=a&&(a-=s):o<a?a=o:a<n&&(a=n),l.options.decimalPlace&&(a=a.toFixed(l.options.decimalPlace)),l.ivalue=a,e.val(a).trigger(r.EVENTS.afterChange,{value:a})}}},r.prototype.init=function(){isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?BJUI.debug("Spinner Plugin: Parameter is non-numeric type!"):this.addBtn()},r.prototype.addBtn=function(){var e=this,t=e.$element;if(!this.$lookBtn&&!t.parent().hasClass("wrap_bjui_btn_box")){this.$spinner=s(FRAG.spinnerBtn),t.css({paddingRight:"13px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var a=t.parent();a.css("position","relative"),this.$spinner.css({height:this.height}).appendTo(a),this.$spinner.on("selectstart",function(){return!1});var i=null;e.$spinner.find("li").on("click",function(t){e.tools.changeVal(s(this))}).on("mousedown",function(){var t=s(this);i=setInterval(function(){e.tools.changeVal(t)},150)}).on("mouseup",function(){clearTimeout(i)})}},r.prototype.destroy=function(){this.$element.parent().hasClass("wrap_bjui_btn_box")&&(this.$element.parent().find(".bjui-spinner").remove(),this.$element.unwrap())};var t=s.fn.spinner;s.fn.spinner=a,s.fn.spinner.Constructor=r,s.fn.spinner.noConflict=function(){return s.fn.spinner=t,this},s(document).on(BJUI.eventType.initUI,function(t){var e=s(t.target).find('input[data-toggle="spinner"]');e.length&&a.call(e)})}(jQuery),function(l){"use strict";var e,a,r,d=function(t,e){this.$element=l(t),this.options=e,this.$lookBtn=null};function o(i){var n=arguments,o=i;return this.each(function(){var t=l(this),e=l.extend({},d.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.lookup");a?t.data("newurl")&&(a.options.url=t.data("newurl"),t.data("bjui.dialog",null)):(t.data("newurl")&&(e.url=t.data("newurl")),t.data("bjui.lookup",a=new d(this,e))),"string"==typeof o&&l.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}d.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:"Lookup",maxable:!0,resizable:!0},d.EVENTS={afterChange:"afterchange.bjui.lookup"},d.prototype.init=function(){var t=this.options;return t.url?(t.url=decodeURI(t.url).replacePlh(this.$element.closest(".unitBox")),t.url.isFinishedTm()?(t.url=encodeURI(t.url),e=this.options.group||null,a=this.options.suffix||null,r=this.$element,a&&(a=a.trim()),void this.open(this.$element)):(this.$element.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),BJUI.debug("Lookup Plugin: The lookup's url is incorrect, url:"+t.url),!1)):(BJUI.debug("Lookup Plugin: Error trying open a lookup dialog, url is undefined!"),!1)},d.prototype.addBtn=function(){var a=this,t=a.$element;if(!this.$lookBtn&&!t.parent().hasClass("wrap_bjui_btn_box")){this.$lookBtn=l(FRAG.lookupBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var e=this.$element.parent(),i=this.$element.addClass("form-control").innerHeight();e.css({position:"relative",display:"inline-block"}),l.each(a.options,function(t,e){"toggle"!==t&&a.$lookBtn.data(t,e)}),this.$lookBtn.css({height:i,lineHeight:i+"px"}).appendTo(e),this.$lookBtn.on("selectstart",function(){return!1})}},d.prototype.open=function(t){var e=this.options;t.dialog({id:e.id||"lookup_dialog",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask,maxable:e.maxable,resizable:e.resizable})},d.prototype.getField=function(t){return(e?e+".":"")+t+(a||"")},d.prototype.setSingle=function(t,e){"string"==typeof t&&(t=new Function("return "+t)()),this.setVal(t,e)},d.prototype.setMult=function(t,e){var i={};this.$element.closest(".unitBox").find('[name="'+t+'"]').filter(":checked").each(function(){var t=new Function("return "+l(this).val())();for(var e in t)if(t.hasOwnProperty(e)){var a=i[e]?i[e]+",":"";i[e]=a+t[e]}}),l.isEmptyObject(i)?this.$element.alertmsg("error",this.$element.data("warn")||FRAG.alertSelectMsg):this.setVal(i,e)},d.prototype.setVal=function(i,n){var o,s=this,t=r.closest(".unitBox");r.data("customEvent")?r.trigger("customEvent.bjui.lookup",[i]):t.find(":input").each(function(){var t=l(this),e=t.attr("name");for(var a in i){if(i.hasOwnProperty(a))if(s.getField(a)===e){o=1===parseInt(n)&&t.val()?t.val()+","+i[a]:i[a],t.val(o).trigger(d.EVENTS.afterChange,{value:i[a]});break}}}),this.$element.dialog("closeCurrent")};var t=l.fn.lookup;l.fn.lookup=o,l.fn.lookup.Constructor=d,l.fn.lookup.noConflict=function(){return l.fn.lookup=t,this},l(document).on(BJUI.eventType.initUI,function(t){var e=l(t.target).find('[data-toggle="lookup"]');e.length&&o.call(e,"addBtn")}),l(document).on("click.bjui.lookup.data-api",'[data-toggle="lookupbtn"]',function(t){var e=l(this);e.attr("href")&&!e.data("url")&&e.attr("data-url",e.attr("href")),e.data("title")||e.attr("data-title",e.text()),o.call(e),t.preventDefault()}),l(document).on("click.bjui.lookupback.data-api",'[data-toggle="lookupback"]',function(t){var e=l(this),a=e.data("args"),i=e.data("lookupid"),n=l('input[name="lookupType"]:checked').val();a?o.call(e,"setSingle",a,n):i&&o.call(e,"setMult",i,n),t.preventDefault()})}(jQuery),function(p){"use strict";var s=function(t,e){this.$element=p(t).addClass("tag-input"),this.options=e,this.tools=this.TOOLS(),this.$box=p(this.$element.wrap('<div class="bjui-tags"></div>')).parent(),this.timeout=null,this.$tagsArr={},this.tags=[]};function a(i){var n=arguments,o=i;return this.each(function(){var t=p(this),e=p.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.tags");a||t.data("bjui.tags",a=new s(this,e)),"string"==typeof o&&p.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}s.DEFAULTS={width:300,url:"",global:!1,type:"GET",tagname:"tag",max:0,clear:!1,lightCls:"tags-highlight"},s.EVENTS={afterCreated:"aftercreated.bjui.tags"},s.prototype.TOOLS=function(){var u=this,h=this.options;return{keyDown:function(t){if(13===t.which)return!1},keyUp:function(t){var e;switch(t.which){case BJUI.keyCode.BACKSPACE:if(0===p.trim(u.$element.val()).length)return u.tools.removeMenu(),!1;break;case BJUI.keyCode.ESC:u.tools.removeMenu();break;case BJUI.keyCode.DOWN:if(!u.$menu||!u.$menu.length)return;e=u.$menu.find("> ."+h.lightCls);var a=u.$menu.find("> li:first-child");if(e.length){var i=e.removeClass(h.lightCls).next();i.length?i.addClass(h.lightCls):a.addClass(h.lightCls)}else a.addClass(h.lightCls);return!1;case BJUI.keyCode.UP:if(!u.$menu||!u.$menu.length)return;e=u.$menu.find("> ."+h.lightCls);var n=u.$menu.find("> li:last-child");if(e.length){var o=e.removeClass(h.lightCls).prev();o.length?o.addClass(h.lightCls):n.addClass(h.lightCls)}else n.addClass(h.lightCls);return!1;case BJUI.keyCode.ENTER:if(0<h.max&&u.$tagsArr.length>=h.max)return!1;var s=!1,l=!1,r=null,d=u.$menu&&u.$menu.find("> ."+h.lightCls);if(d&&d.length)s=d.text(),(r=d.data("item"))&&(l=r.value);else{if(!(s=p.trim(u.$element.val())).length)return!1;if(h.clear&&-1===p.inArray(s,u.tags))return u.$element.val(""),!1;l=s}if(!s)return;var c=!1;return u.$tagsArr.length&&u.$tagsArr.each(function(){p(this).val()!==l||(c=!0)}),c?(u.$element.val(""),!1):(u.tools.createTag(s,l),u.tools.removeMenu(),u.$element.val(""),p.proxy(u.tools.onAfterCreated(r,l),u),!1)}},query:function(){u.timeout&&clearTimeout(u.timeout),u.timeout=setTimeout(u.tools.doQuery,300)},doQuery:function(){if(!(0<h.max&&u.$tagsArr.length>=h.max)){var t=u.$element.val(),n=u.$box.find("> .tags-menu"),a=[],e=u.$element.closest(".navtab-panel").length?p.CurrentNavtab:p.CurrentDialog;u.$element.closest(".bjui-layout").length&&(e=u.$element.closest(".bjui-layout")),0!==t.length&&(u.$element.one("ajaxStart",function(){e.trigger("bjui.ajaxStart")}).one("ajaxStop",function(){e.trigger("bjui.ajaxStop")}),p.ajax({url:h.url,global:h.global,type:h.type,data:{term:t},dataType:"json",success:function(t){if(0!==t.length){n.length||(n=p('<ul class="tags-menu"></ul>')),n.empty().hide().appendTo(u.$box);for(var e=0;e<t.length;e++)p('<li class="tags-item">'+t[e].label+"</li>").data("item",t[e]).appendTo(n),a.push(t[e].label);u.tags=a,n.css({top:u.$element.position().top+u.$element.outerHeight(),left:u.$element.position().left}).fadeIn().find("> li").hover(function(){p(this).addClass(h.lightCls).siblings().removeClass(h.lightCls)},function(){p(this).removeClass(h.lightCls)}).click(function(){var t=p(this).text(),e=p(this).data("item"),a=e.value,i=!1;if(u.$box.find("input:hidden").each(function(){p(this).val()!==a||(i=!0)}),i)return u.$element.val(""),void n.remove();p.proxy(u.tools.createTag(t,a),u),n.remove(),u.$element.val(""),p.proxy(u.tools.onAfterCreated(e,a),u)}),u.$menu=n}}}))}},createTag:function(t,e){var a=p('<span class="label label-tag" data-value="'+e+'" style="margin-left: 1px; margin-top: 1px;"><i class="fa fa-tag"></i> '+t+'&nbsp;&nbsp;<a href="#" class="close">&times;</a></span>');a.insertBefore(u.$element).find("a.close").click(function(){var t=a.data("value");u.$box.find("input:hidden").each(function(){p(this).val()===t&&p(this).remove()}),a.remove(),u.$tagsArr=u.$box.find('input[name="'+u.options.tagname+'"]')}),p('<input type="hidden" name="'+u.options.tagname+'">').val(e).appendTo(u.$box),u.$tagsArr=u.$box.find('input[name="'+u.options.tagname+'"]')},removeMenu:function(){u.$menu&&u.$menu.remove()},onAfterCreated:function(t,e){var a=[];u.$tagsArr.length&&u.$tagsArr.each(function(){a.push(p(this).val())}),u.$element.trigger(s.EVENTS.afterCreated,{item:t,value:e,tags:a.join(",")})}}},s.prototype.init=function(){var t=this.$element,e=this.options;if(e.url){if(e.url=decodeURI(e.url).replacePlh(t.closest(".unitBox")),!e.url.isFinishedTm())return t.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Tags Plugin: The query tags url is incorrect, url: "+e.url);e.url=encodeURI(e.url),isNaN(this.options.max)?BJUI.debug("Tags Plugin: Parameter 'max' is non-numeric type!"):(this.$box.width(e.width).on("click",function(){t.focus()}),t.on("keydown",p.proxy(this.tools.keyDown,this)).on("keyup",p.proxy(this.tools.keyUp,this)),p.support.leadingWhitespace?t.on("input",p.proxy(this.tools.query,this)):t.on("propertychange",p.proxy(this.tools.query,this)),p(document).on("click.bjui.tags",p.proxy(function(t){p(t.target).closest(this.$box).length||this.tools.removeMenu()},this)))}else BJUI.debug("Tags Plugin: Do query tags, url is undefined!")},s.prototype.destroy=function(){this.$tags&&(this.$element.upwrap(),this.$tags.remove())};var t=p.fn.tags;p.fn.tags=a,p.fn.tags.Constructor=s,p.fn.tags.noConflict=function(){return p.fn.tags=t,this},p(document).on(BJUI.eventType.initUI,function(t){var e=p(t.target).find('input[data-toggle="tags"]');e.length&&a.call(e)})}(jQuery),function(d){"use strict";var l=function(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()};function a(i){var n=arguments,o=i;if(window.FileReader)return this.each(function(){var t=d(this),e=d.extend({},l.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.upload");a||t.data("bjui.upload",a=new l(this,e)),"string"==typeof o&&d.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()});this.each(function(){if(d.fn.uploadify){var t={swf:BJUI.PLUGINPATH+"uploadify/scripts/uploadify.swf",fileTypeExts:"*.jpg;*.png",id:"fileInput",fileObjName:"file",fileSizeLimit:204800,buttonText:"选择上传文件",auto:!1,multi:!1,height:24},e=d(this),a=e.data();if(e.addClass("bjui-upload"),a.id||(a.id=e.attr("id")),d.extend(t,a),t.uploader){if(t.uploader=decodeURI(t.uploader).replacePlh(e.closest(".unitBox")),!t.uploader.isFinishedTm())return e.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+t.uploader);t.uploader=encodeURI(t.uploader),"fileInput"===t.id&&(t.id=t.id+(new Date).getTime());var i=d('<input type="file" name="'+t.name+'" id="'+t.id+'">');if(t.onInit&&"string"==typeof t.onInit&&(t.onInit=t.onInit.toFunc()),t.onCancel&&"string"==typeof t.onCancel&&(t.onCancel=t.onCancel.toFunc()),t.onSelect&&"string"==typeof t.onSelect&&(t.onSelect=t.onSelect.toFunc()),t.onUploadSuccess&&"string"==typeof t.onUploadSuccess&&(t.onUploadSuccess=t.onUploadSuccess.toFunc()),t.onUploadComplete&&"string"==typeof t.onUploadComplete&&(t.onUploadComplete=t.onUploadComplete.toFunc()),t.onUploadError&&"string"==typeof t.onUploadError&&(t.onUploadError=t.onUploadError.toFunc()),i.appendTo(e),!t.auto){var n=d('<button class="btn btn-orange" data-icon="cloud-upload">开始上传</button>');n.hide().insertAfter(e).click(function(){i.uploadify("upload","*"),d(this).hide()}),t.onSelect=function(){n.show()}}i.uploadify(t)}else BJUI.debug("Upload Plugin: The options uploader is undefined!")}})}l.DEFAULTS={fileTypeExts:"*.jpg;*.png",uploader:"",auto:!1,method:"POST",multi:!1,formData:{},fileObjName:"file",fileSizeLimit:204800,previewImg:!0,previewLoadimg:null,dragDrop:!1,showUploadedPercent:!0,showUploadedSize:!0,buttonText:"选择上传文件",removeTimeout:1e3,itemTemplate:FRAG.uploadTemp,breakPoints:!1,fileSplitSize:1048576,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null},l.MIMETYPES={zip:["application/x-zip-compressed"],jpg:["image/jpeg"],png:["image/png"],gif:["image/gif"],swf:["application/x-shockwave-flash"],doc:["application/msword"],xls:["application/vnd.ms-excel"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],mp3:["audio/mpeg"],mp4:["video/mp4"],pdf:["application/pdf"],txt:["text/plain"],xml:["text/xml"]},l.prototype.TOOLS=function(){var o=this,s=this.options,a={formatFileSize:function(t,e){return t=1048576<t&&!e?(Math.round(100*t/1048576)/100).toString()+"MB":(Math.round(100*t/1024)/100).toString()+"KB"},getFile:function(t,e){console.log(t);for(var a=0;a<e.length;a++)if(e[a].index===t)return e[a];return!1},getFileTypes:function(t){for(var e=[],a=t.split(";"),i=0;i<a.length;i++)e.push(a[i].split(".").pop());return e},getMimetype:function(t){return l.MIMETYPES[t]},getAcceptString:function(t){for(var e=this.getFileTypes(t),a=[],i=0;i<e.length;i++){var n=this.getMimetype(e[i]);n?a.push(n):a.push("."+e[i])}return a.join(",")},filter:function(t){var e=[],a=this.getFileTypes(s.fileTypeExts);if(0<a.length)for(var i=0;i<t.length;i++){var n=t[i];parseInt(this.formatFileSize(n.size,!0))>s.fileSizeLimit?o.$element.alertmsg("error",'文件"'+n.name+'"大小超出限制！'):0<=d.inArray(n.name.split(".").pop().toLowerCase(),a)?e.push(n):o.$element.alertmsg("error",'文件"'+n.name+'"类型不允许！')}return e},getFiles:function(t){var e=t.target.files||t.dataTransfer.files;e=this.filter(e);for(var a=0;a<e.length;a++)e[a].id=e[a].lastModifiedDate.getTime()+"_"+e[a].size+"_"+(e[a].type||"").replace(/\W/g,""),this.renderQueueItem(e[a]),o.queueData.files++;return e},renderQueueItem:function(t){var i=0,e=d(s.itemTemplate.replace("{fileId}",t.id).replace("{fileName}",t.name).replace("#upConfirm#",BJUI.regional.upload.upConfirm).replace("#upPause#",BJUI.regional.upload.upPause).replace("#upCancel#",BJUI.regional.upload.upCancel).replace("{percent}","0.00%").replace("{uploadedSize}","0KB").replace("{fileSize}",this.formatFileSize(t.size)));if(s.auto&&e.find("> .info > .up_confirm").remove(),e.data("upfile",t),o.$uploadFileList.append(e),s.breakPoints&&(i=this.getUploadedSize(t.id))>t.size&&(i=t.size),this.showProgress(t.id,i,t.size),s.previewImg&&-1!==t.type.indexOf("image")){var a=e.find("> .preview > .img");s.previewLoadimg&&a.html('<img src="'+s.previewLoadimg+'" height="114">'),this.previewImg(t,a)}else e.find("> .preview").remove();if(s.showUploadedSize){var n=e.find("> .filesize");n.find("> .uploadedsize").html(this.formatFileSize(i)),n.find("> .filesize").html(this.formatFileSize(t.size))}else e.find("> .filesize").remove();s.showUploadedPercent?e.find("> .percent").html((i/t.size*100).toFixed(2)+"%"):e.find("> .percent").remove(),s.onSelect&&s.onSelect(t),s.auto&&o.fileUpload(t,i),e.on("click.bjui.upload.confirm",".up_confirm",function(t){var e=d(this),a=e.closest(".item");e.hide().next().show(),o.fileUpload(a.data("upfile"),i)}),e.on("click.bjui.upload.cancel",".up_cancel",this.removeQueueItem)},successQueueItem:function(t,e){a.showProgress(t.id,t.size,t.size),s.onUploadSuccess&&s.onUploadSuccess.toFunc().call(o,t,e.responseText,o.$element),setTimeout(function(){o.$element.find("#"+t.id).fadeOut("normal",function(){d(this).remove(),0===o.$element.find("> .queue > .item:visible").length&&(o.$element.find("> .queue").hide(),o.$file.val(""))})},s.removeTimeout)},removeQueueItem:function(t,e){e&&e.abort(),d(this).closest(".item").fadeOut("normal",function(){d(this).remove(),0===o.$element.find("> .queue > .item:visible").length&&o.$element.find("> .queue").hide()}),t.preventDefault()},previewImg:function(t,e){if(t&&e.length){var a=new FileReader;a.onload=function(t){e.html('<img src="'+t.target.result+'">')},a.readAsDataURL(t)}},showProgress:function(t,e,a){var i=e/a*100+"%";o.$element.find("#"+t+" > .progress > .bar").css("width",i)},getUploadedSize:function(t){return 1*localStorage.getItem(t)},saveUploadedSize:function(t,e){localStorage.setItem(t,e)},sendBlob:function(t,e,a,i){var n=new FormData;if(e.open(s.method,t,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.append(s.fileObjName,a),i)for(var o in i)i.hasOwnProperty(o)&&n.append(o,i[o]);e.send(n)}};return a},l.prototype.init=function(){var e=this,t=this.$element,a=this.options;if(a.uploader){if(a.uploader=decodeURI(a.uploader).replacePlh(t.closest(".unitBox")),!a.uploader.isFinishedTm())return t.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+a.uploader);if(a.uploader=encodeURI(a.uploader),!t.hasClass("bjui-upload")){var i=d(FRAG.uploadFrag.replaceAll("#multi#",a.multi?"multiple":"").replaceAll("#accept#",e.tools.getAcceptString(a.fileTypeExts)).replaceAll("#btnTxt#",(a.icon?'<i class="fa fa-'+a.icon+'">&nbsp;&nbsp;':"")+a.buttonText));t.addClass("bjui-upload").append(i),this.$file=t.find("> .bjui-upload-select-file"),this.$uploadFileList=t.find("> .queue"),this.queueData={files:0,success:0,error:0},t.on("change.bjui.upload",".bjui-upload-select-file",function(t){e.fileSelect(t)}).on("click.bjui.upload",".bjui-upload-select",function(t){e.$file.trigger("click")}),a.onInit&&a.onInit(),a.dragDrop&&(t[0].ondragover=function(t){return t.preventDefault(),!0},t[0].ondrop=function(t){e.fileSelect(t),t.stopPropagation(),t.preventDefault()})}}else BJUI.debug("Upload Plugin: The options uploader is undefined!")},l.prototype.fileSelect=function(t){this.$uploadFileList.show(),this.tools.getFiles(t)},l.prototype.fileUpload=function(a,i){var n=this,t=n.$element,o=n.options,s=n.tools,l=!1,r=a;l=new XMLHttpRequest,o.breakPoints&&(a=r.slice(i,i+o.fileSplitSize)),l.upload&&(l.upload.onprogress=function(t){n.onProgress(a,t.loaded,r.size)},l.onreadystatechange=function(t){if(4===l.readyState){if(200===l.status){var e=!1;o.breakPoints?(i+=o.fileSplitSize,s.saveUploadedSize(r.id,i),i<r.size?(a=r.slice(i,i+o.fileSplitSize),s.sendBlob(o.uploader,l,a,o.formData)):e=!0):e=!0,e&&(n.queueData.success++,s.successQueueItem(r,l),o.onUploadComplete&&o.onUploadComplete(r,l.responseText))}else n.queueData.error++,o.onUploadError&&o.onUploadError(r,l.responseText);o.onQueueComplete&&n.queueData.files===n.queueData.success+n.queueData.error&&o.onQueueComplete(n.queueData)}},o.onUploadStart&&o.onUploadStart(),o.formData.fileName=r.name,o.formData.lastModifiedDate=r.lastModifiedDate.getTime(),s.sendBlob(o.uploader,l,a,o.formData)),t.find("#"+r.id+" > .info > .up_pause").on("click.bjui.upload.pause",function(t){l.abort(),d(this).hide().prev().show()}),t.find("#"+r.id+" > .info > .up_cancel").off("click.bjui.upload.cancel").on("click.bjui.upload.cancel",d.proxy(function(t){this.tools.removeQueueItem(t,l)},this))},l.prototype.onProgress=function(t,e,a){var i=this,n=i.options,o=i.$element.find("#"+t.id+" .progress"),s=e,l=o.attr("lastLoaded")||0;(e-=parseInt(l))>t.size&&(e=t.size),i.$progressBar=o.children(".bar");var r=(e/a*100+(n.breakPoints?parseFloat(i.$progressBar.get(0).style.width||0):0)).toFixed(2),d=100<r?"100%":r+"%";n.showUploadedSize&&o.nextAll(".filesize").find("> .uploadedsize").text(i.tools.formatFileSize(e));n.showUploadedPercent&&o.nextAll(".up_percent").text(d),i.$progressBar.css("width",d),s<n.fileSplitSize?o.attr("lastLoaded",s):o.removeAttr("lastLoaded")},l.prototype.destroy=function(){};var t=d.fn.upload;d.fn.upload=a,d.fn.upload.Constructor=l,d.fn.upload.noConflict=function(){return d.fn.upload=t,this},d(document).on(BJUI.eventType.initUI,function(t){var e=d(t.target).find('[data-toggle="upload"]');e.length&&a.call(e)})}(jQuery),function(s){"use strict";var i,n;s(function(){i=s("#bjui-link-theme"),n=s("#bjui-themes")});var l=function(t,e){this.$element=s(t),this.options=e};function e(i){var n=arguments,o=i;return this.each(function(){var t=s(this),e=s.extend({},l.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.theme");a||t.data("bjui.theme",a=new l(this,e)),"string"==typeof o&&s.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}l.DEFAULTS={theme:"purple"},l.prototype.init=function(){if(i.length){var t=i.attr("href");t=(t=t.substring(0,t.lastIndexOf("/"))).substring(0,t.lastIndexOf("/")),t+="/"+this.options.theme+"/core.css",i.attr("href",t);var e=this.$element.closest("ul").prev(),a=e.attr("class");a=a.replace(/(theme[\s][a-z]*)/g,""),e.removeClass().addClass(a).addClass("theme").addClass(this.options.theme),n.find("li").removeClass("active"),this.$element.parent().addClass("active"),this.cookie()}},l.prototype.setTheme=function(t){n.find("a.theme_"+t).trigger("click")},l.prototype.cookie=function(){var t=this.options.theme;s.cookie&&s.cookie("bjui_theme",t,{path:"",expires:30})};var t=s.fn.theme;s.fn.theme=e,s.fn.theme.Constructor=l,s.fn.theme.noConflict=function(){return s.fn.theme=t,this},s(document).on("click.bjui.theme.data-api",'[data-toggle="theme"]',function(t){e.call(s(this)),t.preventDefault()})}(jQuery),function(s){"use strict";var l=function(t,e){this.$element=s(t),this.options=e};function a(i){var n=arguments,o=i;return this.each(function(){var t=s(this),e=s.extend({},l.DEFAULTS,t.data(),"object"==typeof i&&i),a=t.data("bjui.initui");a||t.data("bjui.initui",a=new l(this,e)),"string"==typeof o&&s.isFunction(a[o])?([].shift.apply(n),n?a[o].apply(a,n):a[o]()):a.init()})}l.DEFAULTS={},l.prototype.init=function(){var t=this.$element;s.when(this.initUI()).done(function(){t.trigger(BJUI.eventType.afterInitUI)})},l.prototype.initUI=function(){var t=this.$element;s.when(t.trigger(BJUI.eventType.beforeInitUI)).done(function(){t.trigger(BJUI.eventType.initUI)})};var t=s.fn.initui;s.fn.initui=a,s.fn.initui.Constructor=l,s.fn.initui.noConflict=function(){return s.fn.initui=t,this},s(document).on("click.bjui.initui.data-api",'[data-toggle="initui"]',function(t){var e=s(this);a.call(e,e.data()),t.preventDefault()}),s(document).on(BJUI.eventType.beforeInitUI,function(t){var e=s(t.target),i=[],a=e.find("[data-noinit]");e.find("> .bjui-maskProgress").find(".progress").stop().animate({width:"85%"},"fast"),a.each(function(t){var e=s(this),a={};a.$target=e,a.$next=e.next(),a.$prev=e.prev(),a.$parent=e.parent(),a.visible=!!e.is(":visible"),i.push(a),e.remove()}),e.data("bjui.noinit",i)}),s(document).on(BJUI.eventType.initUI,function(t){s(t.target).find("> .bjui-maskProgress").find(".progress").stop().animate({width:"95%"},"fast")}),s(document).on(BJUI.eventType.afterInitUI,function(t){var a=s(t.target),e=a.data("bjui.noinit"),i=a.find("> .bjui-pageContent").find("form");e&&s.each(e,function(t,e){e.$next.length?e.$next.before(e.$target):e.$prev.length?e.$prev.after(e.$target):e.$parent.length&&e.$parent.append(e.$target),e.visible&&e.$target.show(),a.removeData("bjui.noinit")}),a.resizePageH(),i.length&&a.find("> .bjui-pageFooter").find(":submit").on("click.bjui.submit",function(t){t.preventDefault(),i.submit()}),a.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){a.find(".bjui-ajax-mask").fadeOut("normal",function(){s(this).remove()})})}),s(document).one(BJUI.eventType.afterInitUI,function(t){var e=s("#bjui-hnav-navbar").find("> li.active");e.length&&e.find("> .items").length&&e.find("> a").trigger("click")});var n=function(t){var e=t,a=e;"static"===e.css("position")&&(a=e.offsetParent());var i=parseInt(a.css("zIndex"))||0,n=e.find("> .bjui-maskBackground"),o=e.find("> .bjui-maskProgress");return n.length||(n=s(FRAG.maskBackground),o=s(FRAG.maskProgress.replace("#msg#",BJUI.regional.progressmsg)),e.prepend(n).prepend(o)),n.css("zIndex",i+1),o.css("zIndex",i+2),{$bg:n,$pr:o}};s(document).on("bjui.ajaxStart",function(t,e,a){var i=n(s(t.target));i.$bg.fadeIn(),i.$pr.fadeIn(),i.$pr.find(".progress").animate({width:"80%"},e||500),a&&setTimeout(function(){a.toFunc().call(this)},25)}).on("bjui.ajaxStop",function(t){var e=n(s(t.target));e.$pr.find(".progress").animate({width:"100%"},"fast",function(){e.$bg.remove(),e.$pr.remove()})}).on("bjui.ajaxError",function(t){var e=n(s(t.target));e.$bg.remove(),e.$pr.remove()}),s(document).on(BJUI.eventType.ajaxStatus,function(t){var e=s(t.target),a=n(e);e.one("ajaxStart",function(){a.$bg.fadeIn(),a.$pr.fadeIn(),a.$pr.find(".progress").animate({width:"10%"},"fast")}).one("ajaxStop",function(){}).one("ajaxError",function(){a.$bg.remove(),a.$pr.remove()})});var e=function(t){t.find('select[data-toggle="selectpicker"]').selectpicker("destroyMenu"),t.find('[data-toggle="selectztree"]').trigger("destroy.bjui.selectztree")};s(document).on(BJUI.eventType.beforeLoadDialog,function(t){}).on(BJUI.eventType.beforeAjaxLoad,function(t){e(s(t.target))}).on(BJUI.eventType.beforeCloseNavtab,function(t){e(s(t.target))}).on(BJUI.eventType.beforeCloseDialog,function(t){e(s(t.target))}),s(function(){s(document).on("keydown keyup",function(t){t.which===BJUI.keyCode.CTRL&&(BJUI.KeyPressed.ctrl="keydown"===t.type),t.which===BJUI.keyCode.SHIFT&&(BJUI.KeyPressed.shift="keydown"===t.type)})})}(jQuery),function(u){"use strict";u(document).on(BJUI.eventType.initUI,function(t){var i=u(t.target),e=i.find('[data-toggle="icheck"]');e.each(function(t){var e=u(this),i=e.attr("id"),n=e.attr("name"),a=e.data("label");a&&e.after('<label for="'+i+'" class="ilabel">'+a+"</label>"),e.on("ifCreated",function(t){var e=u(this).closest("div"),a=e.next('[for="'+i+'"]');e.attr("data-icheck",n),a.attr("data-icheck",n)}).iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChanged",function(){u(this).trigger("validate")}),e.prop("disabled")&&e.iCheck("disable")}),e.filter(".checkboxCtrl").on("ifChanged",function(t){var e=!0===t.target.checked?"check":"uncheck",a=u(this).data("group");i.find(':checkbox[name="'+a+'"]').iCheck(e)}),i.find(":text, :password, textarea, :button, a.btn").each(function(){var t,e,a=u(this),i=a.closest("table.bjui-tabledit");if((a.is(":text")||a.is(":password")||a.isTag("textarea"))&&!a.hasClass("form-control")&&a.addClass("form-control"),a.is(":button")){t=a.data("icon");var n=a.attr("class");a.hasClass("btn")||a.removeClass().addClass("btn").addClass(n),t&&(e="fa-"+t.replace("fa-",""),a.data("bjui.icon")||a.html('<i class="fa '+e+'"></i> '+a.html()).data("bjui.icon",!0))}if(a.isTag("a")&&(t=a.data("icon"))&&(e="fa-"+t.replace("fa-",""),a.data("bjui.icon")||a.html('<i class="fa '+e+'"></i> '+a.html()).data("bjui.icon",!0)),a.isTag("textarea")){var o=a.data("toggle");o&&"autoheight"===o&&u.fn.autosize&&a.addClass("autosize").autosize()}if(!i.length){var s=a.attr("size")||a.attr("cols");if(!s)return;var l=0;(l="%"!==s.charAt(s.length-1)?10*s:s)&&a.css("width",l)}}),i.find('form[data-toggle="validate"]').each(function(){var t=u(this),i=void 0===t.data("alertmsg")||t.data("alertmsg");u(this).validator({valid:function(t){u(t).bjuiajax("ajaxForm",u(t).data())},validClass:"ok",theme:"red_right_effect"}).on("invalid.form",function(t,e,a){i&&u(e).alertmsg("error",FRAG.validateErrorMsg.replace("#validatemsg#",BJUI.regional.validatemsg).replaceMsg(a.length))})}),i.find('[data-toggle="moresearch"]').each(function(){var e=u(this),a=e.closest(".bjui-pageHeader"),i=a&&a.find(".bjui-moreSearch"),n=e.data("name");e.attr("title")||e.attr("title","更多查询条件"),e.click(function(t){i.length?(i.css("top",a.outerHeight()-1),i.is(":visible")?(e.html('<i class="fa fa-angle-double-down"></i>'),n&&u("body").data("moresearch."+n,!1)):(e.html('<i class="fa fa-angle-double-up"></i>'),n&&u("body").data("moresearch."+n,!0)),i.fadeToggle("slow","linear"),t.preventDefault()):BJUI.debug("Not created 'moresearch' box[class=\"bjui-moreSearch\"]!")}),n&&u("body").data("moresearch."+n)&&(i.css("top",a.outerHeight()-1).fadeIn(),e.html('<i class="fa fa-angle-double-up"></i>'))});var a=i.find('select[data-toggle="selectpicker"]'),n=function(t,e){var a=t.data("refurl"),s=function(t){var e=u(t.data("nextselect"));if(e&&e.length){var a=e.data("emptytxt")||"&nbsp;";e.html("<option>"+a+"</option>").selectpicker("refresh"),s(e)}};if(e&&e.length&&a){var i=t.data("val"),l=e.data("val");void 0===i&&(i=t.val()),u.ajax({type:"POST",dataType:"json",url:a.replace("{value}",encodeURIComponent(i)),cache:!1,data:{},success:function(i){if(i){var n="",o="";u.each(i,function(t){var e,a;a=i[t]&&i[t].length?(e=i[t][0],i[t][1]):(e=i[t].value,i[t].label),void 0!==l&&(o=e===l?" selected":""),n+='<option value="'+e+'"'+o+">"+a+"</option>"}),t.removeAttr("data-val").removeData("val"),e.removeAttr("data-val").removeData("val"),n||(n="<option>"+(n=e.data("emptytxt")||"&nbsp;")+"</option>"),e.html(n).selectpicker("refresh"),s(e)}},error:BJUI.ajaxError})}};a.each(function(){var t=u(this),e=t.data(),a=u(e.nextselect);t.addClass("show-tick"),e.style||t.data("style","btn-default"),e.width||t.data("width","auto"),e.container?!0===e.container&&t.attr("data-container","false").data("container",!1):t.data("container","body"),t.selectpicker(),a&&a.length&&void 0!==a.data("val")&&n(t,a)}),a.change(function(){var t=u(this),e=u(t.data("nextselect"));n(t,e),t.attr("aria-required")&&t.trigger("validate")}),i.find('[data-toggle="ztree"]').each(function(){var t,e=u(this),l=e.data(),a=l.options;a&&"string"==typeof a&&(a=a.toObj()),a&&u.extend(l,"object"==typeof a&&a),t=l.setting,l.nodes?("string"==typeof l.nodes&&(l.nodes.trim().startsWith("[")||l.nodes.trim().startsWith("{")?l.nodes=l.nodes.toObj():l.nodes=l.nodes.toFunc()),"function"==typeof l.nodes&&(l.nodes=l.nodes.call(this)),e.removeAttr("data-nodes")):(l.nodes=[],e.find("> li").each(function(){var t=u(this),e=t.data();e.pid&&(e.pId=e.pid),e.name=t.html(),l.nodes.push(e)}),e.empty()),l.showRemoveBtn||(l.showRemoveBtn=!1),l.showRenameBtn||(l.showRenameBtn=!1),l.addHoverDom&&"function"!=typeof l.addHoverDom&&(l.addHoverDom="edit"===l.addHoverDom?function(n,o){var t=o.level,e=u("#"+o.tId+r),a=u("#diyBtn_add_"+o.id),s=u("#diyBtn_del_"+o.id);a.length||t<l.maxAddLevel&&((a=u('<span class="tree_add" id="diyBtn_add_'+o.id+'" title="添加"></span>')).appendTo(e),a.on("click",function(){d.addNodes(o,{name:"新增Item"})}));s.length||(s=u('<span class="tree_del" id="diyBtn_del_'+o.id+'" title="删除"></span>')).appendTo(e).on("click",function(e){var t=function(){s.alertmsg("confirm","确认要删除 "+o.name+" 吗？",{okCall:function(){if(d.removeNode(o),l.onRemove){var t=l.onRemove.toFunc();t&&t.call(this,e,n,o)}},cancelCall:function(){}})};if(l.beforeRemove){var a=l.beforeRemove.toFunc();if(a){var i=a.call(a,n,o);i&&!0===i&&t()}}else t()})}:l.addHoverDom.toFunc()),l.removeHoverDom&&"function"!=typeof l.removeHoverDom&&(l.removeHoverDom="edit"===l.removeHoverDom?function(t,e){var a=u("#diyBtn_add_"+e.id),i=u("#diyBtn_del_"+e.id);a&&a.length&&a.off("click").remove();i&&i.length&&i.off("click").remove()}:l.removeHoverDom.toFunc()),l.maxAddLevel||(l.maxAddLevel=2);var i={view:{addHoverDom:l.addHoverDom||null,removeHoverDom:l.removeHoverDom||null,addDiyDom:l.addDiyDom?l.addDiyDom.toFunc():null},edit:{enable:l.editEnable,showRemoveBtn:l.showRemoveBtn,showRenameBtn:l.showRenameBtn},check:{enable:l.checkEnable,chkStyle:l.chkStyle,radioType:l.radioType},callback:{onClick:l.onClick?l.onClick.toFunc():null,beforeDrag:l.beforeDrag?l.beforeDrag.toFunc():function(t,e){for(var a=0;a<e.length;a++)if(!1===e[a].drag)return!1;return!0},beforeDrop:l.beforeDrop?l.beforeDrop.toFunc():function(t,e,a,i){return!a||!1!==a.drop},onDrop:l.onDrop?l.onDrop.toFunc():null,onCheck:l.onCheck?l.onCheck.toFunc():null,beforeRemove:l.beforeRemove?l.beforeRemove.toFunc():null,onRemove:l.onRemove?l.onRemove.toFunc():null,onNodeCreated:function(t,e,a){if(a.faicon){var i=u("#"+a.tId+"_a");i.data("faicon")||i.data("faicon",!0).addClass("faicon").find("> span.button").append('<i class="fa fa-'+a.faicon+'"></i>')}l.onNodeCreated&&l.onNodeCreated.toFunc().call(this,t,e,a)},onCollapse:function(t,e,a){a.faiconClose&&u("#"+a.tId+"_ico").find("> i").attr("class","fa fa-"+a.faiconClose);l.onCollapse&&l.onCollapse.toFunc().call(this,t,e,a)},onExpand:function(t,e,a){a.faicon&&a.faiconClose&&u("#"+a.tId+"_ico").find("> i").attr("class","fa fa-"+a.faicon);l.onExpand&&l.onExpand.toFunc().call(this,t,e,a)}},data:{simpleData:{enable:l.simpleData||!0},key:{title:l.title||""}}};t&&"string"==typeof t&&(t=t.toObj()),t&&u.extend(!0,i,"object"==typeof t&&t),u.fn.zTree.init(e,i,l.nodes);var r="_a",d=u.fn.zTree.getZTreeObj(e.attr("id"));l.expandAll&&d.expandAll(!0)}),i.find('[data-toggle="selectztree"]').each(function(){var l=u(this),r=l.data(),d=u(r.tree),c=l.outerHeight();if(r.width=r.width||l.outerWidth(),r.height=r.height||"auto",d&&d.length){var a=d.attr("id"),i=u("#"+a+"_select_box"),n=function(t){var e=l.offset().top,a=l.offset().left,i=d.clone().appendTo(u("body")),n=i.outerHeight();i.remove();var o=u(window).height()-n-e-c,s=u(window).height()-e-c;"auto"===r.height&&o<0&&(s+=o),t.css({top:e+c,left:a,"max-height":s})};l.click(function(){if(i&&i.length)return n(i),void i.show();var t=2,e=u.CurrentDialog;e&&e.length&&(t=e.css("zIndex")+1),i=u('<div id="'+a+'_select_box" class="tree-box"></div>').css({position:"absolute",zIndex:t,"min-width":r.width,height:r.height,overflow:"auto",background:"#FAFAFA",border:"1px #EEE solid"}).hide().appendTo(u("body")),d.appendTo(i).css("width","100%").data("fromObj",l).removeClass("hide").show(),n(i),i.show()}),u("body").on("mousedown",function(t){var e=u(t.target);l[0]===t.target||i&&0<i.length&&0<e.closest(".tree-box").length||i.hide()});var t=l.closest(".bjui-pageContent");t&&t.length&&t.scroll(function(){i&&i.length&&n(i)}),l.on("destroy.bjui.selectztree",function(){i.remove()})}}),i.find('[data-toggle="accordion"]').each(function(){var o=u(this),t=o.data("heightbox"),e=o.data("height"),a=function(t,e){var a=o.data("offsety")||0;e=e||u(t).outerHeight()-1*a;var i=o.find(".panel-heading"),n=i.outerHeight();n=(n+1)*i.length,o.css("height",e),e-=n,o.find(".panel-collapse").find(".panel-body").css("height",e)};o.find("> .panel").length&&(t||e)&&(a(t,e),u(window).resize(function(){a(t,e)}),o.on("hidden.bs.collapse",function(t){var e=u(this).find("> .panel:last");e.find("> .panel-heading > h4 > a").hasClass("collapsed")&&e.css("border-bottom","1px #ddd solid")}))}),i.find('[data-toggle="kindeditor"]').each(function(){var t=u(this),e=t.data();e.items&&"string"==typeof e.items&&(e.items=e.items.replaceAll("'","").replaceAll(" ","").split(",")),e.afterUpload&&(e.afterUpload=e.afterUpload.toFunc()),e.afterSelectFile&&(e.afterSelectFile=e.afterSelectFile.toFunc()),e.confirmSelect&&(e.confirmSelect=e.confirmSelect.toFunc());KindEditor.create(t,{pasteType:e.pasteType,minHeight:e.minHeight||260,autoHeightMode:e.autoHeight||!1,items:e.items||KindEditor.options.items,uploadJson:e.uploadJson,fileManagerJson:e.fileManagerJson,allowFileManager:e.allowFileManager||!0,fillDescAfterUploadImage:e.fillDescAfterUploadImage||!0,afterUpload:e.afterUpload,afterSelectFile:e.afterSelectFile,X_afterSelect:e.confirmSelect,htmlTags:{font:[],span:[".color",".background-color",".font-size",".font-family"],div:[".margin",".padding",".text-align"],table:["align","width"],"td,th":["align","valign","width","height","colspan","rowspan"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["class","align",".text-align",".color",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]},cssPath:[BJUI.PLUGINPATH+"kindeditor/editor-content.css",BJUI.PLUGINPATH+"kindeditor/plugins/code/prettify.css"],afterBlur:function(){this.sync()}})}),i.find('[data-toggle="colorpicker"]').each(function(){var e=u(this),t=e.data("bgcolor");e.colorpicker(),t&&e.on("changeColor",function(t){e.css("background-color",t.color.toHex())})}),i.find('[data-toggle="clearcolor"]').each(function(){var t=u(this),e=t.data("target")?u(t.data("target")):null;e&&e.length&&t.click(function(){e.val(""),e.data("bgcolor")&&e.css("background-color","")})}),i.find('[data-toggle="tooltip"]').each(function(){u(this).tooltip()}),i.find('[data-toggle="dropdown"]').parent().on("show.bs.dropdown",function(t){var e=u(this),a=e.outerWidth(),i=e.find("> .dropdown-menu");i.outerWidth()<a&&i.css("min-width",a)}),i.find('form[data-toggle="ajaxform"]').each(function(){u(this).validator({ignore:":input"}),u(this).validator("destroy")}),i.find("textarea[data-toggle=jsoneditor]").each(function(){var e=u(this);e.hide(),setTimeout(function(){CodeMirror.fromTextArea(e[0],{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}).on("change",function(t){e.val(t.getValue())})},100)}),i.find("[data-toggle=clipboard]").each(function(){var t=u(this).data(),e={};t.target?e.target=function(){return i.find(t.target)[0]}:t.text&&(e.text=function(){return t.text}),new ClipboardJS(this,e).on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger),i.alertmsg("error","复制失败！")})})})}(jQuery);